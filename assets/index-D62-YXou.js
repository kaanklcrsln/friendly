var xx=Object.defineProperty;var Px=(t,e,n)=>e in t?xx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rv=(t,e,n)=>Px(t,typeof e!="symbol"?e+"":e,n);function mC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function _C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yC={exports:{}},Nd={},vC={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uu=Symbol.for("react.element"),kx=Symbol.for("react.portal"),Ax=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Mx=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),Fx=Symbol.for("react.memo"),jx=Symbol.for("react.lazy"),xv=Symbol.iterator;function Ux(t){return t===null||typeof t!="object"?null:(t=xv&&t[xv]||t["@@iterator"],typeof t=="function"?t:null)}var EC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wC=Object.assign,CC={};function Na(t,e,n){this.props=t,this.context=e,this.refs=CC,this.updater=n||EC}Na.prototype.isReactComponent={};Na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function TC(){}TC.prototype=Na.prototype;function Tm(t,e,n){this.props=t,this.context=e,this.refs=CC,this.updater=n||EC}var Im=Tm.prototype=new TC;Im.constructor=Tm;wC(Im,Na.prototype);Im.isPureReactComponent=!0;var Pv=Array.isArray,IC=Object.prototype.hasOwnProperty,Sm={current:null},SC={key:!0,ref:!0,__self:!0,__source:!0};function RC(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)IC.call(e,i)&&!SC.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Uu,type:t,key:s,ref:o,props:r,_owner:Sm.current}}function zx(t,e){return{$$typeof:Uu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uu}function Bx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kv=/\/+/g;function zf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bx(""+t.key):e.toString(36)}function rh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uu:case kx:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+zf(o,0):i,Pv(r)?(n="",t!=null&&(n=t.replace(kv,"$&/")+"/"),rh(r,e,n,"",function(c){return c})):r!=null&&(Rm(r)&&(r=zx(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(kv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Pv(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+zf(s,a);o+=rh(s,e,n,l,r)}else if(l=Ux(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+zf(s,a++),o+=rh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sc(t,e,n){if(t==null)return t;var i=[],r=0;return rh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Vx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},sh={transition:null},Wx={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:sh,ReactCurrentOwner:Sm};function xC(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Sc,forEach:function(t,e,n){Sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sc(t,function(){e++}),e},toArray:function(t){return Sc(t,function(e){return e})||[]},only:function(t){if(!Rm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Na;Ee.Fragment=Ax;Ee.Profiler=Lx;Ee.PureComponent=Tm;Ee.StrictMode=Nx;Ee.Suspense=bx;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;Ee.act=xC;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=wC({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)IC.call(e,l)&&!SC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Uu,type:t.type,key:r,ref:s,props:i,_owner:o}};Ee.createContext=function(t){return t={$$typeof:Dx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ox,_context:t},t.Consumer=t};Ee.createElement=RC;Ee.createFactory=function(t){var e=RC.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:Mx,render:t}};Ee.isValidElement=Rm;Ee.lazy=function(t){return{$$typeof:jx,_payload:{_status:-1,_result:t},_init:Vx}};Ee.memo=function(t,e){return{$$typeof:Fx,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=sh.transition;sh.transition={};try{t()}finally{sh.transition=e}};Ee.unstable_act=xC;Ee.useCallback=function(t,e){return cn.current.useCallback(t,e)};Ee.useContext=function(t){return cn.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return cn.current.useEffect(t,e)};Ee.useId=function(){return cn.current.useId()};Ee.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return cn.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Ee.useRef=function(t){return cn.current.useRef(t)};Ee.useState=function(t){return cn.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return cn.current.useTransition()};Ee.version="18.3.1";vC.exports=Ee;var U=vC.exports;const PC=_C(U),Gx=mC({__proto__:null,default:PC},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx=U,$x=Symbol.for("react.element"),Kx=Symbol.for("react.fragment"),Yx=Object.prototype.hasOwnProperty,Xx=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qx={key:!0,ref:!0,__self:!0,__source:!0};function kC(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Yx.call(e,i)&&!qx.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:$x,type:t,key:s,ref:o,props:r,_owner:Xx.current}}Nd.Fragment=Kx;Nd.jsx=kC;Nd.jsxs=kC;yC.exports=Nd;var O=yC.exports,Gp={},AC={exports:{}},zn={},NC={exports:{}},LC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,J){var Q=V.length;V.push(J);e:for(;0<Q;){var he=Q-1>>>1,ie=V[he];if(0<r(ie,J))V[he]=J,V[Q]=ie,Q=he;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var J=V[0],Q=V.pop();if(Q!==J){V[0]=Q;e:for(var he=0,ie=V.length,le=ie>>>1;he<le;){var _t=2*(he+1)-1,xe=V[_t],De=_t+1,Te=V[De];if(0>r(xe,Q))De<ie&&0>r(Te,xe)?(V[he]=Te,V[De]=Q,he=De):(V[he]=xe,V[_t]=Q,he=_t);else if(De<ie&&0>r(Te,Q))V[he]=Te,V[De]=Q,he=De;else break e}}return J}function r(V,J){var Q=V.sortIndex-J.sortIndex;return Q!==0?Q:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,_=!1,y=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(V){for(var J=n(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=V)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function N(V){if(T=!1,R(V),!y)if(n(l)!==null)y=!0,we(M);else{var J=n(c);J!==null&&$e(N,J.startTime-V)}}function M(V,J){y=!1,T&&(T=!1,C(v),v=-1),_=!0;var Q=f;try{for(R(J),d=n(l);d!==null&&(!(d.expirationTime>J)||V&&!k());){var he=d.callback;if(typeof he=="function"){d.callback=null,f=d.priorityLevel;var ie=he(d.expirationTime<=J);J=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&i(l),R(J)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var _t=n(c);_t!==null&&$e(N,_t.startTime-J),le=!1}return le}finally{d=null,f=Q,_=!1}}var z=!1,m=null,v=-1,I=5,S=-1;function k(){return!(t.unstable_now()-S<I)}function L(){if(m!==null){var V=t.unstable_now();S=V;var J=!0;try{J=m(!0,V)}finally{J?x():(z=!1,m=null)}}else z=!1}var x;if(typeof E=="function")x=function(){E(L)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Fe=fe.port2;fe.port1.onmessage=L,x=function(){Fe.postMessage(null)}}else x=function(){P(L,0)};function we(V){m=V,z||(z=!0,x())}function $e(V,J){v=P(function(){V(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,we(M))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Q=f;f=J;try{return V()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=f;f=V;try{return J()}finally{f=Q}},t.unstable_scheduleCallback=function(V,J,Q){var he=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?he+Q:he):Q=he,V){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,V={id:h++,callback:J,priorityLevel:V,startTime:Q,expirationTime:ie,sortIndex:-1},Q>he?(V.sortIndex=Q,e(c,V),n(l)===null&&V===n(c)&&(T?(C(v),v=-1):T=!0,$e(N,Q-he))):(V.sortIndex=ie,e(l,V),y||_||(y=!0,we(M))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var J=f;return function(){var Q=f;f=J;try{return V.apply(this,arguments)}finally{f=Q}}}})(LC);NC.exports=LC;var Zx=NC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx=U,Un=Zx;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OC=new Set,eu={};function lo(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(eu[t]=e,t=0;t<e.length;t++)OC.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=Object.prototype.hasOwnProperty,Jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Av={},Nv={};function eP(t){return Hp.call(Nv,t)?!0:Hp.call(Av,t)?!1:Jx.test(t)?Nv[t]=!0:(Av[t]=!0,!1)}function tP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nP(t,e,n,i){if(e===null||typeof e>"u"||tP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var xm=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xm,Pm);Bt[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xm,Pm);Bt[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xm,Pm);Bt[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function km(t,e,n,i){var r=Bt.hasOwnProperty(e)?Bt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nP(e,n,r,i)&&(n=null),i||r===null?eP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var yr=Qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),DC=Symbol.for("react.provider"),MC=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Kp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),Lm=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),bC=Symbol.for("react.offscreen"),Lv=Symbol.iterator;function il(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Bf;function Il(t){if(Bf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bf=e&&e[1]||""}return`
`+Bf+t}var Vf=!1;function Wf(t,e){if(!t||Vf)return"";Vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Il(t):""}function iP(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=Wf(t.type,!1),t;case 11:return t=Wf(t.type.render,!1),t;case 1:return t=Wf(t.type,!0),t;default:return""}}function Xp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zo:return"Fragment";case Uo:return"Portal";case $p:return"Profiler";case Am:return"StrictMode";case Kp:return"Suspense";case Yp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MC:return(t.displayName||"Context")+".Consumer";case DC:return(t._context.displayName||"Context")+".Provider";case Nm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lm:return e=t.displayName||null,e!==null?e:Xp(t.type)||"Memo";case jr:e=t._payload,t=t._init;try{return Xp(t(e))}catch{}}return null}function rP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xp(e);case 8:return e===Am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sP(t){var e=FC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xc(t){t._valueTracker||(t._valueTracker=sP(t))}function jC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=FC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qp(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ov(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UC(t,e){e=e.checked,e!=null&&km(t,"checked",e,!1)}function Zp(t,e){UC(t,e);var n=ls(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qp(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qp(t,e,n){(e!=="number"||Ih(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function ta(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Jp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Sl(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function zC(t,e){var n=ls(e.value),i=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function bv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pc,VC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pc=Pc||document.createElement("div"),Pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oP=["Webkit","ms","Moz","O"];Object.keys(Ml).forEach(function(t){oP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ml[e]=Ml[t]})});function WC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ml.hasOwnProperty(t)&&Ml[t]?(""+e).trim():e+"px"}function GC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=WC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aP=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tg(t,e){if(e){if(aP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function ng(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ig=null;function Om(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rg=null,na=null,ia=null;function Fv(t){if(t=Vu(t)){if(typeof rg!="function")throw Error(G(280));var e=t.stateNode;e&&(e=bd(e),rg(t.stateNode,t.type,e))}}function HC(t){na?ia?ia.push(t):ia=[t]:na=t}function $C(){if(na){var t=na,e=ia;if(ia=na=null,Fv(t),e)for(t=0;t<e.length;t++)Fv(e[t])}}function KC(t,e){return t(e)}function YC(){}var Gf=!1;function XC(t,e,n){if(Gf)return t(e,n);Gf=!0;try{return KC(t,e,n)}finally{Gf=!1,(na!==null||ia!==null)&&(YC(),$C())}}function nu(t,e){var n=t.stateNode;if(n===null)return null;var i=bd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var sg=!1;if(cr)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){sg=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{sg=!1}function lP(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var bl=!1,Sh=null,Rh=!1,og=null,uP={onError:function(t){bl=!0,Sh=t}};function cP(t,e,n,i,r,s,o,a,l){bl=!1,Sh=null,lP.apply(uP,arguments)}function hP(t,e,n,i,r,s,o,a,l){if(cP.apply(this,arguments),bl){if(bl){var c=Sh;bl=!1,Sh=null}else throw Error(G(198));Rh||(Rh=!0,og=c)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jv(t){if(uo(t)!==t)throw Error(G(188))}function dP(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return jv(r),t;if(s===i)return jv(r),e;s=s.sibling}throw Error(G(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==i)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function ZC(t){return t=dP(t),t!==null?QC(t):null}function QC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QC(t);if(e!==null)return e;t=t.sibling}return null}var JC=Un.unstable_scheduleCallback,Uv=Un.unstable_cancelCallback,fP=Un.unstable_shouldYield,pP=Un.unstable_requestPaint,vt=Un.unstable_now,gP=Un.unstable_getCurrentPriorityLevel,Dm=Un.unstable_ImmediatePriority,e1=Un.unstable_UserBlockingPriority,xh=Un.unstable_NormalPriority,mP=Un.unstable_LowPriority,t1=Un.unstable_IdlePriority,Ld=null,Oi=null;function _P(t){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(Ld,t,void 0,(t.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:EP,yP=Math.log,vP=Math.LN2;function EP(t){return t>>>=0,t===0?32:31-(yP(t)/vP|0)|0}var kc=64,Ac=4194304;function Rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Rl(a):(s&=o,s!==0&&(i=Rl(s)))}else o=n&~r,o!==0?i=Rl(o):s!==0&&(i=Rl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-_i(e),r=1<<n,i|=t[n],e&=~r;return i}function wP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_i(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=wP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ag(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n1(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function Hf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_i(e),t[e]=n}function TP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-_i(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Mm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-_i(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var We=0;function i1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r1,bm,s1,o1,a1,lg=!1,Nc=[],Zr=null,Qr=null,Jr=null,iu=new Map,ru=new Map,Br=[],IP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zv(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function sl(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Vu(e),e!==null&&bm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function SP(t,e,n,i,r){switch(e){case"focusin":return Zr=sl(Zr,t,e,n,i,r),!0;case"dragenter":return Qr=sl(Qr,t,e,n,i,r),!0;case"mouseover":return Jr=sl(Jr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return iu.set(s,sl(iu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ru.set(s,sl(ru.get(s)||null,t,e,n,i,r)),!0}return!1}function l1(t){var e=js(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=qC(n),e!==null){t.blockedOn=e,a1(t.priority,function(){s1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ug(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ig=i,n.target.dispatchEvent(i),ig=null}else return e=Vu(n),e!==null&&bm(e),t.blockedOn=n,!1;e.shift()}return!0}function Bv(t,e,n){oh(t)&&n.delete(e)}function RP(){lg=!1,Zr!==null&&oh(Zr)&&(Zr=null),Qr!==null&&oh(Qr)&&(Qr=null),Jr!==null&&oh(Jr)&&(Jr=null),iu.forEach(Bv),ru.forEach(Bv)}function ol(t,e){t.blockedOn===e&&(t.blockedOn=null,lg||(lg=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,RP)))}function su(t){function e(r){return ol(r,t)}if(0<Nc.length){ol(Nc[0],t);for(var n=1;n<Nc.length;n++){var i=Nc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Zr!==null&&ol(Zr,t),Qr!==null&&ol(Qr,t),Jr!==null&&ol(Jr,t),iu.forEach(e),ru.forEach(e),n=0;n<Br.length;n++)i=Br[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)l1(n),n.blockedOn===null&&Br.shift()}var ra=yr.ReactCurrentBatchConfig,kh=!0;function xP(t,e,n,i){var r=We,s=ra.transition;ra.transition=null;try{We=1,Fm(t,e,n,i)}finally{We=r,ra.transition=s}}function PP(t,e,n,i){var r=We,s=ra.transition;ra.transition=null;try{We=4,Fm(t,e,n,i)}finally{We=r,ra.transition=s}}function Fm(t,e,n,i){if(kh){var r=ug(t,e,n,i);if(r===null)tp(t,e,i,Ah,n),zv(t,i);else if(SP(r,t,e,n,i))i.stopPropagation();else if(zv(t,i),e&4&&-1<IP.indexOf(t)){for(;r!==null;){var s=Vu(r);if(s!==null&&r1(s),s=ug(t,e,n,i),s===null&&tp(t,e,i,Ah,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else tp(t,e,i,null,n)}}var Ah=null;function ug(t,e,n,i){if(Ah=null,t=Om(i),t=js(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ah=t,null}function u1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gP()){case Dm:return 1;case e1:return 4;case xh:case mP:return 16;case t1:return 536870912;default:return 16}default:return 16}}var Kr=null,jm=null,ah=null;function c1(){if(ah)return ah;var t,e=jm,n=e.length,i,r="value"in Kr?Kr.value:Kr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return ah=r.slice(t,1<i?1-i:void 0)}function lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lc(){return!0}function Vv(){return!1}function Bn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lc:Vv,this.isPropagationStopped=Vv,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Um=Bn(La),Bu=ht({},La,{view:0,detail:0}),kP=Bn(Bu),$f,Kf,al,Od=ht({},Bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?($f=t.screenX-al.screenX,Kf=t.screenY-al.screenY):Kf=$f=0,al=t),$f)},movementY:function(t){return"movementY"in t?t.movementY:Kf}}),Wv=Bn(Od),AP=ht({},Od,{dataTransfer:0}),NP=Bn(AP),LP=ht({},Bu,{relatedTarget:0}),Yf=Bn(LP),OP=ht({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),DP=Bn(OP),MP=ht({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bP=Bn(MP),FP=ht({},La,{data:0}),Gv=Bn(FP),jP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zP[t])?!!e[t]:!1}function zm(){return BP}var VP=ht({},Bu,{key:function(t){if(t.key){var e=jP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zm,charCode:function(t){return t.type==="keypress"?lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WP=Bn(VP),GP=ht({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=Bn(GP),HP=ht({},Bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zm}),$P=Bn(HP),KP=ht({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),YP=Bn(KP),XP=ht({},Od,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qP=Bn(XP),ZP=[9,13,27,32],Bm=cr&&"CompositionEvent"in window,Fl=null;cr&&"documentMode"in document&&(Fl=document.documentMode);var QP=cr&&"TextEvent"in window&&!Fl,h1=cr&&(!Bm||Fl&&8<Fl&&11>=Fl),$v=" ",Kv=!1;function d1(t,e){switch(t){case"keyup":return ZP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bo=!1;function JP(t,e){switch(t){case"compositionend":return f1(e);case"keypress":return e.which!==32?null:(Kv=!0,$v);case"textInput":return t=e.data,t===$v&&Kv?null:t;default:return null}}function ek(t,e){if(Bo)return t==="compositionend"||!Bm&&d1(t,e)?(t=c1(),ah=jm=Kr=null,Bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h1&&e.locale!=="ko"?null:e.data;default:return null}}var tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tk[t.type]:e==="textarea"}function p1(t,e,n,i){HC(i),e=Nh(e,"onChange"),0<e.length&&(n=new Um("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jl=null,ou=null;function nk(t){S1(t,0)}function Dd(t){var e=Go(t);if(jC(e))return t}function ik(t,e){if(t==="change")return e}var g1=!1;if(cr){var Xf;if(cr){var qf="oninput"in document;if(!qf){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),qf=typeof Xv.oninput=="function"}Xf=qf}else Xf=!1;g1=Xf&&(!document.documentMode||9<document.documentMode)}function qv(){jl&&(jl.detachEvent("onpropertychange",m1),ou=jl=null)}function m1(t){if(t.propertyName==="value"&&Dd(ou)){var e=[];p1(e,ou,t,Om(t)),XC(nk,e)}}function rk(t,e,n){t==="focusin"?(qv(),jl=e,ou=n,jl.attachEvent("onpropertychange",m1)):t==="focusout"&&qv()}function sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dd(ou)}function ok(t,e){if(t==="click")return Dd(e)}function ak(t,e){if(t==="input"||t==="change")return Dd(e)}function lk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ei=typeof Object.is=="function"?Object.is:lk;function au(t,e){if(Ei(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Hp.call(e,r)||!Ei(t[r],e[r]))return!1}return!0}function Zv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qv(t,e){var n=Zv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zv(n)}}function _1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y1(){for(var t=window,e=Ih();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ih(t.document)}return e}function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uk(t){var e=y1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_1(n.ownerDocument.documentElement,n)){if(i!==null&&Vm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Qv(n,s);var o=Qv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ck=cr&&"documentMode"in document&&11>=document.documentMode,Vo=null,cg=null,Ul=null,hg=!1;function Jv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hg||Vo==null||Vo!==Ih(i)||(i=Vo,"selectionStart"in i&&Vm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ul&&au(Ul,i)||(Ul=i,i=Nh(cg,"onSelect"),0<i.length&&(e=new Um("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Vo)))}function Oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Zf={},v1={};cr&&(v1=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Md(t){if(Zf[t])return Zf[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v1)return Zf[t]=e[n];return t}var E1=Md("animationend"),w1=Md("animationiteration"),C1=Md("animationstart"),T1=Md("transitionend"),I1=new Map,e0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){I1.set(t,e),lo(e,[t])}for(var Qf=0;Qf<e0.length;Qf++){var Jf=e0[Qf],hk=Jf.toLowerCase(),dk=Jf[0].toUpperCase()+Jf.slice(1);ps(hk,"on"+dk)}ps(E1,"onAnimationEnd");ps(w1,"onAnimationIteration");ps(C1,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(T1,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function t0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,hP(i,e,void 0,t),t.currentTarget=null}function S1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;t0(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;t0(r,a,c),s=l}}}if(Rh)throw t=og,Rh=!1,og=null,t}function et(t,e){var n=e[mg];n===void 0&&(n=e[mg]=new Set);var i=t+"__bubble";n.has(i)||(R1(e,t,2,!1),n.add(i))}function ep(t,e,n){var i=0;e&&(i|=4),R1(n,t,i,e)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function lu(t){if(!t[Dc]){t[Dc]=!0,OC.forEach(function(n){n!=="selectionchange"&&(fk.has(n)||ep(n,!1,t),ep(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dc]||(e[Dc]=!0,ep("selectionchange",!1,e))}}function R1(t,e,n,i){switch(u1(e)){case 1:var r=xP;break;case 4:r=PP;break;default:r=Fm}n=r.bind(null,e,n,t),r=void 0,!sg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function tp(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=js(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}XC(function(){var c=s,h=Om(n),d=[];e:{var f=I1.get(t);if(f!==void 0){var _=Um,y=t;switch(t){case"keypress":if(lh(n)===0)break e;case"keydown":case"keyup":_=WP;break;case"focusin":y="focus",_=Yf;break;case"focusout":y="blur",_=Yf;break;case"beforeblur":case"afterblur":_=Yf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=NP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=$P;break;case E1:case w1:case C1:_=DP;break;case T1:_=YP;break;case"scroll":_=kP;break;case"wheel":_=qP;break;case"copy":case"cut":case"paste":_=bP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Hv}var T=(e&4)!==0,P=!T&&t==="scroll",C=T?f!==null?f+"Capture":null:f;T=[];for(var E=c,R;E!==null;){R=E;var N=R.stateNode;if(R.tag===5&&N!==null&&(R=N,C!==null&&(N=nu(E,C),N!=null&&T.push(uu(E,N,R)))),P)break;E=E.return}0<T.length&&(f=new _(f,y,null,n,h),d.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",f&&n!==ig&&(y=n.relatedTarget||n.fromElement)&&(js(y)||y[hr]))break e;if((_||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?js(y):null,y!==null&&(P=uo(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(T=Wv,N="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(T=Hv,N="onPointerLeave",C="onPointerEnter",E="pointer"),P=_==null?f:Go(_),R=y==null?f:Go(y),f=new T(N,E+"leave",_,n,h),f.target=P,f.relatedTarget=R,N=null,js(h)===c&&(T=new T(C,E+"enter",y,n,h),T.target=R,T.relatedTarget=P,N=T),P=N,_&&y)t:{for(T=_,C=y,E=0,R=T;R;R=Ro(R))E++;for(R=0,N=C;N;N=Ro(N))R++;for(;0<E-R;)T=Ro(T),E--;for(;0<R-E;)C=Ro(C),R--;for(;E--;){if(T===C||C!==null&&T===C.alternate)break t;T=Ro(T),C=Ro(C)}T=null}else T=null;_!==null&&n0(d,f,_,T,!1),y!==null&&P!==null&&n0(d,P,y,T,!0)}}e:{if(f=c?Go(c):window,_=f.nodeName&&f.nodeName.toLowerCase(),_==="select"||_==="input"&&f.type==="file")var M=ik;else if(Yv(f))if(g1)M=ak;else{M=sk;var z=rk}else(_=f.nodeName)&&_.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=ok);if(M&&(M=M(t,c))){p1(d,M,n,h);break e}z&&z(t,f,c),t==="focusout"&&(z=f._wrapperState)&&z.controlled&&f.type==="number"&&Qp(f,"number",f.value)}switch(z=c?Go(c):window,t){case"focusin":(Yv(z)||z.contentEditable==="true")&&(Vo=z,cg=c,Ul=null);break;case"focusout":Ul=cg=Vo=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,Jv(d,n,h);break;case"selectionchange":if(ck)break;case"keydown":case"keyup":Jv(d,n,h)}var m;if(Bm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Bo?d1(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(h1&&n.locale!=="ko"&&(Bo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Bo&&(m=c1()):(Kr=h,jm="value"in Kr?Kr.value:Kr.textContent,Bo=!0)),z=Nh(c,v),0<z.length&&(v=new Gv(v,t,null,n,h),d.push({event:v,listeners:z}),m?v.data=m:(m=f1(n),m!==null&&(v.data=m)))),(m=QP?JP(t,n):ek(t,n))&&(c=Nh(c,"onBeforeInput"),0<c.length&&(h=new Gv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=m))}S1(d,e)})}function uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=nu(t,n),s!=null&&i.unshift(uu(t,s,r)),s=nu(t,e),s!=null&&i.push(uu(t,s,r))),t=t.return}return i}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n0(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=nu(n,s),l!=null&&o.unshift(uu(n,l,a))):r||(l=nu(n,s),l!=null&&o.push(uu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function i0(t){return(typeof t=="string"?t:""+t).replace(pk,`
`).replace(gk,"")}function Mc(t,e,n){if(e=i0(e),i0(t)!==e&&n)throw Error(G(425))}function Lh(){}var dg=null,fg=null;function pg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gg=typeof setTimeout=="function"?setTimeout:void 0,mk=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,_k=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(yk)}:gg;function yk(t){setTimeout(function(){throw t})}function np(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),su(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);su(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Oa,cu="__reactProps$"+Oa,hr="__reactContainer$"+Oa,mg="__reactEvents$"+Oa,vk="__reactListeners$"+Oa,Ek="__reactHandles$"+Oa;function js(t){var e=t[Pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[Pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[Pi])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function Vu(t){return t=t[Pi]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Go(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function bd(t){return t[cu]||null}var _g=[],Ho=-1;function gs(t){return{current:t}}function nt(t){0>Ho||(t.current=_g[Ho],_g[Ho]=null,Ho--)}function qe(t,e){Ho++,_g[Ho]=t.current,t.current=e}var us={},Jt=gs(us),In=gs(!1),Ys=us;function va(t,e){var n=t.type.contextTypes;if(!n)return us;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Sn(t){return t=t.childContextTypes,t!=null}function Oh(){nt(In),nt(Jt)}function o0(t,e,n){if(Jt.current!==us)throw Error(G(168));qe(Jt,e),qe(In,n)}function x1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(G(108,rP(t)||"Unknown",r));return ht({},n,i)}function Dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Ys=Jt.current,qe(Jt,t),qe(In,In.current),!0}function a0(t,e,n){var i=t.stateNode;if(!i)throw Error(G(169));n?(t=x1(t,e,Ys),i.__reactInternalMemoizedMergedChildContext=t,nt(In),nt(Jt),qe(Jt,t)):nt(In),qe(In,n)}var Zi=null,Fd=!1,ip=!1;function P1(t){Zi===null?Zi=[t]:Zi.push(t)}function wk(t){Fd=!0,P1(t)}function ms(){if(!ip&&Zi!==null){ip=!0;var t=0,e=We;try{var n=Zi;for(We=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Zi=null,Fd=!1}catch(r){throw Zi!==null&&(Zi=Zi.slice(t+1)),JC(Dm,ms),r}finally{We=e,ip=!1}}return null}var $o=[],Ko=0,Mh=null,bh=0,Kn=[],Yn=0,Xs=null,Ji=1,er="";function Ls(t,e){$o[Ko++]=bh,$o[Ko++]=Mh,Mh=t,bh=e}function k1(t,e,n){Kn[Yn++]=Ji,Kn[Yn++]=er,Kn[Yn++]=Xs,Xs=t;var i=Ji;t=er;var r=32-_i(i)-1;i&=~(1<<r),n+=1;var s=32-_i(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ji=1<<32-_i(e)+r|n<<r|i,er=s+t}else Ji=1<<s|n<<r|i,er=t}function Wm(t){t.return!==null&&(Ls(t,1),k1(t,1,0))}function Gm(t){for(;t===Mh;)Mh=$o[--Ko],$o[Ko]=null,bh=$o[--Ko],$o[Ko]=null;for(;t===Xs;)Xs=Kn[--Yn],Kn[Yn]=null,er=Kn[--Yn],Kn[Yn]=null,Ji=Kn[--Yn],Kn[Yn]=null}var jn=null,bn=null,ot=!1,di=null;function A1(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jn=t,bn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:Ji,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jn=t,bn=null,!0):!1;default:return!1}}function yg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vg(t){if(ot){var e=bn;if(e){var n=e;if(!l0(t,e)){if(yg(t))throw Error(G(418));e=es(n.nextSibling);var i=jn;e&&l0(t,e)?A1(i,n):(t.flags=t.flags&-4097|2,ot=!1,jn=t)}}else{if(yg(t))throw Error(G(418));t.flags=t.flags&-4097|2,ot=!1,jn=t}}}function u0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function bc(t){if(t!==jn)return!1;if(!ot)return u0(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pg(t.type,t.memoizedProps)),e&&(e=bn)){if(yg(t))throw N1(),Error(G(418));for(;e;)A1(t,e),e=es(e.nextSibling)}if(u0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=jn?es(t.stateNode.nextSibling):null;return!0}function N1(){for(var t=bn;t;)t=es(t.nextSibling)}function Ea(){bn=jn=null,ot=!1}function Hm(t){di===null?di=[t]:di.push(t)}var Ck=yr.ReactCurrentBatchConfig;function ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var i=n.stateNode}if(!i)throw Error(G(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Fc(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function L1(t){function e(C,E){if(t){var R=C.deletions;R===null?(C.deletions=[E],C.flags|=16):R.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function i(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function r(C,E){return C=rs(C,E),C.index=0,C.sibling=null,C}function s(C,E,R){return C.index=R,t?(R=C.alternate,R!==null?(R=R.index,R<E?(C.flags|=2,E):R):(C.flags|=2,E)):(C.flags|=1048576,E)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,E,R,N){return E===null||E.tag!==6?(E=cp(R,C.mode,N),E.return=C,E):(E=r(E,R),E.return=C,E)}function l(C,E,R,N){var M=R.type;return M===zo?h(C,E,R.props.children,N,R.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===jr&&c0(M)===E.type)?(N=r(E,R.props),N.ref=ll(C,E,R),N.return=C,N):(N=gh(R.type,R.key,R.props,null,C.mode,N),N.ref=ll(C,E,R),N.return=C,N)}function c(C,E,R,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=hp(R,C.mode,N),E.return=C,E):(E=r(E,R.children||[]),E.return=C,E)}function h(C,E,R,N,M){return E===null||E.tag!==7?(E=$s(R,C.mode,N,M),E.return=C,E):(E=r(E,R),E.return=C,E)}function d(C,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=cp(""+E,C.mode,R),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rc:return R=gh(E.type,E.key,E.props,null,C.mode,R),R.ref=ll(C,null,E),R.return=C,R;case Uo:return E=hp(E,C.mode,R),E.return=C,E;case jr:var N=E._init;return d(C,N(E._payload),R)}if(Sl(E)||il(E))return E=$s(E,C.mode,R,null),E.return=C,E;Fc(C,E)}return null}function f(C,E,R,N){var M=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return M!==null?null:a(C,E,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Rc:return R.key===M?l(C,E,R,N):null;case Uo:return R.key===M?c(C,E,R,N):null;case jr:return M=R._init,f(C,E,M(R._payload),N)}if(Sl(R)||il(R))return M!==null?null:h(C,E,R,N,null);Fc(C,R)}return null}function _(C,E,R,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return C=C.get(R)||null,a(E,C,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rc:return C=C.get(N.key===null?R:N.key)||null,l(E,C,N,M);case Uo:return C=C.get(N.key===null?R:N.key)||null,c(E,C,N,M);case jr:var z=N._init;return _(C,E,R,z(N._payload),M)}if(Sl(N)||il(N))return C=C.get(R)||null,h(E,C,N,M,null);Fc(E,N)}return null}function y(C,E,R,N){for(var M=null,z=null,m=E,v=E=0,I=null;m!==null&&v<R.length;v++){m.index>v?(I=m,m=null):I=m.sibling;var S=f(C,m,R[v],N);if(S===null){m===null&&(m=I);break}t&&m&&S.alternate===null&&e(C,m),E=s(S,E,v),z===null?M=S:z.sibling=S,z=S,m=I}if(v===R.length)return n(C,m),ot&&Ls(C,v),M;if(m===null){for(;v<R.length;v++)m=d(C,R[v],N),m!==null&&(E=s(m,E,v),z===null?M=m:z.sibling=m,z=m);return ot&&Ls(C,v),M}for(m=i(C,m);v<R.length;v++)I=_(m,C,v,R[v],N),I!==null&&(t&&I.alternate!==null&&m.delete(I.key===null?v:I.key),E=s(I,E,v),z===null?M=I:z.sibling=I,z=I);return t&&m.forEach(function(k){return e(C,k)}),ot&&Ls(C,v),M}function T(C,E,R,N){var M=il(R);if(typeof M!="function")throw Error(G(150));if(R=M.call(R),R==null)throw Error(G(151));for(var z=M=null,m=E,v=E=0,I=null,S=R.next();m!==null&&!S.done;v++,S=R.next()){m.index>v?(I=m,m=null):I=m.sibling;var k=f(C,m,S.value,N);if(k===null){m===null&&(m=I);break}t&&m&&k.alternate===null&&e(C,m),E=s(k,E,v),z===null?M=k:z.sibling=k,z=k,m=I}if(S.done)return n(C,m),ot&&Ls(C,v),M;if(m===null){for(;!S.done;v++,S=R.next())S=d(C,S.value,N),S!==null&&(E=s(S,E,v),z===null?M=S:z.sibling=S,z=S);return ot&&Ls(C,v),M}for(m=i(C,m);!S.done;v++,S=R.next())S=_(m,C,v,S.value,N),S!==null&&(t&&S.alternate!==null&&m.delete(S.key===null?v:S.key),E=s(S,E,v),z===null?M=S:z.sibling=S,z=S);return t&&m.forEach(function(L){return e(C,L)}),ot&&Ls(C,v),M}function P(C,E,R,N){if(typeof R=="object"&&R!==null&&R.type===zo&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Rc:e:{for(var M=R.key,z=E;z!==null;){if(z.key===M){if(M=R.type,M===zo){if(z.tag===7){n(C,z.sibling),E=r(z,R.props.children),E.return=C,C=E;break e}}else if(z.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===jr&&c0(M)===z.type){n(C,z.sibling),E=r(z,R.props),E.ref=ll(C,z,R),E.return=C,C=E;break e}n(C,z);break}else e(C,z);z=z.sibling}R.type===zo?(E=$s(R.props.children,C.mode,N,R.key),E.return=C,C=E):(N=gh(R.type,R.key,R.props,null,C.mode,N),N.ref=ll(C,E,R),N.return=C,C=N)}return o(C);case Uo:e:{for(z=R.key;E!==null;){if(E.key===z)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(C,E.sibling),E=r(E,R.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=hp(R,C.mode,N),E.return=C,C=E}return o(C);case jr:return z=R._init,P(C,E,z(R._payload),N)}if(Sl(R))return y(C,E,R,N);if(il(R))return T(C,E,R,N);Fc(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(n(C,E.sibling),E=r(E,R),E.return=C,C=E):(n(C,E),E=cp(R,C.mode,N),E.return=C,C=E),o(C)):n(C,E)}return P}var wa=L1(!0),O1=L1(!1),Fh=gs(null),jh=null,Yo=null,$m=null;function Km(){$m=Yo=jh=null}function Ym(t){var e=Fh.current;nt(Fh),t._currentValue=e}function Eg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){jh=t,$m=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if($m!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(jh===null)throw Error(G(308));Yo=t,jh.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Us=null;function Xm(t){Us===null?Us=[t]:Us.push(t)}function D1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Xm(e)):(n.next=r.next,r.next=n),e.interleaved=n,dr(t,i)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function qm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,dr(t,n)}return r=i.interleaved,r===null?(e.next=e,Xm(i)):(e.next=r.next,r.next=e),i.interleaved=e,dr(t,n)}function uh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Mm(t,n)}}function h0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uh(t,e,n,i){var r=t.updateQueue;Ur=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,_=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,T=a;switch(f=e,_=n,T.tag){case 1:if(y=T.payload,typeof y=="function"){d=y.call(_,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,f=typeof y=="function"?y.call(_,d,f):y,f==null)break e;d=ht({},d,f);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else _={eventTime:_,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=d}}function d0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(G(191,r));r.call(i)}}}var Wu={},Di=gs(Wu),hu=gs(Wu),du=gs(Wu);function zs(t){if(t===Wu)throw Error(G(174));return t}function Zm(t,e){switch(qe(du,e),qe(hu,t),qe(Di,Wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eg(e,t)}nt(Di),qe(Di,e)}function Ca(){nt(Di),nt(hu),nt(du)}function b1(t){zs(du.current);var e=zs(Di.current),n=eg(e,t.type);e!==n&&(qe(hu,t),qe(Di,n))}function Qm(t){hu.current===t&&(nt(Di),nt(hu))}var ut=gs(0);function zh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rp=[];function Jm(){for(var t=0;t<rp.length;t++)rp[t]._workInProgressVersionPrimary=null;rp.length=0}var ch=yr.ReactCurrentDispatcher,sp=yr.ReactCurrentBatchConfig,qs=0,ct=null,St=null,kt=null,Bh=!1,zl=!1,fu=0,Tk=0;function Ht(){throw Error(G(321))}function e_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ei(t[n],e[n]))return!1;return!0}function t_(t,e,n,i,r,s){if(qs=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ch.current=t===null||t.memoizedState===null?xk:Pk,t=n(i,r),zl){s=0;do{if(zl=!1,fu=0,25<=s)throw Error(G(301));s+=1,kt=St=null,e.updateQueue=null,ch.current=kk,t=n(i,r)}while(zl)}if(ch.current=Vh,e=St!==null&&St.next!==null,qs=0,kt=St=ct=null,Bh=!1,e)throw Error(G(300));return t}function n_(){var t=fu!==0;return fu=0,t}function xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ct.memoizedState=kt=t:kt=kt.next=t,kt}function ei(){if(St===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=kt===null?ct.memoizedState:kt.next;if(e!==null)kt=e,St=t;else{if(t===null)throw Error(G(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},kt===null?ct.memoizedState=kt=t:kt=kt.next=t}return kt}function pu(t,e){return typeof e=="function"?e(t):e}function op(t){var e=ei(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=St,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((qs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,ct.lanes|=h,Zs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ei(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,ct.lanes|=s,Zs|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ap(t){var e=ei(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ei(s,e.memoizedState)||(wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function F1(){}function j1(t,e){var n=ct,i=ei(),r=e(),s=!Ei(i.memoizedState,r);if(s&&(i.memoizedState=r,wn=!0),i=i.queue,i_(B1.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,gu(9,z1.bind(null,n,i,r,e),void 0,null),Dt===null)throw Error(G(349));qs&30||U1(n,e,r)}return r}function U1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z1(t,e,n,i){e.value=n,e.getSnapshot=i,V1(e)&&W1(t)}function B1(t,e,n){return n(function(){V1(e)&&W1(t)})}function V1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ei(t,n)}catch{return!0}}function W1(t){var e=dr(t,1);e!==null&&yi(e,t,1,-1)}function f0(t){var e=xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:t},e.queue=t,t=t.dispatch=Rk.bind(null,ct,t),[e.memoizedState,t]}function gu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function G1(){return ei().memoizedState}function hh(t,e,n,i){var r=xi();ct.flags|=t,r.memoizedState=gu(1|e,n,void 0,i===void 0?null:i)}function jd(t,e,n,i){var r=ei();i=i===void 0?null:i;var s=void 0;if(St!==null){var o=St.memoizedState;if(s=o.destroy,i!==null&&e_(i,o.deps)){r.memoizedState=gu(e,n,s,i);return}}ct.flags|=t,r.memoizedState=gu(1|e,n,s,i)}function p0(t,e){return hh(8390656,8,t,e)}function i_(t,e){return jd(2048,8,t,e)}function H1(t,e){return jd(4,2,t,e)}function $1(t,e){return jd(4,4,t,e)}function K1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y1(t,e,n){return n=n!=null?n.concat([t]):null,jd(4,4,K1.bind(null,e,t),n)}function r_(){}function X1(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&e_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function q1(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&e_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Z1(t,e,n){return qs&21?(Ei(n,e)||(n=n1(),ct.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function Ik(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var i=sp.transition;sp.transition={};try{t(!1),e()}finally{We=n,sp.transition=i}}function Q1(){return ei().memoizedState}function Sk(t,e,n){var i=is(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},J1(t))eT(e,n);else if(n=D1(t,e,n,i),n!==null){var r=ln();yi(n,t,i,r),tT(n,e,i)}}function Rk(t,e,n){var i=is(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(J1(t))eT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ei(a,o)){var l=e.interleaved;l===null?(r.next=r,Xm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=D1(t,e,r,i),n!==null&&(r=ln(),yi(n,t,i,r),tT(n,e,i))}}function J1(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function eT(t,e){zl=Bh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Mm(t,n)}}var Vh={readContext:Jn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},xk={readContext:Jn,useCallback:function(t,e){return xi().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:p0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hh(4194308,4,K1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return hh(4,2,t,e)},useMemo:function(t,e){var n=xi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Sk.bind(null,ct,t),[i.memoizedState,t]},useRef:function(t){var e=xi();return t={current:t},e.memoizedState=t},useState:f0,useDebugValue:r_,useDeferredValue:function(t){return xi().memoizedState=t},useTransition:function(){var t=f0(!1),e=t[0];return t=Ik.bind(null,t[1]),xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ct,r=xi();if(ot){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Dt===null)throw Error(G(349));qs&30||U1(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,p0(B1.bind(null,i,s,t),[t]),i.flags|=2048,gu(9,z1.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=xi(),e=Dt.identifierPrefix;if(ot){var n=er,i=Ji;n=(i&~(1<<32-_i(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Tk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pk={readContext:Jn,useCallback:X1,useContext:Jn,useEffect:i_,useImperativeHandle:Y1,useInsertionEffect:H1,useLayoutEffect:$1,useMemo:q1,useReducer:op,useRef:G1,useState:function(){return op(pu)},useDebugValue:r_,useDeferredValue:function(t){var e=ei();return Z1(e,St.memoizedState,t)},useTransition:function(){var t=op(pu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:j1,useId:Q1,unstable_isNewReconciler:!1},kk={readContext:Jn,useCallback:X1,useContext:Jn,useEffect:i_,useImperativeHandle:Y1,useInsertionEffect:H1,useLayoutEffect:$1,useMemo:q1,useReducer:ap,useRef:G1,useState:function(){return ap(pu)},useDebugValue:r_,useDeferredValue:function(t){var e=ei();return St===null?e.memoizedState=t:Z1(e,St.memoizedState,t)},useTransition:function(){var t=ap(pu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:j1,useId:Q1,unstable_isNewReconciler:!1};function ui(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ud={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ln(),r=is(t),s=or(i,r);s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,r),e!==null&&(yi(e,t,r,i),uh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ln(),r=is(t),s=or(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,r),e!==null&&(yi(e,t,r,i),uh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),i=is(t),r=or(n,i);r.tag=2,e!=null&&(r.callback=e),e=ts(t,r,i),e!==null&&(yi(e,t,i,n),uh(e,t,i))}};function g0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!au(n,i)||!au(r,s):!0}function nT(t,e,n){var i=!1,r=us,s=e.contextType;return typeof s=="object"&&s!==null?s=Jn(s):(r=Sn(e)?Ys:Jt.current,i=e.contextTypes,s=(i=i!=null)?va(t,r):us),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ud,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function m0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ud.enqueueReplaceState(e,e.state,null)}function Cg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},qm(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Jn(s):(s=Sn(e)?Ys:Jt.current,r.context=va(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ud.enqueueReplaceState(r,r.state,null),Uh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ta(t,e){try{var n="",i=e;do n+=iP(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function lp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ak=typeof WeakMap=="function"?WeakMap:Map;function iT(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gh||(Gh=!0,Og=i),Tg(t,e)},n}function rT(t,e,n){n=or(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Tg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tg(t,e),typeof i!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Ak;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Gk.bind(null,t,e,n),e.then(t,t))}function y0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var Nk=yr.ReactCurrentOwner,wn=!1;function sn(t,e,n,i){e.child=t===null?O1(e,null,n,i):wa(e,t.child,n,i)}function E0(t,e,n,i,r){n=n.render;var s=e.ref;return sa(e,r),i=t_(t,e,n,i,s,r),n=n_(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fr(t,e,r)):(ot&&n&&Wm(e),e.flags|=1,sn(t,e,i,r),e.child)}function w0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!d_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,sT(t,e,s,i,r)):(t=gh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(o,i)&&t.ref===e.ref)return fr(t,e,r)}return e.flags|=1,t=rs(s,i),t.ref=e.ref,t.return=e,e.child=t}function sT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(au(s,i)&&t.ref===e.ref)if(wn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,fr(t,e,r)}return Ig(t,e,n,i,r)}function oT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(qo,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(qo,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,qe(qo,On),On|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,qe(qo,On),On|=i;return sn(t,e,r,n),e.child}function aT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ig(t,e,n,i,r){var s=Sn(n)?Ys:Jt.current;return s=va(e,s),sa(e,r),n=t_(t,e,n,i,s,r),i=n_(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fr(t,e,r)):(ot&&i&&Wm(e),e.flags|=1,sn(t,e,n,r),e.child)}function C0(t,e,n,i,r){if(Sn(n)){var s=!0;Dh(e)}else s=!1;if(sa(e,r),e.stateNode===null)dh(t,e),nT(e,n,i),Cg(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jn(c):(c=Sn(n)?Ys:Jt.current,c=va(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&m0(e,o,i,c),Ur=!1;var f=e.memoizedState;o.state=f,Uh(e,i,o,r),l=e.memoizedState,a!==i||f!==l||In.current||Ur?(typeof h=="function"&&(wg(e,n,h,i),l=e.memoizedState),(a=Ur||g0(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,M1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ui(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jn(l):(l=Sn(n)?Ys:Jt.current,l=va(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&m0(e,o,i,l),Ur=!1,f=e.memoizedState,o.state=f,Uh(e,i,o,r);var y=e.memoizedState;a!==d||f!==y||In.current||Ur?(typeof _=="function"&&(wg(e,n,_,i),y=e.memoizedState),(c=Ur||g0(e,n,c,i,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Sg(t,e,n,i,s,r)}function Sg(t,e,n,i,r,s){aT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&a0(e,n,!1),fr(t,e,s);i=e.stateNode,Nk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=wa(e,t.child,null,s),e.child=wa(e,null,a,s)):sn(t,e,a,s),e.memoizedState=i.state,r&&a0(e,n,!0),e.child}function lT(t){var e=t.stateNode;e.pendingContext?o0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o0(t,e.context,!1),Zm(t,e.containerInfo)}function T0(t,e,n,i,r){return Ea(),Hm(r),e.flags|=256,sn(t,e,n,i),e.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function xg(t){return{baseLanes:t,cachePool:null,transitions:null}}function uT(t,e,n){var i=e.pendingProps,r=ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),qe(ut,r&1),t===null)return vg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vd(o,i,0,null),t=$s(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xg(n),e.memoizedState=Rg,t):s_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Lk(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=rs(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=rs(a,s):(s=$s(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?xg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rg,i}return s=t.child,t=s.sibling,i=rs(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function s_(t,e){return e=Vd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,n,i){return i!==null&&Hm(i),wa(e,t.child,null,n),t=s_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lk(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=lp(Error(G(422))),jc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Vd({mode:"visible",children:i.children},r,0,null),s=$s(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&wa(e,t.child,null,o),e.child.memoizedState=xg(o),e.memoizedState=Rg,s);if(!(e.mode&1))return jc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(G(419)),i=lp(s,i,void 0),jc(t,e,o,i)}if(a=(o&t.childLanes)!==0,wn||a){if(i=Dt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,dr(t,r),yi(i,t,r,-1))}return h_(),i=lp(Error(G(421))),jc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Hk.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,bn=es(r.nextSibling),jn=e,ot=!0,di=null,t!==null&&(Kn[Yn++]=Ji,Kn[Yn++]=er,Kn[Yn++]=Xs,Ji=t.id,er=t.overflow,Xs=e),e=s_(e,i.children),e.flags|=4096,e)}function I0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Eg(t.return,e,n)}function up(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function cT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(sn(t,e,i.children,n),i=ut.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I0(t,n,e);else if(t.tag===19)I0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(qe(ut,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),up(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}up(e,!0,n,null,s);break;case"together":up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ok(t,e,n){switch(e.tag){case 3:lT(e),Ea();break;case 5:b1(e);break;case 1:Sn(e.type)&&Dh(e);break;case 4:Zm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;qe(Fh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qe(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?uT(t,e,n):(qe(ut,ut.current&1),t=fr(t,e,n),t!==null?t.sibling:null);qe(ut,ut.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return cT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qe(ut,ut.current),i)break;return null;case 22:case 23:return e.lanes=0,oT(t,e,n)}return fr(t,e,n)}var hT,Pg,dT,fT;hT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pg=function(){};dT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,zs(Di.current);var s=null;switch(n){case"input":r=qp(t,r),i=qp(t,i),s=[];break;case"select":r=ht({},r,{value:void 0}),i=ht({},i,{value:void 0}),s=[];break;case"textarea":r=Jp(t,r),i=Jp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Lh)}tg(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(eu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&et("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fT=function(t,e,n,i){n!==i&&(e.flags|=4)};function ul(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Dk(t,e,n){var i=e.pendingProps;switch(Gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return Sn(e.type)&&Oh(),$t(e),null;case 3:return i=e.stateNode,Ca(),nt(In),nt(Jt),Jm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,di!==null&&(bg(di),di=null))),Pg(t,e),$t(e),null;case 5:Qm(e);var r=zs(du.current);if(n=e.type,t!==null&&e.stateNode!=null)dT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(G(166));return $t(e),null}if(t=zs(Di.current),bc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Pi]=e,i[cu]=s,t=(e.mode&1)!==0,n){case"dialog":et("cancel",i),et("close",i);break;case"iframe":case"object":case"embed":et("load",i);break;case"video":case"audio":for(r=0;r<xl.length;r++)et(xl[r],i);break;case"source":et("error",i);break;case"img":case"image":case"link":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"input":Ov(i,s),et("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},et("invalid",i);break;case"textarea":Mv(i,s),et("invalid",i)}tg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mc(i.textContent,a,t),r=["children",""+a]):eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&et("scroll",i)}switch(n){case"input":xc(i),Dv(i,s,!0);break;case"textarea":xc(i),bv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Lh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Pi]=e,t[cu]=i,hT(t,e,!1,!1),e.stateNode=t;e:{switch(o=ng(n,i),n){case"dialog":et("cancel",t),et("close",t),r=i;break;case"iframe":case"object":case"embed":et("load",t),r=i;break;case"video":case"audio":for(r=0;r<xl.length;r++)et(xl[r],t);r=i;break;case"source":et("error",t),r=i;break;case"img":case"image":case"link":et("error",t),et("load",t),r=i;break;case"details":et("toggle",t),r=i;break;case"input":Ov(t,i),r=qp(t,i),et("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ht({},i,{value:void 0}),et("invalid",t);break;case"textarea":Mv(t,i),r=Jp(t,i),et("invalid",t);break;default:r=i}tg(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?GC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tu(t,l):typeof l=="number"&&tu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&et("scroll",t):l!=null&&km(t,s,l,o))}switch(n){case"input":xc(t),Dv(t,i,!1);break;case"textarea":xc(t),bv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ls(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ta(t,!!i.multiple,s,!1):i.defaultValue!=null&&ta(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)fT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(G(166));if(n=zs(du.current),zs(Di.current),bc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pi]=e,(s=i.nodeValue!==n)&&(t=jn,t!==null))switch(t.tag){case 3:Mc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pi]=e,e.stateNode=i}return $t(e),null;case 13:if(nt(ut),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&bn!==null&&e.mode&1&&!(e.flags&128))N1(),Ea(),e.flags|=98560,s=!1;else if(s=bc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[Pi]=e}else Ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),s=!1}else di!==null&&(bg(di),di=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?xt===0&&(xt=3):h_())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Ca(),Pg(t,e),t===null&&lu(e.stateNode.containerInfo),$t(e),null;case 10:return Ym(e.type._context),$t(e),null;case 17:return Sn(e.type)&&Oh(),$t(e),null;case 19:if(nt(ut),s=e.memoizedState,s===null)return $t(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ul(s,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zh(t),o!==null){for(e.flags|=128,ul(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&vt()>Ia&&(e.flags|=128,i=!0,ul(s,!1),e.lanes=4194304)}else{if(!i)if(t=zh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return $t(e),null}else 2*vt()-s.renderingStartTime>Ia&&n!==1073741824&&(e.flags|=128,i=!0,ul(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,n=ut.current,qe(ut,i?n&1|2:n&1),e):($t(e),null);case 22:case 23:return c_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?On&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function Mk(t,e){switch(Gm(e),e.tag){case 1:return Sn(e.type)&&Oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ca(),nt(In),nt(Jt),Jm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qm(e),null;case 13:if(nt(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ut),null;case 4:return Ca(),null;case 10:return Ym(e.type._context),null;case 22:case 23:return c_(),null;case 24:return null;default:return null}}var Uc=!1,Xt=!1,bk=typeof WeakSet=="function"?WeakSet:Set,X=null;function Xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){gt(t,e,i)}else n.current=null}function kg(t,e,n){try{n()}catch(i){gt(t,e,i)}}var S0=!1;function Fk(t,e){if(dg=kh,t=y1(),Vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var _;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)f=d,d=_;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++h===i&&(l=o),(_=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fg={focusedElem:t,selectionRange:n},kh=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var T=y.memoizedProps,P=y.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?T:ui(e.type,T),P);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){gt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=S0,S0=!1,y}function Bl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&kg(e,n,s)}r=r.next}while(r!==i)}}function zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ag(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pT(t){var e=t.alternate;e!==null&&(t.alternate=null,pT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pi],delete e[cu],delete e[mg],delete e[vk],delete e[Ek])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gT(t){return t.tag===5||t.tag===3||t.tag===4}function R0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ng(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(i!==4&&(t=t.child,t!==null))for(Ng(t,e,n),t=t.sibling;t!==null;)Ng(t,e,n),t=t.sibling}function Lg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}var Ft=null,ci=!1;function Nr(t,e,n){for(n=n.child;n!==null;)mT(t,e,n),n=n.sibling}function mT(t,e,n){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:Xt||Xo(n,e);case 6:var i=Ft,r=ci;Ft=null,Nr(t,e,n),Ft=i,ci=r,Ft!==null&&(ci?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(ci?(t=Ft,n=n.stateNode,t.nodeType===8?np(t.parentNode,n):t.nodeType===1&&np(t,n),su(t)):np(Ft,n.stateNode));break;case 4:i=Ft,r=ci,Ft=n.stateNode.containerInfo,ci=!0,Nr(t,e,n),Ft=i,ci=r;break;case 0:case 11:case 14:case 15:if(!Xt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kg(n,e,o),r=r.next}while(r!==i)}Nr(t,e,n);break;case 1:if(!Xt&&(Xo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){gt(n,e,a)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(Xt=(i=Xt)||n.memoizedState!==null,Nr(t,e,n),Xt=i):Nr(t,e,n);break;default:Nr(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bk),e.forEach(function(i){var r=$k.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ai(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,ci=!1;break e;case 3:Ft=a.stateNode.containerInfo,ci=!0;break e;case 4:Ft=a.stateNode.containerInfo,ci=!0;break e}a=a.return}if(Ft===null)throw Error(G(160));mT(s,o,r),Ft=null,ci=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){gt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_T(e,t),e=e.sibling}function _T(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ai(e,t),Ri(t),i&4){try{Bl(3,t,t.return),zd(3,t)}catch(T){gt(t,t.return,T)}try{Bl(5,t,t.return)}catch(T){gt(t,t.return,T)}}break;case 1:ai(e,t),Ri(t),i&512&&n!==null&&Xo(n,n.return);break;case 5:if(ai(e,t),Ri(t),i&512&&n!==null&&Xo(n,n.return),t.flags&32){var r=t.stateNode;try{tu(r,"")}catch(T){gt(t,t.return,T)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&UC(r,s),ng(a,o);var c=ng(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?GC(r,d):h==="dangerouslySetInnerHTML"?VC(r,d):h==="children"?tu(r,d):km(r,h,d,c)}switch(a){case"input":Zp(r,s);break;case"textarea":zC(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?ta(r,!!s.multiple,_,!1):f!==!!s.multiple&&(s.defaultValue!=null?ta(r,!!s.multiple,s.defaultValue,!0):ta(r,!!s.multiple,s.multiple?[]:"",!1))}r[cu]=s}catch(T){gt(t,t.return,T)}}break;case 6:if(ai(e,t),Ri(t),i&4){if(t.stateNode===null)throw Error(G(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(T){gt(t,t.return,T)}}break;case 3:if(ai(e,t),Ri(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{su(e.containerInfo)}catch(T){gt(t,t.return,T)}break;case 4:ai(e,t),Ri(t);break;case 13:ai(e,t),Ri(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(l_=vt())),i&4&&x0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Xt=(c=Xt)||h,ai(e,t),Xt=c):ai(e,t),Ri(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(d=X=h;X!==null;){switch(f=X,_=f.child,f.tag){case 0:case 11:case 14:case 15:Bl(4,f,f.return);break;case 1:Xo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(T){gt(i,n,T)}}break;case 5:Xo(f,f.return);break;case 22:if(f.memoizedState!==null){k0(d);continue}}_!==null?(_.return=f,X=_):k0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WC("display",o))}catch(T){gt(t,t.return,T)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(T){gt(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ai(e,t),Ri(t),i&4&&x0(t);break;case 21:break;default:ai(e,t),Ri(t)}}function Ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gT(n)){var i=n;break e}n=n.return}throw Error(G(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(tu(r,""),i.flags&=-33);var s=R0(t);Lg(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=R0(t);Ng(t,a,o);break;default:throw Error(G(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jk(t,e,n){X=t,yT(t)}function yT(t,e,n){for(var i=(t.mode&1)!==0;X!==null;){var r=X,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Uc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Xt;a=Uc;var c=Xt;if(Uc=o,(Xt=l)&&!c)for(X=r;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?A0(r):l!==null?(l.return=o,X=l):A0(r);for(;s!==null;)X=s,yT(s),s=s.sibling;X=r,Uc=a,Xt=c}P0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,X=s):P0(t)}}function P0(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||zd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Xt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ui(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&d0(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&su(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Xt||e.flags&512&&Ag(e)}catch(f){gt(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function k0(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function A0(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zd(4,e)}catch(l){gt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gt(e,r,l)}}var s=e.return;try{Ag(e)}catch(l){gt(e,s,l)}break;case 5:var o=e.return;try{Ag(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var Uk=Math.ceil,Wh=yr.ReactCurrentDispatcher,o_=yr.ReactCurrentOwner,Qn=yr.ReactCurrentBatchConfig,ke=0,Dt=null,Tt=null,zt=0,On=0,qo=gs(0),xt=0,mu=null,Zs=0,Bd=0,a_=0,Vl=null,_n=null,l_=0,Ia=1/0,qi=null,Gh=!1,Og=null,ns=null,zc=!1,Yr=null,Hh=0,Wl=0,Dg=null,fh=-1,ph=0;function ln(){return ke&6?vt():fh!==-1?fh:fh=vt()}function is(t){return t.mode&1?ke&2&&zt!==0?zt&-zt:Ck.transition!==null?(ph===0&&(ph=n1()),ph):(t=We,t!==0||(t=window.event,t=t===void 0?16:u1(t.type)),t):1}function yi(t,e,n,i){if(50<Wl)throw Wl=0,Dg=null,Error(G(185));zu(t,n,i),(!(ke&2)||t!==Dt)&&(t===Dt&&(!(ke&2)&&(Bd|=n),xt===4&&Vr(t,zt)),Rn(t,i),n===1&&ke===0&&!(e.mode&1)&&(Ia=vt()+500,Fd&&ms()))}function Rn(t,e){var n=t.callbackNode;CP(t,e);var i=Ph(t,t===Dt?zt:0);if(i===0)n!==null&&Uv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Uv(n),e===1)t.tag===0?wk(N0.bind(null,t)):P1(N0.bind(null,t)),_k(function(){!(ke&6)&&ms()}),n=null;else{switch(i1(i)){case 1:n=Dm;break;case 4:n=e1;break;case 16:n=xh;break;case 536870912:n=t1;break;default:n=xh}n=RT(n,vT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vT(t,e){if(fh=-1,ph=0,ke&6)throw Error(G(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var i=Ph(t,t===Dt?zt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=$h(t,i);else{e=i;var r=ke;ke|=2;var s=wT();(Dt!==t||zt!==e)&&(qi=null,Ia=vt()+500,Hs(t,e));do try{Vk();break}catch(a){ET(t,a)}while(!0);Km(),Wh.current=s,ke=r,Tt!==null?e=0:(Dt=null,zt=0,e=xt)}if(e!==0){if(e===2&&(r=ag(t),r!==0&&(i=r,e=Mg(t,r))),e===1)throw n=mu,Hs(t,0),Vr(t,i),Rn(t,vt()),n;if(e===6)Vr(t,i);else{if(r=t.current.alternate,!(i&30)&&!zk(r)&&(e=$h(t,i),e===2&&(s=ag(t),s!==0&&(i=s,e=Mg(t,s))),e===1))throw n=mu,Hs(t,0),Vr(t,i),Rn(t,vt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(G(345));case 2:Os(t,_n,qi);break;case 3:if(Vr(t,i),(i&130023424)===i&&(e=l_+500-vt(),10<e)){if(Ph(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ln(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=gg(Os.bind(null,t,_n,qi),e);break}Os(t,_n,qi);break;case 4:if(Vr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-_i(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=vt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Uk(i/1960))-i,10<i){t.timeoutHandle=gg(Os.bind(null,t,_n,qi),i);break}Os(t,_n,qi);break;case 5:Os(t,_n,qi);break;default:throw Error(G(329))}}}return Rn(t,vt()),t.callbackNode===n?vT.bind(null,t):null}function Mg(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=$h(t,e),t!==2&&(e=_n,_n=n,e!==null&&bg(e)),t}function bg(t){_n===null?_n=t:_n.push.apply(_n,t)}function zk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ei(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~a_,e&=~Bd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_i(e),i=1<<n;t[n]=-1,e&=~i}}function N0(t){if(ke&6)throw Error(G(327));oa();var e=Ph(t,0);if(!(e&1))return Rn(t,vt()),null;var n=$h(t,e);if(t.tag!==0&&n===2){var i=ag(t);i!==0&&(e=i,n=Mg(t,i))}if(n===1)throw n=mu,Hs(t,0),Vr(t,e),Rn(t,vt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Os(t,_n,qi),Rn(t,vt()),null}function u_(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ia=vt()+500,Fd&&ms())}}function Qs(t){Yr!==null&&Yr.tag===0&&!(ke&6)&&oa();var e=ke;ke|=1;var n=Qn.transition,i=We;try{if(Qn.transition=null,We=1,t)return t()}finally{We=i,Qn.transition=n,ke=e,!(ke&6)&&ms()}}function c_(){On=qo.current,nt(qo)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mk(n)),Tt!==null)for(n=Tt.return;n!==null;){var i=n;switch(Gm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Oh();break;case 3:Ca(),nt(In),nt(Jt),Jm();break;case 5:Qm(i);break;case 4:Ca();break;case 13:nt(ut);break;case 19:nt(ut);break;case 10:Ym(i.type._context);break;case 22:case 23:c_()}n=n.return}if(Dt=t,Tt=t=rs(t.current,null),zt=On=e,xt=0,mu=null,a_=Bd=Zs=0,_n=Vl=null,Us!==null){for(e=0;e<Us.length;e++)if(n=Us[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Us=null}return t}function ET(t,e){do{var n=Tt;try{if(Km(),ch.current=Vh,Bh){for(var i=ct.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Bh=!1}if(qs=0,kt=St=ct=null,zl=!1,fu=0,o_.current=null,n===null||n.return===null){xt=1,mu=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=y0(o);if(_!==null){_.flags&=-257,v0(_,o,a,s,e),_.mode&1&&_0(s,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var T=new Set;T.add(l),e.updateQueue=T}else y.add(l);break e}else{if(!(e&1)){_0(s,c,e),h_();break e}l=Error(G(426))}}else if(ot&&a.mode&1){var P=y0(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),v0(P,o,a,s,e),Hm(Ta(l,a));break e}}s=l=Ta(l,a),xt!==4&&(xt=2),Vl===null?Vl=[s]:Vl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=iT(s,l,e);h0(s,C);break e;case 1:a=l;var E=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ns===null||!ns.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=rT(s,a,e);h0(s,N);break e}}s=s.return}while(s!==null)}TT(n)}catch(M){e=M,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function wT(){var t=Wh.current;return Wh.current=Vh,t===null?Vh:t}function h_(){(xt===0||xt===3||xt===2)&&(xt=4),Dt===null||!(Zs&268435455)&&!(Bd&268435455)||Vr(Dt,zt)}function $h(t,e){var n=ke;ke|=2;var i=wT();(Dt!==t||zt!==e)&&(qi=null,Hs(t,e));do try{Bk();break}catch(r){ET(t,r)}while(!0);if(Km(),ke=n,Wh.current=i,Tt!==null)throw Error(G(261));return Dt=null,zt=0,xt}function Bk(){for(;Tt!==null;)CT(Tt)}function Vk(){for(;Tt!==null&&!fP();)CT(Tt)}function CT(t){var e=ST(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?TT(t):Tt=e,o_.current=null}function TT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mk(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,Tt=null;return}}else if(n=Dk(n,e,On),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);xt===0&&(xt=5)}function Os(t,e,n){var i=We,r=Qn.transition;try{Qn.transition=null,We=1,Wk(t,e,n,i)}finally{Qn.transition=r,We=i}return null}function Wk(t,e,n,i){do oa();while(Yr!==null);if(ke&6)throw Error(G(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TP(t,s),t===Dt&&(Tt=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zc||(zc=!0,RT(xh,function(){return oa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=We;We=1;var a=ke;ke|=4,o_.current=null,Fk(t,n),_T(n,t),uk(fg),kh=!!dg,fg=dg=null,t.current=n,jk(n),pP(),ke=a,We=o,Qn.transition=s}else t.current=n;if(zc&&(zc=!1,Yr=t,Hh=r),s=t.pendingLanes,s===0&&(ns=null),_P(n.stateNode),Rn(t,vt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Gh)throw Gh=!1,t=Og,Og=null,t;return Hh&1&&t.tag!==0&&oa(),s=t.pendingLanes,s&1?t===Dg?Wl++:(Wl=0,Dg=t):Wl=0,ms(),null}function oa(){if(Yr!==null){var t=i1(Hh),e=Qn.transition,n=We;try{if(Qn.transition=null,We=16>t?16:t,Yr===null)var i=!1;else{if(t=Yr,Yr=null,Hh=0,ke&6)throw Error(G(331));var r=ke;for(ke|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Bl(8,h,s)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var f=h.sibling,_=h.return;if(pT(h),h===c){X=null;break}if(f!==null){f.return=_,X=f;break}X=_}}}var y=s.alternate;if(y!==null){var T=y.child;if(T!==null){y.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bl(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,X=C;break e}X=s.return}}var E=t.current;for(X=E;X!==null;){o=X;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,X=R;else e:for(o=E;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zd(9,a)}}catch(M){gt(a,a.return,M)}if(a===o){X=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,X=N;break e}X=a.return}}if(ke=r,ms(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(Ld,t)}catch{}i=!0}return i}finally{We=n,Qn.transition=e}}return!1}function L0(t,e,n){e=Ta(n,e),e=iT(t,e,1),t=ts(t,e,1),e=ln(),t!==null&&(zu(t,1,e),Rn(t,e))}function gt(t,e,n){if(t.tag===3)L0(t,t,n);else for(;e!==null;){if(e.tag===3){L0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ns===null||!ns.has(i))){t=Ta(n,t),t=rT(e,t,1),e=ts(e,t,1),t=ln(),e!==null&&(zu(e,1,t),Rn(e,t));break}}e=e.return}}function Gk(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(xt===4||xt===3&&(zt&130023424)===zt&&500>vt()-l_?Hs(t,0):a_|=n),Rn(t,e)}function IT(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var n=ln();t=dr(t,e),t!==null&&(zu(t,e,n),Rn(t,n))}function Hk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IT(t,n)}function $k(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(G(314))}i!==null&&i.delete(e),IT(t,n)}var ST;ST=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||In.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,Ok(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ot&&e.flags&1048576&&k1(e,bh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;dh(t,e),t=e.pendingProps;var r=va(e,Jt.current);sa(e,n),r=t_(null,e,i,t,r,n);var s=n_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(i)?(s=!0,Dh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,qm(e),r.updater=Ud,e.stateNode=r,r._reactInternals=e,Cg(e,i,t,n),e=Sg(null,e,i,!0,s,n)):(e.tag=0,ot&&s&&Wm(e),sn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(dh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Yk(i),t=ui(i,t),r){case 0:e=Ig(null,e,i,t,n);break e;case 1:e=C0(null,e,i,t,n);break e;case 11:e=E0(null,e,i,t,n);break e;case 14:e=w0(null,e,i,ui(i.type,t),n);break e}throw Error(G(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),Ig(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),C0(t,e,i,r,n);case 3:e:{if(lT(e),t===null)throw Error(G(387));i=e.pendingProps,s=e.memoizedState,r=s.element,M1(t,e),Uh(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ta(Error(G(423)),e),e=T0(t,e,i,n,r);break e}else if(i!==r){r=Ta(Error(G(424)),e),e=T0(t,e,i,n,r);break e}else for(bn=es(e.stateNode.containerInfo.firstChild),jn=e,ot=!0,di=null,n=O1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),i===r){e=fr(t,e,n);break e}sn(t,e,i,n)}e=e.child}return e;case 5:return b1(e),t===null&&vg(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,pg(i,r)?o=null:s!==null&&pg(i,s)&&(e.flags|=32),aT(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&vg(e),null;case 13:return uT(t,e,n);case 4:return Zm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=wa(e,null,i,n):sn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),E0(t,e,i,r,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,qe(Fh,i._currentValue),i._currentValue=o,s!==null)if(Ei(s.value,o)){if(s.children===r.children&&!In.current){e=fr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=or(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Eg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Eg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sa(e,n),r=Jn(r),i=i(r),e.flags|=1,sn(t,e,i,n),e.child;case 14:return i=e.type,r=ui(i,e.pendingProps),r=ui(i.type,r),w0(t,e,i,r,n);case 15:return sT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),dh(t,e),e.tag=1,Sn(i)?(t=!0,Dh(e)):t=!1,sa(e,n),nT(e,i,r),Cg(e,i,r,n),Sg(null,e,i,!0,t,n);case 19:return cT(t,e,n);case 22:return oT(t,e,n)}throw Error(G(156,e.tag))};function RT(t,e){return JC(t,e)}function Kk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,i){return new Kk(t,e,n,i)}function d_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yk(t){if(typeof t=="function")return d_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nm)return 11;if(t===Lm)return 14}return 2}function rs(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gh(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")d_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zo:return $s(n.children,r,s,e);case Am:o=8,r|=8;break;case $p:return t=qn(12,n,e,r|2),t.elementType=$p,t.lanes=s,t;case Kp:return t=qn(13,n,e,r),t.elementType=Kp,t.lanes=s,t;case Yp:return t=qn(19,n,e,r),t.elementType=Yp,t.lanes=s,t;case bC:return Vd(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case DC:o=10;break e;case MC:o=9;break e;case Nm:o=11;break e;case Lm:o=14;break e;case jr:o=16,i=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=qn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function $s(t,e,n,i){return t=qn(7,t,i,e),t.lanes=n,t}function Vd(t,e,n,i){return t=qn(22,t,i,e),t.elementType=bC,t.lanes=n,t.stateNode={isHidden:!1},t}function cp(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function hp(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xk(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hf(0),this.expirationTimes=Hf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function f_(t,e,n,i,r,s,o,a,l){return t=new Xk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qm(s),t}function qk(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function xT(t){if(!t)return us;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Sn(n))return x1(t,n,e)}return e}function PT(t,e,n,i,r,s,o,a,l){return t=f_(n,i,!0,t,r,s,o,a,l),t.context=xT(null),n=t.current,i=ln(),r=is(n),s=or(i,r),s.callback=e??null,ts(n,s,r),t.current.lanes=r,zu(t,r,i),Rn(t,i),t}function Wd(t,e,n,i){var r=e.current,s=ln(),o=is(r);return n=xT(n),e.context===null?e.context=n:e.pendingContext=n,e=or(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ts(r,e,o),t!==null&&(yi(t,r,o,s),uh(t,r,o)),o}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function p_(t,e){O0(t,e),(t=t.alternate)&&O0(t,e)}function Zk(){return null}var kT=typeof reportError=="function"?reportError:function(t){console.error(t)};function g_(t){this._internalRoot=t}Gd.prototype.render=g_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Wd(t,e,null,null)};Gd.prototype.unmount=g_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){Wd(null,t,null,null)}),e[hr]=null}};function Gd(t){this._internalRoot=t}Gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=o1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Br.length&&e!==0&&e<Br[n].priority;n++);Br.splice(n,0,t),n===0&&l1(t)}};function m_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D0(){}function Qk(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Kh(o);s.call(c)}}var o=PT(e,i,t,0,null,!1,!1,"",D0);return t._reactRootContainer=o,t[hr]=o.current,lu(t.nodeType===8?t.parentNode:t),Qs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Kh(l);a.call(c)}}var l=f_(t,0,!1,null,null,!1,!1,"",D0);return t._reactRootContainer=l,t[hr]=l.current,lu(t.nodeType===8?t.parentNode:t),Qs(function(){Wd(e,l,n,i)}),l}function $d(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Kh(o);a.call(l)}}Wd(e,o,t,r)}else o=Qk(n,e,t,r,i);return Kh(o)}r1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rl(e.pendingLanes);n!==0&&(Mm(e,n|1),Rn(e,vt()),!(ke&6)&&(Ia=vt()+500,ms()))}break;case 13:Qs(function(){var i=dr(t,1);if(i!==null){var r=ln();yi(i,t,1,r)}}),p_(t,1)}};bm=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=ln();yi(e,t,134217728,n)}p_(t,134217728)}};s1=function(t){if(t.tag===13){var e=is(t),n=dr(t,e);if(n!==null){var i=ln();yi(n,t,e,i)}p_(t,e)}};o1=function(){return We};a1=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};rg=function(t,e,n){switch(e){case"input":if(Zp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=bd(i);if(!r)throw Error(G(90));jC(i),Zp(i,r)}}}break;case"textarea":zC(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};KC=u_;YC=Qs;var Jk={usingClientEntryPoint:!1,Events:[Vu,Go,bd,HC,$C,u_]},cl={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e2={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZC(t),t===null?null:t.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||Zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Ld=Bc.inject(e2),Oi=Bc}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk;zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m_(e))throw Error(G(200));return qk(t,e,null,n)};zn.createRoot=function(t,e){if(!m_(t))throw Error(G(299));var n=!1,i="",r=kT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=f_(t,1,!1,null,null,n,!1,i,r),t[hr]=e.current,lu(t.nodeType===8?t.parentNode:t),new g_(e)};zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=ZC(e),t=t===null?null:t.stateNode,t};zn.flushSync=function(t){return Qs(t)};zn.hydrate=function(t,e,n){if(!Hd(e))throw Error(G(200));return $d(null,t,e,!0,n)};zn.hydrateRoot=function(t,e,n){if(!m_(t))throw Error(G(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=kT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PT(e,null,t,1,n??null,r,!1,s,o),t[hr]=e.current,lu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gd(e)};zn.render=function(t,e,n){if(!Hd(e))throw Error(G(200));return $d(null,t,e,!1,n)};zn.unmountComponentAtNode=function(t){if(!Hd(t))throw Error(G(40));return t._reactRootContainer?(Qs(function(){$d(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};zn.unstable_batchedUpdates=u_;zn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Hd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return $d(t,e,n,!1,i)};zn.version="18.3.1-next-f1338f8080-20240426";function AT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AT)}catch(t){console.error(t)}}AT(),AC.exports=zn;var __=AC.exports;const t2=_C(__),n2=mC({__proto__:null,default:t2},[__]);var M0=__;Gp.createRoot=M0.createRoot,Gp.hydrateRoot=M0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},st.apply(this,arguments)}var Ct;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ct||(Ct={}));const b0="popstate";function i2(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return _u("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:eo(r)}return s2(e,n,null,t)}function ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Js(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r2(){return Math.random().toString(36).substr(2,8)}function F0(t,e){return{usr:t.state,key:t.key,idx:e}}function _u(t,e,n,i){return n===void 0&&(n=null),st({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_s(e):e,{state:n,key:e&&e.key||i||r2()})}function eo(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function _s(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function s2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ct.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(st({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ct.Pop;let P=h(),C=P==null?null:P-c;c=P,l&&l({action:a,location:T.location,delta:C})}function f(P,C){a=Ct.Push;let E=_u(T.location,P,C);c=h()+1;let R=F0(E,c),N=T.createHref(E);try{o.pushState(R,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(N)}s&&l&&l({action:a,location:T.location,delta:1})}function _(P,C){a=Ct.Replace;let E=_u(T.location,P,C);c=h();let R=F0(E,c),N=T.createHref(E);o.replaceState(R,"",N),s&&l&&l({action:a,location:T.location,delta:0})}function y(P){let C=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof P=="string"?P:eo(P);return E=E.replace(/ $/,"%20"),ye(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let T={get action(){return a},get location(){return t(r,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(b0,d),l=P,()=>{r.removeEventListener(b0,d),l=null}},createHref(P){return e(r,P)},createURL:y,encodeLocation(P){let C=y(P);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:_,go(P){return o.go(P)}};return T}var ze;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ze||(ze={}));const o2=new Set(["lazy","caseSensitive","path","id","index","children"]);function a2(t){return t.index===!0}function Yh(t,e,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),t.map((r,s)=>{let o=[...n,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(ye(r.index!==!0||!r.children,"Cannot specify children on an index route"),ye(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),a2(r)){let l=st({},r,e(r),{id:a});return i[a]=l,l}else{let l=st({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=Yh(r.children,e,o,i)),l}})}function bs(t,e,n){return n===void 0&&(n="/"),mh(t,e,n,!1)}function mh(t,e,n,i){let r=typeof e=="string"?_s(e):e,s=Da(r.pathname||"/",n);if(s==null)return null;let o=NT(t);u2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=E2(s);a=y2(o[l],c,i)}return a}function l2(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}function NT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ye(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ar([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),NT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:m2(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of LT(s.path))r(s,o,l)}),e}function LT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=LT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function u2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const c2=/^:[\w-]+$/,h2=3,d2=2,f2=1,p2=10,g2=-2,j0=t=>t==="*";function m2(t,e){let n=t.split("/"),i=n.length;return n.some(j0)&&(i+=g2),e&&(i+=d2),n.filter(r=>!j0(r)).reduce((r,s)=>r+(c2.test(s)?h2:s===""?f2:p2),i)}function _2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function y2(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=U0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=U0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:ar([s,d.pathname]),pathnameBase:I2(ar([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=ar([s,d.pathnameBase]))}return o}function U0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=v2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:f,isOptional:_}=h;if(f==="*"){let T=a[d]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const y=a[d];return _&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function v2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Js(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function E2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Js(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const w2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C2=t=>w2.test(t);function T2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?_s(t):t,s;if(n)if(C2(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Js(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=z0(n.substring(1),"/"):s=z0(n,e)}else s=e;return{pathname:s,search:S2(i),hash:R2(r)}}function z0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function dp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kd(t,e){let n=OT(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Yd(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=_s(t):(r=st({},t),ye(!r.pathname||!r.pathname.includes("?"),dp("?","pathname","search",r)),ye(!r.pathname||!r.pathname.includes("#"),dp("#","pathname","hash",r)),ye(!r.search||!r.search.includes("#"),dp("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=T2(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ar=t=>t.join("/").replace(/\/\/+/g,"/"),I2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,R2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Xh{constructor(e,n,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=n||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function yu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DT=["post","put","patch","delete"],x2=new Set(DT),P2=["get",...DT],k2=new Set(P2),A2=new Set([301,302,303,307,308]),N2=new Set([307,308]),fp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},L2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O2=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),MT="remix-router-transitions";function D2(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!n;ye(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let A=t.detectErrorBoundary;r=D=>({hasErrorBoundary:A(D)})}else r=O2;let s={},o=Yh(t.routes,r,void 0,s),a,l=t.basename||"/",c=t.dataStrategy||j2,h=t.patchRoutesOnNavigation,d=st({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,_=new Set,y=null,T=null,P=null,C=t.hydrationData!=null,E=bs(o,t.history.location,l),R=!1,N=null;if(E==null&&!h){let A=mn(404,{pathname:t.history.location.pathname}),{matches:D,route:F}=Z0(o);E=D,N={[F.id]:A}}E&&!t.hydrationData&&xs(E,o,t.history.location.pathname).active&&(E=null);let M;if(E)if(E.some(A=>A.route.lazy))M=!1;else if(!E.some(A=>A.route.loader))M=!0;else if(d.v7_partialHydration){let A=t.hydrationData?t.hydrationData.loaderData:null,D=t.hydrationData?t.hydrationData.errors:null;if(D){let F=E.findIndex(W=>D[W.route.id]!==void 0);M=E.slice(0,F+1).every(W=>!jg(W.route,A,D))}else M=E.every(F=>!jg(F.route,A,D))}else M=t.hydrationData!=null;else if(M=!1,E=[],d.v7_partialHydration){let A=xs(null,o,t.history.location.pathname);A.active&&A.matches&&(R=!0,E=A.matches)}let z,m={historyAction:t.history.action,location:t.history.location,matches:E,initialized:M,navigation:fp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},v=Ct.Pop,I=!1,S,k=!1,L=new Map,x=null,fe=!1,Fe=!1,we=[],$e=new Set,V=new Map,J=0,Q=-1,he=new Map,ie=new Set,le=new Map,_t=new Map,xe=new Set,De=new Map,Te=new Map,Vt;function zi(){if(f=t.history.listen(A=>{let{action:D,location:F,delta:W}=A;if(Vt){Vt(),Vt=void 0;return}Js(Te.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=hc({currentLocation:m.location,nextLocation:F,historyAction:D});if(K&&W!=null){let ee=new Promise(se=>{Vt=se});t.history.go(W*-1),Ss(K,{state:"blocked",location:F,proceed(){Ss(K,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),ee.then(()=>t.history.go(W))},reset(){let se=new Map(m.blockers);se.set(K,hl),dt({blockers:se})}});return}return Nn(D,F)}),n){Q2(e,L);let A=()=>J2(e,L);e.addEventListener("pagehide",A),x=()=>e.removeEventListener("pagehide",A)}return m.initialized||Nn(Ct.Pop,m.location,{initialHydration:!0}),z}function It(){f&&f(),x&&x(),_.clear(),S&&S.abort(),m.fetchers.forEach((A,D)=>yo(D)),m.blockers.forEach((A,D)=>Eo(D))}function Ir(A){return _.add(A),()=>_.delete(A)}function dt(A,D){D===void 0&&(D={}),m=st({},m,A);let F=[],W=[];d.v7_fetcherPersist&&m.fetchers.forEach((K,ee)=>{K.state==="idle"&&(xe.has(ee)?W.push(ee):F.push(ee))}),xe.forEach(K=>{!m.fetchers.has(K)&&!V.has(K)&&W.push(K)}),[..._].forEach(K=>K(m,{deletedFetchers:W,viewTransitionOpts:D.viewTransitionOpts,flushSync:D.flushSync===!0})),d.v7_fetcherPersist?(F.forEach(K=>m.fetchers.delete(K)),W.forEach(K=>yo(K))):W.forEach(K=>xe.delete(K))}function Vn(A,D,F){var W,K;let{flushSync:ee}=F===void 0?{}:F,se=m.actionData!=null&&m.navigation.formMethod!=null&&hi(m.navigation.formMethod)&&m.navigation.state==="loading"&&((W=A.state)==null?void 0:W._isRedirect)!==!0,q;D.actionData?Object.keys(D.actionData).length>0?q=D.actionData:q=null:se?q=m.actionData:q=null;let Z=D.loaderData?X0(m.loaderData,D.loaderData,D.matches||[],D.errors):m.loaderData,Y=m.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((de,wt)=>Y.set(wt,hl)));let te=I===!0||m.navigation.formMethod!=null&&hi(m.navigation.formMethod)&&((K=A.state)==null?void 0:K._isRedirect)!==!0;a&&(o=a,a=void 0),fe||v===Ct.Pop||(v===Ct.Push?t.history.push(A,A.state):v===Ct.Replace&&t.history.replace(A,A.state));let ue;if(v===Ct.Pop){let de=L.get(m.location.pathname);de&&de.has(A.pathname)?ue={currentLocation:m.location,nextLocation:A}:L.has(A.pathname)&&(ue={currentLocation:A,nextLocation:m.location})}else if(k){let de=L.get(m.location.pathname);de?de.add(A.pathname):(de=new Set([A.pathname]),L.set(m.location.pathname,de)),ue={currentLocation:m.location,nextLocation:A}}dt(st({},D,{actionData:q,loaderData:Z,historyAction:v,location:A,initialized:!0,navigation:fp,revalidation:"idle",restoreScrollPosition:wo(A,D.matches||m.matches),preventScrollReset:te,blockers:Y}),{viewTransitionOpts:ue,flushSync:ee===!0}),v=Ct.Pop,I=!1,k=!1,fe=!1,Fe=!1,we=[]}async function An(A,D){if(typeof A=="number"){t.history.go(A);return}let F=Fg(m.location,m.matches,l,d.v7_prependBasename,A,d.v7_relativeSplatPath,D==null?void 0:D.fromRouteId,D==null?void 0:D.relative),{path:W,submission:K,error:ee}=B0(d.v7_normalizeFormMethod,!1,F,D),se=m.location,q=_u(m.location,W,D&&D.state);q=st({},q,t.history.encodeLocation(q));let Z=D&&D.replace!=null?D.replace:void 0,Y=Ct.Push;Z===!0?Y=Ct.Replace:Z===!1||K!=null&&hi(K.formMethod)&&K.formAction===m.location.pathname+m.location.search&&(Y=Ct.Replace);let te=D&&"preventScrollReset"in D?D.preventScrollReset===!0:void 0,ue=(D&&D.flushSync)===!0,de=hc({currentLocation:se,nextLocation:q,historyAction:Y});if(de){Ss(de,{state:"blocked",location:q,proceed(){Ss(de,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),An(A,D)},reset(){let wt=new Map(m.blockers);wt.set(de,hl),dt({blockers:wt})}});return}return await Nn(Y,q,{submission:K,pendingError:ee,preventScrollReset:te,replace:D&&D.replace,enableViewTransition:D&&D.viewTransition,flushSync:ue})}function Sr(){if(it(),dt({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){Nn(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}Nn(v||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation,enableViewTransition:k===!0})}}async function Nn(A,D,F){S&&S.abort(),S=null,v=A,fe=(F&&F.startUninterruptedRevalidation)===!0,dc(m.location,m.matches),I=(F&&F.preventScrollReset)===!0,k=(F&&F.enableViewTransition)===!0;let W=a||o,K=F&&F.overrideNavigation,ee=F!=null&&F.initialHydration&&m.matches&&m.matches.length>0&&!R?m.matches:bs(W,D,l),se=(F&&F.flushSync)===!0;if(ee&&m.initialized&&!Fe&&G2(m.location,D)&&!(F&&F.submission&&hi(F.submission.formMethod))){Vn(D,{matches:ee},{flushSync:se});return}let q=xs(ee,W,D.pathname);if(q.active&&q.matches&&(ee=q.matches),!ee){let{error:je,notFoundMatches:Ce,route:Ke}=Vi(D.pathname);Vn(D,{matches:Ce,loaderData:{},errors:{[Ke.id]:je}},{flushSync:se});return}S=new AbortController;let Z=xo(t.history,D,S.signal,F&&F.submission),Y;if(F&&F.pendingError)Y=[Fs(ee).route.id,{type:ze.error,error:F.pendingError}];else if(F&&F.submission&&hi(F.submission.formMethod)){let je=await Ha(Z,D,F.submission,ee,q.active,{replace:F.replace,flushSync:se});if(je.shortCircuited)return;if(je.pendingActionResult){let[Ce,Ke]=je.pendingActionResult;if(Dn(Ke)&&yu(Ke.error)&&Ke.error.status===404){S=null,Vn(D,{matches:je.matches,loaderData:{},errors:{[Ce]:Ke.error}});return}}ee=je.matches||ee,Y=je.pendingActionResult,K=pp(D,F.submission),se=!1,q.active=!1,Z=xo(t.history,Z.url,Z.signal)}let{shortCircuited:te,matches:ue,loaderData:de,errors:wt}=await _o(Z,D,ee,q.active,K,F&&F.submission,F&&F.fetcherSubmission,F&&F.replace,F&&F.initialHydration===!0,se,Y);te||(S=null,Vn(D,st({matches:ue||ee},q0(Y),{loaderData:de,errors:wt})))}async function Ha(A,D,F,W,K,ee){ee===void 0&&(ee={}),it();let se=q2(D,F);if(dt({navigation:se},{flushSync:ee.flushSync===!0}),K){let Y=await Ii(W,D.pathname,A.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let te=Fs(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[te,{type:ze.error,error:Y.error}]}}else if(Y.matches)W=Y.matches;else{let{notFoundMatches:te,error:ue,route:de}=Vi(D.pathname);return{matches:te,pendingActionResult:[de.id,{type:ze.error,error:ue}]}}}let q,Z=Pl(W,D);if(!Z.route.action&&!Z.route.lazy)q={type:ze.error,error:mn(405,{method:A.method,pathname:D.pathname,routeId:Z.route.id})};else if(q=(await ii("action",m,A,[Z],W,null))[Z.route.id],A.signal.aborted)return{shortCircuited:!0};if(Bs(q)){let Y;return ee&&ee.replace!=null?Y=ee.replace:Y=$0(q.response.headers.get("Location"),new URL(A.url),l)===m.location.pathname+m.location.search,await fn(A,q,!0,{submission:F,replace:Y}),{shortCircuited:!0}}if(Xr(q))throw mn(400,{type:"defer-action"});if(Dn(q)){let Y=Fs(W,Z.route.id);return(ee&&ee.replace)!==!0&&(v=Ct.Push),{matches:W,pendingActionResult:[Y.route.id,q]}}return{matches:W,pendingActionResult:[Z.route.id,q]}}async function _o(A,D,F,W,K,ee,se,q,Z,Y,te){let ue=K||pp(D,ee),de=ee||se||J0(ue),wt=!fe&&(!d.v7_partialHydration||!Z);if(W){if(wt){let Qe=Ts(te);dt(st({navigation:ue},Qe!==void 0?{actionData:Qe}:{}),{flushSync:Y})}let Ie=await Ii(F,D.pathname,A.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){let Qe=Fs(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,loaderData:{},errors:{[Qe]:Ie.error}}}else if(Ie.matches)F=Ie.matches;else{let{error:Qe,notFoundMatches:$i,route:Pr}=Vi(D.pathname);return{matches:$i,loaderData:{},errors:{[Pr.id]:Qe}}}}let je=a||o,[Ce,Ke]=W0(t.history,m,F,de,D,d.v7_partialHydration&&Z===!0,d.v7_skipActionErrorRevalidation,Fe,we,$e,xe,le,ie,je,l,te);if(Rs(Ie=>!(F&&F.some(Qe=>Qe.route.id===Ie))||Ce&&Ce.some(Qe=>Qe.route.id===Ie)),Q=++J,Ce.length===0&&Ke.length===0){let Ie=vo();return Vn(D,st({matches:F,loaderData:{},errors:te&&Dn(te[1])?{[te[0]]:te[1].error}:null},q0(te),Ie?{fetchers:new Map(m.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(wt){let Ie={};if(!W){Ie.navigation=ue;let Qe=Ts(te);Qe!==void 0&&(Ie.actionData=Qe)}Ke.length>0&&(Ie.fetchers=en(Ke)),dt(Ie,{flushSync:Y})}Ke.forEach(Ie=>{ri(Ie.key),Ie.controller&&V.set(Ie.key,Ie.controller)});let Gi=()=>Ke.forEach(Ie=>ri(Ie.key));S&&S.signal.addEventListener("abort",Gi);let{loaderResults:Rr,fetcherResults:si}=await lt(m,F,Ce,Ke,A);if(A.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",Gi),Ke.forEach(Ie=>V.delete(Ie.key));let nn=Vc(Rr);if(nn)return await fn(A,nn.result,!0,{replace:q}),{shortCircuited:!0};if(nn=Vc(si),nn)return ie.add(nn.key),await fn(A,nn.result,!0,{replace:q}),{shortCircuited:!0};let{loaderData:Co,errors:Hi}=Y0(m,F,Rr,te,Ke,si,De);De.forEach((Ie,Qe)=>{Ie.subscribe($i=>{($i||Ie.done)&&De.delete(Qe)})}),d.v7_partialHydration&&Z&&m.errors&&(Hi=st({},m.errors,Hi));let Ln=vo(),Wn=cc(Q),xr=Ln||Wn||Ke.length>0;return st({matches:F,loaderData:Co,errors:Hi},xr?{fetchers:new Map(m.fetchers)}:{})}function Ts(A){if(A&&!Dn(A[1]))return{[A[0]]:A[1].data};if(m.actionData)return Object.keys(m.actionData).length===0?null:m.actionData}function en(A){return A.forEach(D=>{let F=m.fetchers.get(D.key),W=dl(void 0,F?F.data:void 0);m.fetchers.set(D.key,W)}),new Map(m.fetchers)}function dn(A,D,F,W){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ri(A);let K=(W&&W.flushSync)===!0,ee=a||o,se=Fg(m.location,m.matches,l,d.v7_prependBasename,F,d.v7_relativeSplatPath,D,W==null?void 0:W.relative),q=bs(ee,se,l),Z=xs(q,ee,se);if(Z.active&&Z.matches&&(q=Z.matches),!q){Ze(A,D,mn(404,{pathname:se}),{flushSync:K});return}let{path:Y,submission:te,error:ue}=B0(d.v7_normalizeFormMethod,!0,se,W);if(ue){Ze(A,D,ue,{flushSync:K});return}let de=Pl(q,Y),wt=(W&&W.preventScrollReset)===!0;if(te&&hi(te.formMethod)){Bi(A,D,Y,de,q,Z.active,K,wt,te);return}le.set(A,{routeId:D,path:Y}),ni(A,D,Y,de,q,Z.active,K,wt,te)}async function Bi(A,D,F,W,K,ee,se,q,Z){it(),le.delete(A);function Y(rt){if(!rt.route.action&&!rt.route.lazy){let Si=mn(405,{method:Z.formMethod,pathname:F,routeId:D});return Ze(A,D,Si,{flushSync:se}),!0}return!1}if(!ee&&Y(W))return;let te=m.fetchers.get(A);tn(A,Z2(Z,te),{flushSync:se});let ue=new AbortController,de=xo(t.history,F,ue.signal,Z);if(ee){let rt=await Ii(K,new URL(de.url).pathname,de.signal,A);if(rt.type==="aborted")return;if(rt.type==="error"){Ze(A,D,rt.error,{flushSync:se});return}else if(rt.matches){if(K=rt.matches,W=Pl(K,F),Y(W))return}else{Ze(A,D,mn(404,{pathname:F}),{flushSync:se});return}}V.set(A,ue);let wt=J,Ce=(await ii("action",m,de,[W],K,A))[W.route.id];if(de.signal.aborted){V.get(A)===ue&&V.delete(A);return}if(d.v7_fetcherPersist&&xe.has(A)){if(Bs(Ce)||Dn(Ce)){tn(A,Mr(void 0));return}}else{if(Bs(Ce))if(V.delete(A),Q>wt){tn(A,Mr(void 0));return}else return ie.add(A),tn(A,dl(Z)),fn(de,Ce,!1,{fetcherSubmission:Z,preventScrollReset:q});if(Dn(Ce)){Ze(A,D,Ce.error);return}}if(Xr(Ce))throw mn(400,{type:"defer-action"});let Ke=m.navigation.location||m.location,Gi=xo(t.history,Ke,ue.signal),Rr=a||o,si=m.navigation.state!=="idle"?bs(Rr,m.navigation.location,l):m.matches;ye(si,"Didn't find any matches after fetcher action");let nn=++J;he.set(A,nn);let Co=dl(Z,Ce.data);m.fetchers.set(A,Co);let[Hi,Ln]=W0(t.history,m,si,Z,Ke,!1,d.v7_skipActionErrorRevalidation,Fe,we,$e,xe,le,ie,Rr,l,[W.route.id,Ce]);Ln.filter(rt=>rt.key!==A).forEach(rt=>{let Si=rt.key,Xa=m.fetchers.get(Si),pc=dl(void 0,Xa?Xa.data:void 0);m.fetchers.set(Si,pc),ri(Si),rt.controller&&V.set(Si,rt.controller)}),dt({fetchers:new Map(m.fetchers)});let Wn=()=>Ln.forEach(rt=>ri(rt.key));ue.signal.addEventListener("abort",Wn);let{loaderResults:xr,fetcherResults:Ie}=await lt(m,si,Hi,Ln,Gi);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",Wn),he.delete(A),V.delete(A),Ln.forEach(rt=>V.delete(rt.key));let Qe=Vc(xr);if(Qe)return fn(Gi,Qe.result,!1,{preventScrollReset:q});if(Qe=Vc(Ie),Qe)return ie.add(Qe.key),fn(Gi,Qe.result,!1,{preventScrollReset:q});let{loaderData:$i,errors:Pr}=Y0(m,si,xr,void 0,Ln,Ie,De);if(m.fetchers.has(A)){let rt=Mr(Ce.data);m.fetchers.set(A,rt)}cc(nn),m.navigation.state==="loading"&&nn>Q?(ye(v,"Expected pending action"),S&&S.abort(),Vn(m.navigation.location,{matches:si,loaderData:$i,errors:Pr,fetchers:new Map(m.fetchers)})):(dt({errors:Pr,loaderData:X0(m.loaderData,$i,si,Pr),fetchers:new Map(m.fetchers)}),Fe=!1)}async function ni(A,D,F,W,K,ee,se,q,Z){let Y=m.fetchers.get(A);tn(A,dl(Z,Y?Y.data:void 0),{flushSync:se});let te=new AbortController,ue=xo(t.history,F,te.signal);if(ee){let Ce=await Ii(K,new URL(ue.url).pathname,ue.signal,A);if(Ce.type==="aborted")return;if(Ce.type==="error"){Ze(A,D,Ce.error,{flushSync:se});return}else if(Ce.matches)K=Ce.matches,W=Pl(K,F);else{Ze(A,D,mn(404,{pathname:F}),{flushSync:se});return}}V.set(A,te);let de=J,je=(await ii("loader",m,ue,[W],K,A))[W.route.id];if(Xr(je)&&(je=await v_(je,ue.signal,!0)||je),V.get(A)===te&&V.delete(A),!ue.signal.aborted){if(xe.has(A)){tn(A,Mr(void 0));return}if(Bs(je))if(Q>de){tn(A,Mr(void 0));return}else{ie.add(A),await fn(ue,je,!1,{preventScrollReset:q});return}if(Dn(je)){Ze(A,D,je.error);return}ye(!Xr(je),"Unhandled fetcher deferred data"),tn(A,Mr(je.data))}}async function fn(A,D,F,W){let{submission:K,fetcherSubmission:ee,preventScrollReset:se,replace:q}=W===void 0?{}:W;D.response.headers.has("X-Remix-Revalidate")&&(Fe=!0);let Z=D.response.headers.get("Location");ye(Z,"Expected a Location header on the redirect Response"),Z=$0(Z,new URL(A.url),l);let Y=_u(m.location,Z,{_isRedirect:!0});if(n){let Ce=!1;if(D.response.headers.has("X-Remix-Reload-Document"))Ce=!0;else if(y_.test(Z)){const Ke=t.history.createURL(Z);Ce=Ke.origin!==e.location.origin||Da(Ke.pathname,l)==null}if(Ce){q?e.location.replace(Z):e.location.assign(Z);return}}S=null;let te=q===!0||D.response.headers.has("X-Remix-Replace")?Ct.Replace:Ct.Push,{formMethod:ue,formAction:de,formEncType:wt}=m.navigation;!K&&!ee&&ue&&de&&wt&&(K=J0(m.navigation));let je=K||ee;if(N2.has(D.response.status)&&je&&hi(je.formMethod))await Nn(te,Y,{submission:st({},je,{formAction:Z}),preventScrollReset:se||I,enableViewTransition:F?k:void 0});else{let Ce=pp(Y,K);await Nn(te,Y,{overrideNavigation:Ce,fetcherSubmission:ee,preventScrollReset:se||I,enableViewTransition:F?k:void 0})}}async function ii(A,D,F,W,K,ee){let se,q={};try{se=await U2(c,A,D,F,W,K,ee,s,r)}catch(Z){return W.forEach(Y=>{q[Y.route.id]={type:ze.error,error:Z}}),q}for(let[Z,Y]of Object.entries(se))if(H2(Y)){let te=Y.result;q[Z]={type:ze.redirect,response:V2(te,F,Z,K,l,d.v7_relativeSplatPath)}}else q[Z]=await B2(Y);return q}async function lt(A,D,F,W,K){let ee=A.matches,se=ii("loader",A,K,F,D,null),q=Promise.all(W.map(async te=>{if(te.matches&&te.match&&te.controller){let de=(await ii("loader",A,xo(t.history,te.path,te.controller.signal),[te.match],te.matches,te.key))[te.match.route.id];return{[te.key]:de}}else return Promise.resolve({[te.key]:{type:ze.error,error:mn(404,{pathname:te.path})}})})),Z=await se,Y=(await q).reduce((te,ue)=>Object.assign(te,ue),{});return await Promise.all([Y2(D,Z,K.signal,ee,A.loaderData),X2(D,Y,W)]),{loaderResults:Z,fetcherResults:Y}}function it(){Fe=!0,we.push(...Rs()),le.forEach((A,D)=>{V.has(D)&&$e.add(D),ri(D)})}function tn(A,D,F){F===void 0&&(F={}),m.fetchers.set(A,D),dt({fetchers:new Map(m.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Ze(A,D,F,W){W===void 0&&(W={});let K=Fs(m.matches,D);yo(A),dt({errors:{[K.route.id]:F},fetchers:new Map(m.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function $a(A){return _t.set(A,(_t.get(A)||0)+1),xe.has(A)&&xe.delete(A),m.fetchers.get(A)||L2}function yo(A){let D=m.fetchers.get(A);V.has(A)&&!(D&&D.state==="loading"&&he.has(A))&&ri(A),le.delete(A),he.delete(A),ie.delete(A),d.v7_fetcherPersist&&xe.delete(A),$e.delete(A),m.fetchers.delete(A)}function Is(A){let D=(_t.get(A)||0)-1;D<=0?(_t.delete(A),xe.add(A),d.v7_fetcherPersist||yo(A)):_t.set(A,D),dt({fetchers:new Map(m.fetchers)})}function ri(A){let D=V.get(A);D&&(D.abort(),V.delete(A))}function Ka(A){for(let D of A){let F=$a(D),W=Mr(F.data);m.fetchers.set(D,W)}}function vo(){let A=[],D=!1;for(let F of ie){let W=m.fetchers.get(F);ye(W,"Expected fetcher: "+F),W.state==="loading"&&(ie.delete(F),A.push(F),D=!0)}return Ka(A),D}function cc(A){let D=[];for(let[F,W]of he)if(W<A){let K=m.fetchers.get(F);ye(K,"Expected fetcher: "+F),K.state==="loading"&&(ri(F),he.delete(F),D.push(F))}return Ka(D),D.length>0}function Df(A,D){let F=m.blockers.get(A)||hl;return Te.get(A)!==D&&Te.set(A,D),F}function Eo(A){m.blockers.delete(A),Te.delete(A)}function Ss(A,D){let F=m.blockers.get(A)||hl;ye(F.state==="unblocked"&&D.state==="blocked"||F.state==="blocked"&&D.state==="blocked"||F.state==="blocked"&&D.state==="proceeding"||F.state==="blocked"&&D.state==="unblocked"||F.state==="proceeding"&&D.state==="unblocked","Invalid blocker state transition: "+F.state+" -> "+D.state);let W=new Map(m.blockers);W.set(A,D),dt({blockers:W})}function hc(A){let{currentLocation:D,nextLocation:F,historyAction:W}=A;if(Te.size===0)return;Te.size>1&&Js(!1,"A router only supports one blocker at a time");let K=Array.from(Te.entries()),[ee,se]=K[K.length-1],q=m.blockers.get(ee);if(!(q&&q.state==="proceeding")&&se({currentLocation:D,nextLocation:F,historyAction:W}))return ee}function Vi(A){let D=mn(404,{pathname:A}),F=a||o,{matches:W,route:K}=Z0(F);return Rs(),{notFoundMatches:W,route:K,error:D}}function Rs(A){let D=[];return De.forEach((F,W)=>{(!A||A(W))&&(F.cancel(),D.push(W),De.delete(W))}),D}function Ya(A,D,F){if(y=A,P=D,T=F||null,!C&&m.navigation===fp){C=!0;let W=wo(m.location,m.matches);W!=null&&dt({restoreScrollPosition:W})}return()=>{y=null,P=null,T=null}}function Wi(A,D){return T&&T(A,D.map(W=>l2(W,m.loaderData)))||A.key}function dc(A,D){if(y&&P){let F=Wi(A,D);y[F]=P()}}function wo(A,D){if(y){let F=Wi(A,D),W=y[F];if(typeof W=="number")return W}return null}function xs(A,D,F){if(h)if(A){if(Object.keys(A[0].params).length>0)return{active:!0,matches:mh(D,F,l,!0)}}else return{active:!0,matches:mh(D,F,l,!0)||[]};return{active:!1,matches:null}}async function Ii(A,D,F,W){if(!h)return{type:"success",matches:A};let K=A;for(;;){let ee=a==null,se=a||o,q=s;try{await h({signal:F,path:D,matches:K,fetcherKey:W,patch:(te,ue)=>{F.aborted||H0(te,ue,se,q,r)}})}catch(te){return{type:"error",error:te,partialMatches:K}}finally{ee&&!F.aborted&&(o=[...o])}if(F.aborted)return{type:"aborted"};let Z=bs(se,D,l);if(Z)return{type:"success",matches:Z};let Y=mh(se,D,l,!0);if(!Y||K.length===Y.length&&K.every((te,ue)=>te.route.id===Y[ue].route.id))return{type:"success",matches:null};K=Y}}function fc(A){s={},a=Yh(A,r,void 0,s)}function Mt(A,D){let F=a==null;H0(A,D,a||o,s,r),F&&(o=[...o],dt({}))}return z={get basename(){return l},get future(){return d},get state(){return m},get routes(){return o},get window(){return e},initialize:zi,subscribe:Ir,enableScrollRestoration:Ya,navigate:An,fetch:dn,revalidate:Sr,createHref:A=>t.history.createHref(A),encodeLocation:A=>t.history.encodeLocation(A),getFetcher:$a,deleteFetcher:Is,dispose:It,getBlocker:Df,deleteBlocker:Eo,patchRoutes:Mt,_internalFetchControllers:V,_internalActiveDeferreds:De,_internalSetRoutes:fc},z}function M2(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Fg(t,e,n,i,r,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=Yd(r||".",Kd(l,s),Da(t.pathname,n)||t.pathname,a==="path");if(r==null&&(h.search=t.search,h.hash=t.hash),(r==null||r===""||r===".")&&c){let d=E_(h.search);if(c.route.index&&!d)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let f=new URLSearchParams(h.search),_=f.getAll("index");f.delete("index"),_.filter(T=>T).forEach(T=>f.append("index",T));let y=f.toString();h.search=y?"?"+y:""}}return i&&n!=="/"&&(h.pathname=h.pathname==="/"?n:ar([n,h.pathname])),eo(h)}function B0(t,e,n,i){if(!i||!M2(i))return{path:n};if(i.formMethod&&!K2(i.formMethod))return{path:n,error:mn(405,{method:i.formMethod})};let r=()=>({path:n,error:mn(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=jT(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!hi(o))return r();let f=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((_,y)=>{let[T,P]=y;return""+_+T+"="+P+`
`},""):String(i.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:f}}}else if(i.formEncType==="application/json"){if(!hi(o))return r();try{let f=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:f,text:void 0}}}catch{return r()}}}ye(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=Ug(i.formData),c=i.formData;else if(i.body instanceof FormData)l=Ug(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=K0(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=K0(l)}catch{return r()}let h={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(hi(h.formMethod))return{path:n,submission:h};let d=_s(n);return e&&d.search&&E_(d.search)&&l.append("index",""),d.search="?"+l,{path:eo(d),submission:h}}function V0(t,e,n){n===void 0&&(n=!1);let i=t.findIndex(r=>r.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function W0(t,e,n,i,r,s,o,a,l,c,h,d,f,_,y,T){let P=T?Dn(T[1])?T[1].error:T[1].data:void 0,C=t.createURL(e.location),E=t.createURL(r),R=n;s&&e.errors?R=V0(n,Object.keys(e.errors)[0],!0):T&&Dn(T[1])&&(R=V0(n,T[0]));let N=T?T[1].statusCode:void 0,M=o&&N&&N>=400,z=R.filter((v,I)=>{let{route:S}=v;if(S.lazy)return!0;if(S.loader==null)return!1;if(s)return jg(S,e.loaderData,e.errors);if(b2(e.loaderData,e.matches[I],v)||l.some(x=>x===v.route.id))return!0;let k=e.matches[I],L=v;return G0(v,st({currentUrl:C,currentParams:k.params,nextUrl:E,nextParams:L.params},i,{actionResult:P,actionStatus:N,defaultShouldRevalidate:M?!1:a||C.pathname+C.search===E.pathname+E.search||C.search!==E.search||bT(k,L)}))}),m=[];return d.forEach((v,I)=>{if(s||!n.some(fe=>fe.route.id===v.routeId)||h.has(I))return;let S=bs(_,v.path,y);if(!S){m.push({key:I,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(I),L=Pl(S,v.path),x=!1;f.has(I)?x=!1:c.has(I)?(c.delete(I),x=!0):k&&k.state!=="idle"&&k.data===void 0?x=a:x=G0(L,st({currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},i,{actionResult:P,actionStatus:N,defaultShouldRevalidate:M?!1:a})),x&&m.push({key:I,routeId:v.routeId,path:v.path,matches:S,match:L,controller:new AbortController})}),[z,m]}function jg(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=e!=null&&e[t.id]!==void 0,r=n!=null&&n[t.id]!==void 0;return!i&&r?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!r}function b2(t,e,n){let i=!e||n.route.id!==e.route.id,r=t[n.route.id]===void 0;return i||r}function bT(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function G0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function H0(t,e,n,i,r){var s;let o;if(t){let c=i[t];ye(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(h=>FT(c,h))),l=Yh(a,r,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],i);o.push(...l)}function FT(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,i)=>{var r;return(r=e.children)==null?void 0:r.some(s=>FT(n,s))}):!1}async function F2(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let r=n[t.id];ye(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";Js(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!o2.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,st({},e(r),{lazy:void 0}))}async function j2(t){let{matches:e}=t,n=e.filter(r=>r.shouldLoad);return(await Promise.all(n.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[n[o].route.id]:s}),{})}async function U2(t,e,n,i,r,s,o,a,l,c){let h=s.map(_=>_.route.lazy?F2(_.route,l,a):void 0),d=s.map((_,y)=>{let T=h[y],P=r.some(E=>E.route.id===_.route.id);return st({},_,{shouldLoad:P,resolve:async E=>(E&&i.method==="GET"&&(_.route.lazy||_.route.loader)&&(P=!0),P?z2(e,i,_,T,E,c):Promise.resolve({type:ze.data,result:void 0}))})}),f=await t({matches:d,request:i,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return f}async function z2(t,e,n,i,r,s){let o,a,l=c=>{let h,d=new Promise((y,T)=>h=T);a=()=>h(),e.signal.addEventListener("abort",a);let f=y=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),_=(async()=>{try{return{type:"data",result:await(r?r(T=>f(T)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([_,d])};try{let c=n.route[t];if(i)if(c){let h,[d]=await Promise.all([l(c).catch(f=>{h=f}),i]);if(h!==void 0)throw h;o=d}else if(await i,c=n.route[t],c)o=await l(c);else if(t==="action"){let h=new URL(e.url),d=h.pathname+h.search;throw mn(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:ze.data,result:void 0};else if(c)o=await l(c);else{let h=new URL(e.url),d=h.pathname+h.search;throw mn(404,{pathname:d})}ye(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ze.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function B2(t){let{result:e,type:n}=t;if(UT(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:ze.error,error:f}}return n===ze.error?{type:ze.error,error:new Xh(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:ze.data,data:d,statusCode:e.status,headers:e.headers}}if(n===ze.error){if(Q0(e)){var i,r;if(e.data instanceof Error){var s,o;return{type:ze.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ze.error,error:new Xh(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:yu(e)?e.status:void 0,headers:(r=e.init)!=null&&r.headers?new Headers(e.init.headers):void 0}}return{type:ze.error,error:e,statusCode:yu(e)?e.status:void 0}}if($2(e)){var a,l;return{type:ze.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Q0(e)){var c,h;return{type:ze.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:ze.data,data:e}}function V2(t,e,n,i,r,s){let o=t.headers.get("Location");if(ye(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!y_.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===n)+1);o=Fg(new URL(e.url),a,r,!0,o,s),t.headers.set("Location",o)}return t}function $0(t,e,n){if(y_.test(t)){let i=t,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=Da(r.pathname,n)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return t}function xo(t,e,n,i){let r=t.createURL(jT(e)).toString(),s={signal:n};if(i&&hi(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=Ug(i.formData):s.body=i.formData}return new Request(r,s)}function Ug(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function K0(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function W2(t,e,n,i,r){let s={},o=null,a,l=!1,c={},h=n&&Dn(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,_=e[f];if(ye(!Bs(_),"Cannot handle redirect results in processLoaderData"),Dn(_)){let y=_.error;h!==void 0&&(y=h,h=void 0),o=o||{};{let T=Fs(t,f);o[T.route.id]==null&&(o[T.route.id]=y)}s[f]=void 0,l||(l=!0,a=yu(_.error)?_.error.status:500),_.headers&&(c[f]=_.headers)}else Xr(_)?(i.set(f,_.deferredData),s[f]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(c[f]=_.headers)):(s[f]=_.data,_.statusCode&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(c[f]=_.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Y0(t,e,n,i,r,s,o){let{loaderData:a,errors:l}=W2(e,n,i,o);return r.forEach(c=>{let{key:h,match:d,controller:f}=c,_=s[h];if(ye(_,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Dn(_)){let y=Fs(t.matches,d==null?void 0:d.route.id);l&&l[y.route.id]||(l=st({},l,{[y.route.id]:_.error})),t.fetchers.delete(h)}else if(Bs(_))ye(!1,"Unhandled fetcher revalidation redirect");else if(Xr(_))ye(!1,"Unhandled fetcher deferred data");else{let y=Mr(_.data);t.fetchers.set(h,y)}}),{loaderData:a,errors:l}}function X0(t,e,n,i){let r=st({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):t[o]!==void 0&&s.route.loader&&(r[o]=t[o]),i&&i.hasOwnProperty(o))break}return r}function q0(t){return t?Dn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Fs(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function Z0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function mn(t,e){let{pathname:n,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",r&&n&&i?l="You made a "+r+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",r&&n&&i?l="You made a "+r.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new Xh(t||500,a,new Error(l),!0)}function Vc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[i,r]=e[n];if(Bs(r))return{key:i,result:r}}}function jT(t){let e=typeof t=="string"?_s(t):t;return eo(st({},e,{hash:""}))}function G2(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function H2(t){return UT(t.result)&&A2.has(t.result.status)}function Xr(t){return t.type===ze.deferred}function Dn(t){return t.type===ze.error}function Bs(t){return(t&&t.type)===ze.redirect}function Q0(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function $2(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function UT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function K2(t){return k2.has(t.toLowerCase())}function hi(t){return x2.has(t.toLowerCase())}async function Y2(t,e,n,i,r){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=t.find(f=>(f==null?void 0:f.route.id)===a);if(!c)continue;let h=i.find(f=>f.route.id===c.route.id),d=h!=null&&!bT(h,c)&&(r&&r[c.route.id])!==void 0;Xr(l)&&d&&await v_(l,n,!1).then(f=>{f&&(e[a]=f)})}}async function X2(t,e,n){for(let i=0;i<n.length;i++){let{key:r,routeId:s,controller:o}=n[i],a=e[r];t.find(c=>(c==null?void 0:c.route.id)===s)&&Xr(a)&&(ye(o,"Expected an AbortController for revalidating fetcher deferred result"),await v_(a,o.signal,!0).then(c=>{c&&(e[r]=c)}))}}async function v_(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ze.data,data:t.deferredData.unwrappedData}}catch(r){return{type:ze.error,error:r}}return{type:ze.data,data:t.deferredData.data}}}function E_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Pl(t,e){let n=typeof e=="string"?_s(e).search:e.search;if(t[t.length-1].route.index&&E_(n||""))return t[t.length-1];let i=OT(t);return i[i.length-1]}function J0(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:s,json:o}=t;if(!(!e||!n||!i)){if(r!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:n,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:o,text:void 0}}}function pp(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function q2(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function dl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Z2(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Mr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Q2(t,e){try{let n=t.sessionStorage.getItem(MT);if(n){let i=JSON.parse(n);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function J2(t,e){if(e.size>0){let n={};for(let[i,r]of e)n[i]=[...r];try{t.sessionStorage.setItem(MT,JSON.stringify(n))}catch(i){Js(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qh.apply(this,arguments)}const Xd=U.createContext(null),zT=U.createContext(null),ys=U.createContext(null),w_=U.createContext(null),vr=U.createContext({outlet:null,matches:[],isDataRoute:!1}),BT=U.createContext(null);function eA(t,e){let{relative:n}=e===void 0?{}:e;Ma()||ye(!1);let{basename:i,navigator:r}=U.useContext(ys),{hash:s,pathname:o,search:a}=GT(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:ar([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Ma(){return U.useContext(w_)!=null}function Gu(){return Ma()||ye(!1),U.useContext(w_).location}function VT(t){U.useContext(ys).static||U.useLayoutEffect(t)}function qd(){let{isDataRoute:t}=U.useContext(vr);return t?dA():tA()}function tA(){Ma()||ye(!1);let t=U.useContext(Xd),{basename:e,future:n,navigator:i}=U.useContext(ys),{matches:r}=U.useContext(vr),{pathname:s}=Gu(),o=JSON.stringify(Kd(r,n.v7_relativeSplatPath)),a=U.useRef(!1);return VT(()=>{a.current=!0}),U.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Yd(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ar([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function WT(){let{matches:t}=U.useContext(vr),e=t[t.length-1];return e?e.params:{}}function GT(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=U.useContext(ys),{matches:r}=U.useContext(vr),{pathname:s}=Gu(),o=JSON.stringify(Kd(r,i.v7_relativeSplatPath));return U.useMemo(()=>Yd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function nA(t,e,n,i){Ma()||ye(!1);let{navigator:r}=U.useContext(ys),{matches:s}=U.useContext(vr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Gu(),h;h=c;let d=h.pathname||"/",f=d;if(l!=="/"){let T=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=bs(t,{pathname:f});return aA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ar([l,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ar([l,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,i)}function iA(){let t=hA(),e=yu(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:r},n):null,null)}const rA=U.createElement(iA,null);class sA extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(vr.Provider,{value:this.props.routeContext},U.createElement(BT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oA(t){let{routeContext:e,match:n,children:i}=t,r=U.useContext(Xd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(vr.Provider,{value:e},i)}function aA(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ye(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:_}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let _,y=!1,T=null,P=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,T=d.route.errorElement||rA,l&&(c<0&&f===0?(fA("route-fallback"),y=!0,P=null):c===f&&(y=!0,P=d.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,f+1)),E=()=>{let R;return _?R=T:y?R=P:d.route.Component?R=U.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=h,U.createElement(oA,{match:d,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:R})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?U.createElement(sA,{location:n.location,revalidation:n.revalidation,component:T,error:_,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}var HT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HT||{}),$T=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($T||{});function lA(t){let e=U.useContext(Xd);return e||ye(!1),e}function uA(t){let e=U.useContext(zT);return e||ye(!1),e}function cA(t){let e=U.useContext(vr);return e||ye(!1),e}function KT(t){let e=cA(),n=e.matches[e.matches.length-1];return n.route.id||ye(!1),n.route.id}function hA(){var t;let e=U.useContext(BT),n=uA($T.UseRouteError),i=KT();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function dA(){let{router:t}=lA(HT.UseNavigateStable),e=KT(),n=U.useRef(!1);return VT(()=>{n.current=!0}),U.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,qh({fromRouteId:e},s)))},[t,e])}const eE={};function fA(t,e,n){eE[t]||(eE[t]=!0)}function pA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function YT(t){let{to:e,replace:n,state:i,relative:r}=t;Ma()||ye(!1);let{future:s,static:o}=U.useContext(ys),{matches:a}=U.useContext(vr),{pathname:l}=Gu(),c=qd(),h=Yd(e,Kd(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return U.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function gA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ct.Pop,navigator:s,static:o=!1,future:a}=t;Ma()&&ye(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:s,static:o,future:qh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=_s(i));let{pathname:h="/",search:d="",hash:f="",state:_=null,key:y="default"}=i,T=U.useMemo(()=>{let P=Da(h,l);return P==null?null:{location:{pathname:P,search:d,hash:f,state:_,key:y},navigationType:r}},[l,h,d,f,_,y,r]);return T==null?null:U.createElement(ys.Provider,{value:c},U.createElement(w_.Provider,{children:n,value:T}))}new Promise(()=>{});function mA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vu.apply(this,arguments)}function _A(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function yA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vA(t,e){return t.button===0&&(!e||e==="_self")&&!yA(t)}const EA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wA="6";try{window.__reactRouterVersion=wA}catch{}function CA(t,e){return D2({basename:void 0,future:vu({},void 0,{v7_prependBasename:!0}),history:i2({window:void 0}),hydrationData:TA(),routes:t,mapRouteProperties:mA,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function TA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=vu({},e,{errors:IA(e.errors)})),e}function IA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")n[i]=new Xh(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",n[i]=o}catch{}}if(n[i]==null){let s=new Error(r.message);s.stack="",n[i]=s}}else n[i]=r;return n}const SA=U.createContext({isTransitioning:!1}),RA=U.createContext(new Map),xA="startTransition",tE=Gx[xA],PA="flushSync",nE=n2[PA];function kA(t){tE?tE(t):t()}function fl(t){nE?nE(t):t()}let AA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function NA(t){let{fallbackElement:e,router:n,future:i}=t,[r,s]=U.useState(n.state),[o,a]=U.useState(),[l,c]=U.useState({isTransitioning:!1}),[h,d]=U.useState(),[f,_]=U.useState(),[y,T]=U.useState(),P=U.useRef(new Map),{v7_startTransition:C}=i||{},E=U.useCallback(v=>{C?kA(v):v()},[C]),R=U.useCallback((v,I)=>{let{deletedFetchers:S,flushSync:k,viewTransitionOpts:L}=I;v.fetchers.forEach((fe,Fe)=>{fe.data!==void 0&&P.current.set(Fe,fe.data)}),S.forEach(fe=>P.current.delete(fe));let x=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!L||x){k?fl(()=>s(v)):E(()=>s(v));return}if(k){fl(()=>{f&&(h&&h.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let fe=n.window.document.startViewTransition(()=>{fl(()=>s(v))});fe.finished.finally(()=>{fl(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),fl(()=>_(fe));return}f?(h&&h.resolve(),f.skipTransition(),T({state:v,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(a(v),c({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,f,h,P,E]);U.useLayoutEffect(()=>n.subscribe(R),[n,R]),U.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new AA)},[l]),U.useEffect(()=>{if(h&&o&&n.window){let v=o,I=h.promise,S=n.window.document.startViewTransition(async()=>{E(()=>s(v)),await I});S.finished.finally(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(S)}},[E,o,h,n.window]),U.useEffect(()=>{h&&o&&r.location.key===o.location.key&&h.resolve()},[h,f,r.location,o]),U.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),T(void 0))},[l.isTransitioning,y]),U.useEffect(()=>{},[]);let N=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,I,S)=>n.navigate(v,{state:I,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(v,I,S)=>n.navigate(v,{replace:!0,state:I,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),M=n.basename||"/",z=U.useMemo(()=>({router:n,navigator:N,static:!1,basename:M}),[n,N,M]),m=U.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return U.useEffect(()=>pA(i,n.future),[i,n.future]),U.createElement(U.Fragment,null,U.createElement(Xd.Provider,{value:z},U.createElement(zT.Provider,{value:r},U.createElement(RA.Provider,{value:P.current},U.createElement(SA.Provider,{value:l},U.createElement(gA,{basename:M,location:r.location,navigationType:r.historyAction,navigator:N,future:m},r.initialized||n.future.v7_partialHydration?U.createElement(LA,{routes:n.routes,future:n.future,state:r}):e))))),null)}const LA=U.memo(OA);function OA(t){let{routes:e,future:n,state:i}=t;return nA(e,void 0,i,n)}const DA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=U.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=_A(e,EA),{basename:_}=U.useContext(ys),y,T=!1;if(typeof c=="string"&&MA.test(c)&&(y=c,DA))try{let R=new URL(window.location.href),N=c.startsWith("//")?new URL(R.protocol+c):new URL(c),M=Da(N.pathname,_);N.origin===R.origin&&M!=null?c=M+N.search+N.hash:T=!0}catch{}let P=eA(c,{relative:r}),C=bA(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function E(R){i&&i(R),R.defaultPrevented||C(R)}return U.createElement("a",vu({},f,{href:y||P,onClick:T||s?i:E,ref:n,target:l}))});var iE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iE||(iE={}));var rE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rE||(rE={}));function bA(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=qd(),c=Gu(),h=GT(t,{relative:o});return U.useCallback(d=>{if(vA(d,n)){d.preventDefault();let f=i!==void 0?i:eo(c)===eo(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}var sE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(t,e){if(!t)throw ba(e)},ba=function(t){return new Error("Firebase Database ("+qT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},C_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(f=64)),i.push(n[h],n[d],n[f],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new jA;const f=s<<2|a>>4;if(i.push(f),c!==64){const _=a<<4&240|c>>2;if(i.push(_),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QT=function(t){const e=ZT(t);return C_.encodeByteArray(e,!0)},Zh=function(t){return QT(t).replace(/\./g,"")},Qh=function(t){try{return C_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){return JT(void 0,t)}function JT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zA(n)||(t[n]=JT(t[n],e[n]));return t}function zA(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=()=>BA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof sE>"u")return;const t=sE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qh(t[1]);return e&&JSON.parse(e)},T_=()=>{try{return VA()||WA()||GA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eI=t=>{var e,n;return(n=(e=T_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tI=t=>{const e=eI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},nI=()=>{var t;return(t=T_())===null||t===void 0?void 0:t.config},iI=t=>{var e;return(e=T_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zh(JSON.stringify(n)),Zh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function HA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $A(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KA(){const t=un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YA(){return qT.NODE_ADMIN===!0}function XA(){try{return typeof indexedDB=="object"}catch{return!1}}function qA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="FirebaseError";class Er extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ZA,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hu.prototype.create)}}class Hu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?QA(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Er(r,a,i)}}function QA(t,e){return t.replace(JA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const JA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return JSON.parse(t)}function Lt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Eu(Qh(s[0])||""),n=Eu(Qh(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},eN=function(t){const e=oI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tN=function(t){const e=oI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jh(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function ed(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(oE(s)&&oE(o)){if(!ed(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function oE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function kl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Al(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const f=(r<<5|r>>>27)+c+l+h+i[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function iN(t,e){const n=new rN(t,e);return n.subscribe.bind(n)}class rN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");sN(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=gp),r.error===void 0&&(r.error=gp),r.complete===void 0&&(r.complete=gp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gp(){}function S_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,H(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Qd=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zd;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uN(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lN(t){return t===Ds?void 0:t}function uN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const hN={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},dN=Le.INFO,fN={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},pN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=fN[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jd{constructor(e){this.name=e,this._logLevel=dN,this._logHandler=pN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const gN=(t,e)=>e.some(n=>t instanceof n);let aE,lE;function mN(){return aE||(aE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _N(){return lE||(lE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aI=new WeakMap,Bg=new WeakMap,lI=new WeakMap,mp=new WeakMap,R_=new WeakMap;function yN(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ss(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aI.set(n,t)}).catch(()=>{}),R_.set(e,t),e}function vN(t){if(Bg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Bg.set(t,e)}let Vg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EN(t){Vg=t(Vg)}function wN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_p(this),e,...n);return lI.set(i,e.sort?e.sort():[e]),ss(i)}:_N().includes(t)?function(...e){return t.apply(_p(this),e),ss(aI.get(this))}:function(...e){return ss(t.apply(_p(this),e))}}function CN(t){return typeof t=="function"?wN(t):(t instanceof IDBTransaction&&vN(t),gN(t,mN())?new Proxy(t,Vg):t)}function ss(t){if(t instanceof IDBRequest)return yN(t);if(mp.has(t))return mp.get(t);const e=CN(t);return e!==t&&(mp.set(t,e),R_.set(e,t)),e}const _p=t=>R_.get(t);function TN(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=ss(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ss(o.result),l.oldVersion,l.newVersion,ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const IN=["get","getKey","getAll","getAllKeys","count"],SN=["put","add","delete","clear"],yp=new Map;function uE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=SN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||IN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return yp.set(e,s),s}EN(t=>({...t,get:(e,n,i)=>uE(e,n)||t.get(e,n,i),has:(e,n)=>!!uE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",cE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Jd("@firebase/app"),PN="@firebase/app-compat",kN="@firebase/analytics-compat",AN="@firebase/analytics",NN="@firebase/app-check-compat",LN="@firebase/app-check",ON="@firebase/auth",DN="@firebase/auth-compat",MN="@firebase/database",bN="@firebase/data-connect",FN="@firebase/database-compat",jN="@firebase/functions",UN="@firebase/functions-compat",zN="@firebase/installations",BN="@firebase/installations-compat",VN="@firebase/messaging",WN="@firebase/messaging-compat",GN="@firebase/performance",HN="@firebase/performance-compat",$N="@firebase/remote-config",KN="@firebase/remote-config-compat",YN="@firebase/storage",XN="@firebase/storage-compat",qN="@firebase/firestore",ZN="@firebase/vertexai-preview",QN="@firebase/firestore-compat",JN="firebase",eL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",tL={[Wg]:"fire-core",[PN]:"fire-core-compat",[AN]:"fire-analytics",[kN]:"fire-analytics-compat",[LN]:"fire-app-check",[NN]:"fire-app-check-compat",[ON]:"fire-auth",[DN]:"fire-auth-compat",[MN]:"fire-rtdb",[bN]:"fire-data-connect",[FN]:"fire-rtdb-compat",[jN]:"fire-fn",[UN]:"fire-fn-compat",[zN]:"fire-iid",[BN]:"fire-iid-compat",[VN]:"fire-fcm",[WN]:"fire-fcm-compat",[GN]:"fire-perf",[HN]:"fire-perf-compat",[$N]:"fire-rc",[KN]:"fire-rc-compat",[YN]:"fire-gcs",[XN]:"fire-gcs-compat",[qN]:"fire-fst",[QN]:"fire-fst-compat",[ZN]:"fire-vertex","fire-js":"fire-js",[JN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,nL=new Map,Hg=new Map;function hE(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(Hg.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Hg.set(e,t);for(const n of td.values())hE(n,t);for(const n of nL.values())hE(n,t);return!0}function ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new Hu("app","Firebase",iL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=eL;function uI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Gg,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw os.create("bad-app-name",{appName:String(r)});if(n||(n=nI()),!n)throw os.create("no-options");const s=td.get(r);if(s){if(ed(n,s.options)&&ed(i,s.config))return s;throw os.create("duplicate-app",{appName:r})}const o=new cN(r);for(const l of Hg.values())o.addComponent(l);const a=new rL(n,i,o);return td.set(r,a),a}function x_(t=Gg){const e=td.get(t);if(!e&&t===Gg&&nI())return uI();if(!e)throw os.create("no-app",{appName:t});return e}function Mi(t,e,n){var i;let r=(i=tL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(a.join(" "));return}to(new cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="firebase-heartbeat-database",oL=1,wu="firebase-heartbeat-store";let vp=null;function cI(){return vp||(vp=TN(sL,oL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),vp}async function aL(t){try{const n=(await cI()).transaction(wu),i=await n.objectStore(wu).get(hI(t));return await n.done,i}catch(e){if(e instanceof Er)pr.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function dE(t,e){try{const i=(await cI()).transaction(wu,"readwrite");await i.objectStore(wu).put(e,hI(t)),await i.done}catch(n){if(n instanceof Er)pr.warn(n.message);else{const i=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(i.message)}}}function hI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=1024,uL=30*24*60*60*1e3;class cL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=uL}),this._storage.overwrite(this._heartbeatsCache))}catch(i){pr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fE(),{heartbeatsToSend:i,unsentEntries:r}=hL(this._heartbeatsCache.heartbeats),s=Zh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pr.warn(n),""}}}function fE(){return new Date().toISOString().substring(0,10)}function hL(t,e=lL){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),pE(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XA()?qA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return dE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pE(t){return Zh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){to(new cs("platform-logger",e=>new RN(e),"PRIVATE")),to(new cs("heartbeat",e=>new cL(e),"PRIVATE")),Mi(Wg,cE,t),Mi(Wg,cE,"esm2017"),Mi("fire-js","")}fL("");var pL="firebase",gL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(pL,gL,"app");function P_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function dI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mL=dI,fI=new Hu("auth","Firebase",dI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Jd("@firebase/auth");function _L(t,...e){nd.logLevel<=Le.WARN&&nd.warn(`Auth (${co}): ${t}`,...e)}function _h(t,...e){nd.logLevel<=Le.ERROR&&nd.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,...e){throw k_(t,...e)}function bi(t,...e){return k_(t,...e)}function pI(t,e,n){const i=Object.assign(Object.assign({},mL()),{[e]:n});return new Hu("auth","Firebase",i).create(e,{appName:t.name})}function lr(t){return pI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return fI.create(t,...e)}function oe(t,e,...n){if(!t)throw k_(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _h(e),new Error(e)}function gr(t,e){t||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yL(){return gE()==="http:"||gE()==="https:"}function gE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yL()||$A()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=I_()||sI()}get(){return vL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new $u(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Es(t,e,n,i,r={}){return mI(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Fa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return HA()||(c.referrerPolicy="no-referrer"),gI.fetch()(_I(t,t.config.apiHost,n,a),c)})}async function mI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},wL),e);try{const r=new IL(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wc(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pI(t,h,c);wi(t,h)}}catch(r){if(r instanceof Er)throw r;wi(t,"network-request-failed",{message:String(r)})}}async function Ku(t,e,n,i,r={}){const s=await Es(t,e,n,i,r);return"mfaPendingCredential"in s&&wi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _I(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?A_(t.config,r):`${t.config.apiScheme}://${r}`}function TL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bi(this.auth,"network-request-failed")),CL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=bi(t,e,i);return r.customData._tokenResponse=n,r}function mE(t){return t!==void 0&&t.enterprise!==void 0}class SL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RL(t,e){return Es(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e){return Es(t,"POST","/v1/accounts:delete",e)}async function yI(t,e){return Es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PL(t,e=!1){const n=kn(t),i=await n.getIdToken(e),r=N_(i);oe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Gl(Ep(r.auth_time)),issuedAtTime:Gl(Ep(r.iat)),expirationTime:Gl(Ep(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ep(t){return Number(t)*1e3}function N_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const r=Qh(n);return r?JSON.parse(r):(_h("Failed to decode base64 JWT payload"),null)}catch(r){return _h("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _E(t){const e=N_(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Er&&kL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function kL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Cu(t,yI(n,{idToken:i}));oe(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vI(s.providerUserInfo):[],a=LL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function NL(t){const e=kn(t);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LL(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function vI(t){return t.map(e=>{var{providerId:n}=e,i=P_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){const n=await mI(t,{},async()=>{const i=Fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=_I(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DL(t,e){return Es(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=_E(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await OL(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new aa;return i&&(oe(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(oe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=P_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cu(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PL(this,e)}reload(){return NL(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await id(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await Cu(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:R,emailVerified:N,isAnonymous:M,providerData:z,stsTokenManager:m}=n;oe(R&&m,e,"internal-error");const v=aa.fromJSON(this.name,m);oe(typeof R=="string",e,"internal-error"),Lr(d,e.name),Lr(f,e.name),oe(typeof N=="boolean",e,"internal-error"),oe(typeof M=="boolean",e,"internal-error"),Lr(_,e.name),Lr(y,e.name),Lr(T,e.name),Lr(P,e.name),Lr(C,e.name),Lr(E,e.name);const I=new nr({uid:R,auth:e,email:f,emailVerified:N,displayName:d,isAnonymous:M,photoURL:y,phoneNumber:_,tenantId:T,stsTokenManager:v,createdAt:C,lastLoginAt:E});return z&&Array.isArray(z)&&(I.providerData=z.map(S=>Object.assign({},S))),P&&(I._redirectEventId=P),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new aa;r.updateFromServerResponse(n);const s=new nr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await id(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];oe(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?vI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new aa;a.updateFromIdToken(i);const l=new nr({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Kg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;function ir(t){gr(t instanceof Function,"Expected a class definition");let e=yE.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EI.type="NONE";const vE=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=yh(this.userKey,r.apiKey,s),this.fullPersistenceKey=yh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new la(ir(vE),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||ir(vE);const o=yh(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=nr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new la(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new la(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(II(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RI(e))return"Blackberry";if(xI(e))return"Webos";if(CI(e))return"Safari";if((e.includes("chrome/")||TI(e))&&!e.includes("edge/"))return"Chrome";if(SI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function wI(t=un()){return/firefox\//i.test(t)}function CI(t=un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TI(t=un()){return/crios\//i.test(t)}function II(t=un()){return/iemobile/i.test(t)}function SI(t=un()){return/android/i.test(t)}function RI(t=un()){return/blackberry/i.test(t)}function xI(t=un()){return/webos/i.test(t)}function L_(t=un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ML(t=un()){var e;return L_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bL(){return KA()&&document.documentMode===10}function PI(t=un()){return L_(t)||SI(t)||xI(t)||RI(t)||/windows phone/i.test(t)||II(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e=[]){let n;switch(t){case"Browser":n=EE(un());break;case"Worker":n=`${EE(un())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e={}){return Es(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=6;class zL{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:UL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wE(this),this.idTokenSubscription=new wE(this),this.beforeStateQueue=new FL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yI(this,{idToken:e}),i=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(lr(this));const n=e?kn(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jL(this),n=new zL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await DL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_L(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ho(t){return kn(t)}class wE{constructor(e){this.auth=e,this.observer=null,this.addObserver=iN(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VL(t){tf=t}function AI(t){return tf.loadJS(t)}function WL(){return tf.recaptchaEnterpriseScript}function GL(){return tf.gapiScript}function HL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $L="recaptcha-enterprise",KL="NO_RECAPTCHA";class YL{constructor(e){this.type=$L,this.auth=ho(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{RL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new SL(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;mE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(KL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&mE(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=WL();l.length!==0&&(l+=a),AI(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function CE(t,e,n,i=!1){const r=new YL(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yg(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await CE(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CE(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t,e){const n=ef(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ed(s,e??{}))return r;wi(r,"already-initialized")}return n.initialize({options:e})}function qL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ZL(t,e,n){const i=ho(t);oe(i._canInitEmulator,i,"emulator-config-failed"),oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=NI(e),{host:o,port:a}=QL(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),JL()}function NI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QL(t){const e=NI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:TE(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:TE(o)}}}function TE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function eO(t,e){return Es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(t,e){return Ku(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e){return Ku(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function iO(t,e){return Ku(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends O_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Tu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Tu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yg(e,n,"signInWithPassword",tO);case"emailLink":return nO(e,{email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yg(e,i,"signUpPassword",eO);case"emailLink":return iO(e,{idToken:n,email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return Ku(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="http://localhost";class no extends O_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=P_(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new no(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ua(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ua(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ua(e,n)}buildRequest(){const e={requestUri:rO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oO(t){const e=kl(Al(t)).link,n=e?kl(Al(e)).deep_link_id:null,i=kl(Al(t)).deep_link_id;return(i?kl(Al(i)).link:null)||i||n||e||t}class D_{constructor(e){var n,i,r,s,o,a;const l=kl(Al(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=sO((r=l.mode)!==null&&r!==void 0?r:null);oe(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oO(e);try{return new D_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,n){return Tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=D_.parseLink(n);return oe(i,"argument-error"),Tu._fromEmailAndCode(e,i.code,i.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends LI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Yu{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Yu{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Yu{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return $r.credential(n,i)}catch{return null}}}$r.TWITTER_SIGN_IN_METHOD="twitter.com";$r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e){return Ku(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await nr._fromIdTokenResponse(e,i,r),o=IE(i);return new io({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=IE(i);return new io({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function IE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends Er{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new rd(e,n,i,r)}}function OI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(t,s,e,i):s})}async function lO(t,e,n=!1){const i=await Cu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e,n=!1){const{auth:i}=t;if(Ai(i.app))return Promise.reject(lr(i));const r="reauthenticate";try{const s=await Cu(t,OI(i,r,e,t),n);oe(s.idToken,i,"internal-error");const o=N_(s.idToken);oe(o,i,"internal-error");const{sub:a}=o;return oe(t.uid===a,i,"user-mismatch"),io._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(t,e,n=!1){if(Ai(t.app))return Promise.reject(lr(t));const i="signIn",r=await OI(t,i,e),s=await io._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function cO(t,e){return DI(ho(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t){const e=ho(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hO(t,e,n){if(Ai(t.app))return Promise.reject(lr(t));const i=ho(t),o=await Yg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&MI(t),l}),a=await io._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function dO(t,e,n){return Ai(t.app)?Promise.reject(lr(t)):cO(kn(t),ja.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&MI(t),i})}function fO(t,e,n,i){return kn(t).onIdTokenChanged(e,n,i)}function pO(t,e,n){return kn(t).beforeAuthStateChanged(e,n)}function gO(t,e,n,i){return kn(t).onAuthStateChanged(e,n,i)}function SE(t){return kn(t).signOut()}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=1e3,_O=10;class FI extends bI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);bL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_O):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},mO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FI.type="LOCAL";const yO=FI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI extends bI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jI.type="SESSION";const UI=jI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new nf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await vO(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=M_("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function wO(t){Fi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function CO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IO(){return zI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="firebaseLocalStorageDb",SO=1,od="firebaseLocalStorage",VI="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rf(t,e){return t.transaction([od],e?"readwrite":"readonly").objectStore(od)}function RO(){const t=indexedDB.deleteDatabase(BI);return new Xu(t).toPromise()}function Xg(){const t=indexedDB.open(BI,SO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(od,{keyPath:VI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(od)?e(i):(i.close(),await RO(),e(await Xg()))})})}async function RE(t,e,n){const i=rf(t,!0).put({[VI]:e,value:n});return new Xu(i).toPromise()}async function xO(t,e){const n=rf(t,!1).get(e),i=await new Xu(n).toPromise();return i===void 0?null:i.value}function xE(t,e){const n=rf(t,!0).delete(e);return new Xu(n).toPromise()}const PO=800,kO=3;class WI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(IO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CO(),!this.activeServiceWorker)return;this.sender=new EO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await RE(e,sd,"1"),await xE(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>RE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>xO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=rf(r,!1).getAll();return new Xu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WI.type="LOCAL";const AO=WI;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t,e){return e?ir(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends O_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LO(t){return DI(t.auth,new b_(t),t.bypassAuthState)}function OO(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),uO(n,new b_(t),t.bypassAuthState)}async function DO(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),lO(n,new b_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LO;case"linkViaPopup":case"linkViaRedirect":return DO;case"reauthViaPopup":case"reauthViaRedirect":return OO;default:wi(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new $u(2e3,1e4);class Zo extends GI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=M_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MO.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="pendingRedirect",vh=new Map;class FO extends GI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const i=await jO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jO(t,e){const n=BO(e),i=zO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function UO(t,e){vh.set(t._key(),e)}function zO(t){return ir(t._redirectPersistence)}function BO(t){return yh(bO,t.config.apiKey,t.name)}async function VO(t,e,n=!1){if(Ai(t.app))return Promise.reject(lr(t));const i=ho(t),r=NO(i,e),o=await new FO(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=10*60*1e3;class GO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!HI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WO&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t,e={}){return Es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YO=/^https?/;async function XO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $O(t);for(const n of e)try{if(qO(n))return}catch{}wi(t,"unauthorized-domain")}function qO(t){const e=$g(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!YO.test(n))return!1;if(KO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=new $u(3e4,6e4);function kE(){const t=Fi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QO(t){return new Promise((e,n)=>{var i,r,s;function o(){kE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kE(),n(bi(t,"network-request-failed"))},timeout:ZO.get()})}if(!((r=(i=Fi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Fi().gapi)===null||s===void 0)&&s.load)o();else{const a=HL("iframefcb");return Fi()[a]=()=>{gapi.load?o():n(bi(t,"network-request-failed"))},AI(`${GL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function JO(t){return Eh=Eh||QO(t),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new $u(5e3,15e3),tD="__/auth/iframe",nD="emulator/auth/iframe",iD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sD(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?A_(e,nD):`https://${t.config.authDomain}/${tD}`,i={apiKey:e.apiKey,appName:t.name,v:co},r=rD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Fa(i).slice(1)}`}async function oD(t){const e=await JO(t),n=Fi().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:sD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=bi(t,"network-request-failed"),a=Fi().setTimeout(()=>{s(o)},eD.get());function l(){Fi().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lD=500,uD=600,cD="_blank",hD="http://localhost";class AE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dD(t,e,n,i=lD,r=uD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aD),{width:i.toString(),height:r.toString(),top:s,left:o}),c=un().toLowerCase();n&&(a=TI(c)?cD:n),wI(c)&&(e=e||hD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[_,y])=>`${f}${_}=${y},`,"");if(ML(c)&&a!=="_self")return fD(e||"",a),new AE(null);const d=window.open(e||"",a,h);oe(d,t,"popup-blocked");try{d.focus()}catch{}return new AE(d)}function fD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="__/auth/handler",gD="emulator/auth/handler",mD=encodeURIComponent("fac");async function NE(t,e,n,i,r,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:co,eventId:r};if(e instanceof LI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Yu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${mD}=${encodeURIComponent(l)}`:"";return`${_D(t)}?${Fa(a).slice(1)}${c}`}function _D({config:t}){return t.emulator?A_(t,gD):`https://${t.authDomain}/${pD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class yD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UI,this._completeRedirectFn=VO,this._overrideRedirectResult=UO}async _openPopup(e,n,i,r){var s;gr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await NE(e,n,i,$g(),r);return dD(e,o,M_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await NE(e,n,i,$g(),r);return wO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(gr(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await oD(e),i=new GO(e);return n.register("authEvent",r=>(oe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[wp];o!==void 0&&n(!!o),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PI()||CI()||L_()}}const vD=yD;var LE="@firebase/auth",OE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CD(t){to(new cs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kI(t)},c=new BL(i,r,s,l);return qL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),to(new cs("auth-internal",e=>{const n=ho(e.getProvider("auth").getImmediate());return(i=>new ED(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(LE,OE,wD(t)),Mi(LE,OE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=5*60,ID=iI("authIdTokenMaxAge")||TD;let DE=null;const SD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ID)return;const r=n==null?void 0:n.token;DE!==r&&(DE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function RD(t=x_()){const e=ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XL(t,{popupRedirectResolver:vD,persistence:[AO,yO,UI]}),i=iI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=SD(s.toString());pO(n,o,()=>o(n.currentUser)),fO(n,a=>o(a))}}const r=eI("auth");return r&&ZL(n,`http://${r}`),n}function xD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=bi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",xD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CD("Browser");var ME=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $I;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(m,v){function I(){}I.prototype=v.prototype,m.D=v.prototype,m.prototype=new I,m.prototype.constructor=m,m.C=function(S,k,L){for(var x=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)x[fe-2]=arguments[fe];return v.prototype[k].apply(S,x)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(m,v,I){I||(I=0);var S=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)S[k]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(k=0;16>k;++k)S[k]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=m.g[0],I=m.g[1],k=m.g[2];var L=m.g[3],x=v+(L^I&(k^L))+S[0]+3614090360&4294967295;v=I+(x<<7&4294967295|x>>>25),x=L+(k^v&(I^k))+S[1]+3905402710&4294967295,L=v+(x<<12&4294967295|x>>>20),x=k+(I^L&(v^I))+S[2]+606105819&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(v^k&(L^v))+S[3]+3250441966&4294967295,I=k+(x<<22&4294967295|x>>>10),x=v+(L^I&(k^L))+S[4]+4118548399&4294967295,v=I+(x<<7&4294967295|x>>>25),x=L+(k^v&(I^k))+S[5]+1200080426&4294967295,L=v+(x<<12&4294967295|x>>>20),x=k+(I^L&(v^I))+S[6]+2821735955&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(v^k&(L^v))+S[7]+4249261313&4294967295,I=k+(x<<22&4294967295|x>>>10),x=v+(L^I&(k^L))+S[8]+1770035416&4294967295,v=I+(x<<7&4294967295|x>>>25),x=L+(k^v&(I^k))+S[9]+2336552879&4294967295,L=v+(x<<12&4294967295|x>>>20),x=k+(I^L&(v^I))+S[10]+4294925233&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(v^k&(L^v))+S[11]+2304563134&4294967295,I=k+(x<<22&4294967295|x>>>10),x=v+(L^I&(k^L))+S[12]+1804603682&4294967295,v=I+(x<<7&4294967295|x>>>25),x=L+(k^v&(I^k))+S[13]+4254626195&4294967295,L=v+(x<<12&4294967295|x>>>20),x=k+(I^L&(v^I))+S[14]+2792965006&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(v^k&(L^v))+S[15]+1236535329&4294967295,I=k+(x<<22&4294967295|x>>>10),x=v+(k^L&(I^k))+S[1]+4129170786&4294967295,v=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(v^I))+S[6]+3225465664&4294967295,L=v+(x<<9&4294967295|x>>>23),x=k+(v^I&(L^v))+S[11]+643717713&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^v&(k^L))+S[0]+3921069994&4294967295,I=k+(x<<20&4294967295|x>>>12),x=v+(k^L&(I^k))+S[5]+3593408605&4294967295,v=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(v^I))+S[10]+38016083&4294967295,L=v+(x<<9&4294967295|x>>>23),x=k+(v^I&(L^v))+S[15]+3634488961&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^v&(k^L))+S[4]+3889429448&4294967295,I=k+(x<<20&4294967295|x>>>12),x=v+(k^L&(I^k))+S[9]+568446438&4294967295,v=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(v^I))+S[14]+3275163606&4294967295,L=v+(x<<9&4294967295|x>>>23),x=k+(v^I&(L^v))+S[3]+4107603335&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^v&(k^L))+S[8]+1163531501&4294967295,I=k+(x<<20&4294967295|x>>>12),x=v+(k^L&(I^k))+S[13]+2850285829&4294967295,v=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(v^I))+S[2]+4243563512&4294967295,L=v+(x<<9&4294967295|x>>>23),x=k+(v^I&(L^v))+S[7]+1735328473&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^v&(k^L))+S[12]+2368359562&4294967295,I=k+(x<<20&4294967295|x>>>12),x=v+(I^k^L)+S[5]+4294588738&4294967295,v=I+(x<<4&4294967295|x>>>28),x=L+(v^I^k)+S[8]+2272392833&4294967295,L=v+(x<<11&4294967295|x>>>21),x=k+(L^v^I)+S[11]+1839030562&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^v)+S[14]+4259657740&4294967295,I=k+(x<<23&4294967295|x>>>9),x=v+(I^k^L)+S[1]+2763975236&4294967295,v=I+(x<<4&4294967295|x>>>28),x=L+(v^I^k)+S[4]+1272893353&4294967295,L=v+(x<<11&4294967295|x>>>21),x=k+(L^v^I)+S[7]+4139469664&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^v)+S[10]+3200236656&4294967295,I=k+(x<<23&4294967295|x>>>9),x=v+(I^k^L)+S[13]+681279174&4294967295,v=I+(x<<4&4294967295|x>>>28),x=L+(v^I^k)+S[0]+3936430074&4294967295,L=v+(x<<11&4294967295|x>>>21),x=k+(L^v^I)+S[3]+3572445317&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^v)+S[6]+76029189&4294967295,I=k+(x<<23&4294967295|x>>>9),x=v+(I^k^L)+S[9]+3654602809&4294967295,v=I+(x<<4&4294967295|x>>>28),x=L+(v^I^k)+S[12]+3873151461&4294967295,L=v+(x<<11&4294967295|x>>>21),x=k+(L^v^I)+S[15]+530742520&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^v)+S[2]+3299628645&4294967295,I=k+(x<<23&4294967295|x>>>9),x=v+(k^(I|~L))+S[0]+4096336452&4294967295,v=I+(x<<6&4294967295|x>>>26),x=L+(I^(v|~k))+S[7]+1126891415&4294967295,L=v+(x<<10&4294967295|x>>>22),x=k+(v^(L|~I))+S[14]+2878612391&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~v))+S[5]+4237533241&4294967295,I=k+(x<<21&4294967295|x>>>11),x=v+(k^(I|~L))+S[12]+1700485571&4294967295,v=I+(x<<6&4294967295|x>>>26),x=L+(I^(v|~k))+S[3]+2399980690&4294967295,L=v+(x<<10&4294967295|x>>>22),x=k+(v^(L|~I))+S[10]+4293915773&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~v))+S[1]+2240044497&4294967295,I=k+(x<<21&4294967295|x>>>11),x=v+(k^(I|~L))+S[8]+1873313359&4294967295,v=I+(x<<6&4294967295|x>>>26),x=L+(I^(v|~k))+S[15]+4264355552&4294967295,L=v+(x<<10&4294967295|x>>>22),x=k+(v^(L|~I))+S[6]+2734768916&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~v))+S[13]+1309151649&4294967295,I=k+(x<<21&4294967295|x>>>11),x=v+(k^(I|~L))+S[4]+4149444226&4294967295,v=I+(x<<6&4294967295|x>>>26),x=L+(I^(v|~k))+S[11]+3174756917&4294967295,L=v+(x<<10&4294967295|x>>>22),x=k+(v^(L|~I))+S[2]+718787259&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~v))+S[9]+3951481745&4294967295,m.g[0]=m.g[0]+v&4294967295,m.g[1]=m.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,m.g[2]=m.g[2]+k&4294967295,m.g[3]=m.g[3]+L&4294967295}i.prototype.u=function(m,v){v===void 0&&(v=m.length);for(var I=v-this.blockSize,S=this.B,k=this.h,L=0;L<v;){if(k==0)for(;L<=I;)r(this,m,L),L+=this.blockSize;if(typeof m=="string"){for(;L<v;)if(S[k++]=m.charCodeAt(L++),k==this.blockSize){r(this,S),k=0;break}}else for(;L<v;)if(S[k++]=m[L++],k==this.blockSize){r(this,S),k=0;break}}this.h=k,this.o+=v},i.prototype.v=function(){var m=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);m[0]=128;for(var v=1;v<m.length-8;++v)m[v]=0;var I=8*this.o;for(v=m.length-8;v<m.length;++v)m[v]=I&255,I/=256;for(this.u(m),m=Array(16),v=I=0;4>v;++v)for(var S=0;32>S;S+=8)m[I++]=this.g[v]>>>S&255;return m};function s(m,v){var I=a;return Object.prototype.hasOwnProperty.call(I,m)?I[m]:I[m]=v(m)}function o(m,v){this.h=v;for(var I=[],S=!0,k=m.length-1;0<=k;k--){var L=m[k]|0;S&&L==v||(I[k]=L,S=!1)}this.g=I}var a={};function l(m){return-128<=m&&128>m?s(m,function(v){return new o([v|0],0>v?-1:0)}):new o([m|0],0>m?-1:0)}function c(m){if(isNaN(m)||!isFinite(m))return d;if(0>m)return P(c(-m));for(var v=[],I=1,S=0;m>=I;S++)v[S]=m/I|0,I*=4294967296;return new o(v,0)}function h(m,v){if(m.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(m.charAt(0)=="-")return P(h(m.substring(1),v));if(0<=m.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(v,8)),S=d,k=0;k<m.length;k+=8){var L=Math.min(8,m.length-k),x=parseInt(m.substring(k,k+L),v);8>L?(L=c(Math.pow(v,L)),S=S.j(L).add(c(x))):(S=S.j(I),S=S.add(c(x)))}return S}var d=l(0),f=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-P(this).m();for(var m=0,v=1,I=0;I<this.g.length;I++){var S=this.i(I);m+=(0<=S?S:4294967296+S)*v,v*=4294967296}return m},t.toString=function(m){if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(y(this))return"0";if(T(this))return"-"+P(this).toString(m);for(var v=c(Math.pow(m,6)),I=this,S="";;){var k=N(I,v).g;I=C(I,k.j(v));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(m);if(I=k,y(I))return L+S;for(;6>L.length;)L="0"+L;S=L+S}},t.i=function(m){return 0>m?0:m<this.g.length?this.g[m]:this.h};function y(m){if(m.h!=0)return!1;for(var v=0;v<m.g.length;v++)if(m.g[v]!=0)return!1;return!0}function T(m){return m.h==-1}t.l=function(m){return m=C(this,m),T(m)?-1:y(m)?0:1};function P(m){for(var v=m.g.length,I=[],S=0;S<v;S++)I[S]=~m.g[S];return new o(I,~m.h).add(f)}t.abs=function(){return T(this)?P(this):this},t.add=function(m){for(var v=Math.max(this.g.length,m.g.length),I=[],S=0,k=0;k<=v;k++){var L=S+(this.i(k)&65535)+(m.i(k)&65535),x=(L>>>16)+(this.i(k)>>>16)+(m.i(k)>>>16);S=x>>>16,L&=65535,x&=65535,I[k]=x<<16|L}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(m,v){return m.add(P(v))}t.j=function(m){if(y(this)||y(m))return d;if(T(this))return T(m)?P(this).j(P(m)):P(P(this).j(m));if(T(m))return P(this.j(P(m)));if(0>this.l(_)&&0>m.l(_))return c(this.m()*m.m());for(var v=this.g.length+m.g.length,I=[],S=0;S<2*v;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<m.g.length;k++){var L=this.i(S)>>>16,x=this.i(S)&65535,fe=m.i(k)>>>16,Fe=m.i(k)&65535;I[2*S+2*k]+=x*Fe,E(I,2*S+2*k),I[2*S+2*k+1]+=L*Fe,E(I,2*S+2*k+1),I[2*S+2*k+1]+=x*fe,E(I,2*S+2*k+1),I[2*S+2*k+2]+=L*fe,E(I,2*S+2*k+2)}for(S=0;S<v;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=v;S<2*v;S++)I[S]=0;return new o(I,0)};function E(m,v){for(;(m[v]&65535)!=m[v];)m[v+1]+=m[v]>>>16,m[v]&=65535,v++}function R(m,v){this.g=m,this.h=v}function N(m,v){if(y(v))throw Error("division by zero");if(y(m))return new R(d,d);if(T(m))return v=N(P(m),v),new R(P(v.g),P(v.h));if(T(v))return v=N(m,P(v)),new R(P(v.g),v.h);if(30<m.g.length){if(T(m)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var I=f,S=v;0>=S.l(m);)I=M(I),S=M(S);var k=z(I,1),L=z(S,1);for(S=z(S,2),I=z(I,2);!y(S);){var x=L.add(S);0>=x.l(m)&&(k=k.add(I),L=x),S=z(S,1),I=z(I,1)}return v=C(m,k.j(v)),new R(k,v)}for(k=d;0<=m.l(v);){for(I=Math.max(1,Math.floor(m.m()/v.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),L=c(I),x=L.j(v);T(x)||0<x.l(m);)I-=S,L=c(I),x=L.j(v);y(L)&&(L=f),k=k.add(L),m=C(m,x)}return new R(k,m)}t.A=function(m){return N(this,m).h},t.and=function(m){for(var v=Math.max(this.g.length,m.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)&m.i(S);return new o(I,this.h&m.h)},t.or=function(m){for(var v=Math.max(this.g.length,m.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)|m.i(S);return new o(I,this.h|m.h)},t.xor=function(m){for(var v=Math.max(this.g.length,m.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)^m.i(S);return new o(I,this.h^m.h)};function M(m){for(var v=m.g.length+1,I=[],S=0;S<v;S++)I[S]=m.i(S)<<1|m.i(S-1)>>>31;return new o(I,m.h)}function z(m,v){var I=v>>5;v%=32;for(var S=m.g.length-I,k=[],L=0;L<S;L++)k[L]=0<v?m.i(L+I)>>>v|m.i(L+I+1)<<32-v:m.i(L+I);return new o(k,m.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,$I=o}).apply(typeof ME<"u"?ME:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var g=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var b=u[w];if(!(b in g))break e;g=g[b]}u=u[u.length-1],w=g[u],p=p(w),p!=w&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,w=!1,b={next:function(){if(!w&&g<u.length){var j=g++;return{value:p(j,u[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,w),u.apply(p,b)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function _(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function y(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(w,b,j){for(var $=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)$[Ge-2]=arguments[Ge];return p.prototype[b].apply(w,$)}}function T(u){const p=u.length;if(0<p){const g=Array(p);for(let w=0;w<p;w++)g[w]=u[w];return g}return[]}function P(u,p){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const b=u.length||0,j=w.length||0;u.length=b+j;for(let $=0;$<j;$++)u[b+$]=w[$]}else u.push(w)}}class C{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var M=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function z(u,p,g){for(const w in u)p.call(g,u[w],w,u)}function m(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function v(u){const p={};for(const g in u)p[g]=u[g];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,p){let g,w;for(let b=1;b<arguments.length;b++){w=arguments[b];for(g in w)u[g]=w[g];for(let j=0;j<I.length;j++)g=I[j],Object.prototype.hasOwnProperty.call(w,g)&&(u[g]=w[g])}}function k(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function L(u){a.setTimeout(()=>{throw u},0)}function x(){var u=J;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class fe{constructor(){this.h=this.g=null}add(p,g){const w=Fe.get();w.set(p,g),this.h?this.h.next=w:this.g=w,this.h=w}}var Fe=new C(()=>new we,u=>u.reset());class we{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,V=!1,J=new fe,Q=()=>{const u=a.Promise.resolve(void 0);$e=()=>{u.then(he)}};var he=()=>{for(var u;u=x();){try{u.h.call(u.g)}catch(g){L(g)}var p=Fe;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}V=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function xe(u,p){if(le.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(M){e:{try{N(p.nodeName);var b=!0;break e}catch{}b=!1}b||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}y(xe,le);var De={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function zi(u,p,g,w,b){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!w,this.ha=b,this.key=++Vt,this.da=this.fa=!1}function It(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ir(u){this.src=u,this.g={},this.h=0}Ir.prototype.add=function(u,p,g,w,b){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var $=Vn(u,p,w,b);return-1<$?(p=u[$],g||(p.fa=!1)):(p=new zi(p,this.src,j,!!w,b),p.fa=g,u.push(p)),p};function dt(u,p){var g=p.type;if(g in u.g){var w=u.g[g],b=Array.prototype.indexOf.call(w,p,void 0),j;(j=0<=b)&&Array.prototype.splice.call(w,b,1),j&&(It(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Vn(u,p,g,w){for(var b=0;b<u.length;++b){var j=u[b];if(!j.da&&j.listener==p&&j.capture==!!g&&j.ha==w)return b}return-1}var An="closure_lm_"+(1e6*Math.random()|0),Sr={};function Nn(u,p,g,w,b){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Nn(u,p[j],g,w,b);return null}return g=ii(g),u&&u[Te]?u.K(p,g,c(w)?!!w.capture:!1,b):Ha(u,p,g,!1,w,b)}function Ha(u,p,g,w,b,j){if(!p)throw Error("Invalid event type");var $=c(b)?!!b.capture:!!b,Ge=ni(u);if(Ge||(u[An]=Ge=new Ir(u)),g=Ge.add(p,g,w,$,j),g.proxy)return g;if(w=_o(),g.proxy=w,w.src=u,w.listener=g,u.addEventListener)_t||(b=$),b===void 0&&(b=!1),u.addEventListener(p.toString(),w,b);else if(u.attachEvent)u.attachEvent(dn(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _o(){function u(g){return p.call(u.src,u.listener,g)}const p=Bi;return u}function Ts(u,p,g,w,b){if(Array.isArray(p))for(var j=0;j<p.length;j++)Ts(u,p[j],g,w,b);else w=c(w)?!!w.capture:!!w,g=ii(g),u&&u[Te]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],g=Vn(j,g,w,b),-1<g&&(It(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=ni(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Vn(p,g,w,b)),(g=-1<u?p[u]:null)&&en(g))}function en(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Te])dt(p.i,u);else{var g=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(g,w,u.capture):p.detachEvent?p.detachEvent(dn(g),w):p.addListener&&p.removeListener&&p.removeListener(w),(g=ni(p))?(dt(g,u),g.h==0&&(g.src=null,p[An]=null)):It(u)}}}function dn(u){return u in Sr?Sr[u]:Sr[u]="on"+u}function Bi(u,p){if(u.da)u=!0;else{p=new xe(p,this);var g=u.listener,w=u.ha||u.src;u.fa&&en(u),u=g.call(w,p)}return u}function ni(u){return u=u[An],u instanceof Ir?u:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ii(u){return typeof u=="function"?u:(u[fn]||(u[fn]=function(p){return u.handleEvent(p)}),u[fn])}function lt(){ie.call(this),this.i=new Ir(this),this.M=this,this.F=null}y(lt,ie),lt.prototype[Te]=!0,lt.prototype.removeEventListener=function(u,p,g,w){Ts(this,u,p,g,w)};function it(u,p){var g,w=u.F;if(w)for(g=[];w;w=w.F)g.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new le(p,u);else if(p instanceof le)p.target=p.target||u;else{var b=p;p=new le(w,u),S(p,b)}if(b=!0,g)for(var j=g.length-1;0<=j;j--){var $=p.g=g[j];b=tn($,w,!0,p)&&b}if($=p.g=u,b=tn($,w,!0,p)&&b,b=tn($,w,!1,p)&&b,g)for(j=0;j<g.length;j++)$=p.g=g[j],b=tn($,w,!1,p)&&b}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],w=0;w<g.length;w++)It(g[w]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,g,w){return this.i.add(String(u),p,!1,g,w)},lt.prototype.L=function(u,p,g,w){return this.i.add(String(u),p,!0,g,w)};function tn(u,p,g,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var b=!0,j=0;j<p.length;++j){var $=p[j];if($&&!$.da&&$.capture==g){var Ge=$.listener,bt=$.ha||$.src;$.fa&&dt(u.i,$),b=Ge.call(bt,w)!==!1&&b}}return b&&!w.defaultPrevented}function Ze(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function $a(u){u.g=Ze(()=>{u.g=null,u.i&&(u.i=!1,$a(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class yo extends ie{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:$a(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(u){ie.call(this),this.h=u,this.g={}}y(Is,ie);var ri=[];function Ka(u){z(u.g,function(p,g){this.g.hasOwnProperty(g)&&en(p)},u),u.g={}}Is.prototype.N=function(){Is.aa.N.call(this),Ka(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vo=a.JSON.stringify,cc=a.JSON.parse,Df=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Eo(){}Eo.prototype.h=null;function Ss(u){return u.h||(u.h=u.i())}function hc(){}var Vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rs(){le.call(this,"d")}y(Rs,le);function Ya(){le.call(this,"c")}y(Ya,le);var Wi={},dc=null;function wo(){return dc=dc||new lt}Wi.La="serverreachability";function xs(u){le.call(this,Wi.La,u)}y(xs,le);function Ii(u){const p=wo();it(p,new xs(p))}Wi.STAT_EVENT="statevent";function fc(u,p){le.call(this,Wi.STAT_EVENT,u),this.stat=p}y(fc,le);function Mt(u){const p=wo();it(p,new fc(p,u))}Wi.Ma="timingevent";function A(u,p){le.call(this,Wi.Ma,u),this.size=p}y(A,le);function D(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function F(){this.g=!0}F.prototype.xa=function(){this.g=!1};function W(u,p,g,w,b,j){u.info(function(){if(u.g)if(j)for(var $="",Ge=j.split("&"),bt=0;bt<Ge.length;bt++){var Ae=Ge[bt].split("=");if(1<Ae.length){var Wt=Ae[0];Ae=Ae[1];var Gt=Wt.split("_");$=2<=Gt.length&&Gt[1]=="type"?$+(Wt+"="+Ae+"&"):$+(Wt+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+w+") [attempt "+b+"]: "+p+`
`+g+`
`+$})}function K(u,p,g,w,b,j,$){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+b+"]: "+p+`
`+g+`
`+j+" "+$})}function ee(u,p,g,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+q(u,g)+(w?" "+w:"")})}function se(u,p){u.info(function(){return"TIMEOUT: "+p})}F.prototype.info=function(){};function q(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var w=g[u];if(!(2>w.length)){var b=w[1];if(Array.isArray(b)&&!(1>b.length)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<b.length;$++)b[$]=""}}}}return vo(g)}catch{return p}}var Z={NO_ERROR:0,TIMEOUT:8},Y={},te;function ue(){}y(ue,Eo),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},te=new ue;function de(u,p,g,w){this.j=u,this.i=p,this.l=g,this.R=w||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var je={},Ce={};function Ke(u,p,g){u.L=1,u.v=_c(Ki(p)),u.m=g,u.P=!0,Gi(u,null)}function Gi(u,p){u.F=Date.now(),nn(u),u.A=Ki(u.v);var g=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),rv(g.i,"t",w),u.C=0,g=u.j.J,u.h=new wt,u.g=Cv(u.j,g?p:null,!u.m),0<u.O&&(u.M=new yo(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,w=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(ri[0]=b.toString()),b=ri);for(var j=0;j<b.length;j++){var $=Nn(g,b[j],w||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Ii(),W(u.i,u.u,u.A,u.l,u.R,u.m)}de.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yi(u)==3?p.j():this.Y(u)},de.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Yi(this.g);var p=this.g.Ba();const So=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||hv(this.g)))){this.J||Gt!=4||p==7||(p==8||0>=So?Ii(3):Ii(2)),Hi(this);var g=this.g.Z();this.X=g;t:if(Rr(this)){var w=hv(this.g);u="";var b=w.length,j=Yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Ln(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<b;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(j&&p==b-1)});w.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,K(this.i,this.u,this.A,this.l,this.R,Gt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,bt=this.g;if((Ge=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ge)){var Ae=Ge;break t}}Ae=null}if(g=Ae)ee(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xr(this,g);else{this.o=!1,this.s=3,Mt(12),Wn(this),Ln(this);break e}}if(this.P){g=!0;let oi;for(;!this.J&&this.C<$.length;)if(oi=si(this,$),oi==Ce){Gt==4&&(this.s=4,Mt(14),g=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(oi==je){this.s=4,Mt(15),ee(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else ee(this.i,this.l,oi,null),xr(this,oi);if(Rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||$.length!=0||this.h.h||(this.s=1,Mt(16),g=!1),this.o=this.o&&g,!g)ee(this.i,this.l,$,"[Invalid Chunked Response]"),Wn(this),Ln(this);else if(0<$.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),jf(Wt),Wt.M=!0,Mt(11))}}else ee(this.i,this.l,$,null),xr(this,$);Gt==4&&Wn(this),this.o&&!this.J&&(Gt==4?yv(this.j,this):(this.o=!1,nn(this)))}else Sx(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Wn(this),Ln(this)}}}catch{}finally{}};function Rr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function si(u,p){var g=u.C,w=p.indexOf(`
`,g);return w==-1?Ce:(g=Number(p.substring(g,w)),isNaN(g)?je:(w+=1,w+g>p.length?Ce:(p=p.slice(w,w+g),u.C=w+g,p)))}de.prototype.cancel=function(){this.J=!0,Wn(this)};function nn(u){u.S=Date.now()+u.I,Co(u,u.I)}function Co(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=D(f(u.ba,u),p)}function Hi(u){u.B&&(a.clearTimeout(u.B),u.B=null)}de.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(se(this.i,this.A),this.L!=2&&(Ii(),Mt(17)),Wn(this),this.s=2,Ln(this)):Co(this,this.S-u)};function Ln(u){u.j.G==0||u.J||yv(u.j,u)}function Wn(u){Hi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ka(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function xr(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||rt(g.h,u))){if(!u.K&&rt(g.h,u)&&g.G==3){try{var w=g.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var b=w;if(b[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Tc(g),wc(g);else break e;Ff(g),Mt(18)}}else g.za=b[1],0<g.za-g.T&&37500>b[2]&&g.F&&g.v==0&&!g.C&&(g.C=D(f(g.Za,g),6e3));if(1>=Pr(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ks(g,11)}else if((u.K||g.g==u)&&Tc(g),!E(p))for(b=g.Da.g.parse(p),p=0;p<b.length;p++){let Ae=b[p];if(g.T=Ae[0],Ae=Ae[1],g.G==2)if(Ae[0]=="c"){g.K=Ae[1],g.ia=Ae[2];const Wt=Ae[3];Wt!=null&&(g.la=Wt,g.j.info("VER="+g.la));const Gt=Ae[4];Gt!=null&&(g.Aa=Gt,g.j.info("SVER="+g.Aa));const So=Ae[5];So!=null&&typeof So=="number"&&0<So&&(w=1.5*So,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const oi=u.g;if(oi){const Ic=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ic){var j=w.h;j.g||Ic.indexOf("spdy")==-1&&Ic.indexOf("quic")==-1&&Ic.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Si(j,j.h),j.h=null))}if(w.D){const Uf=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Uf&&(w.ya=Uf,Je(w.I,w.D,Uf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var $=u;if(w.qa=wv(w,w.J?w.ia:null,w.W),$.K){Xa(w.h,$);var Ge=$,bt=w.L;bt&&(Ge.I=bt),Ge.B&&(Hi(Ge),nn(Ge)),w.g=$}else mv(w);0<g.i.length&&Cc(g)}else Ae[0]!="stop"&&Ae[0]!="close"||ks(g,7);else g.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?ks(g,7):bf(g):Ae[0]!="noop"&&g.l&&g.l.ta(Ae),g.v=0)}}Ii(4)}catch{}}var Ie=class{constructor(u,p){this.g=u,this.map=p}};function Qe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $i(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pr(u){return u.h?1:u.g?u.g.size:0}function rt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Si(u,p){u.g?u.g.add(p):u.h=p}function Xa(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Qe.prototype.cancel=function(){if(this.i=pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function pc(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return T(u.i)}function cx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,w=0;w<g;w++)p.push(u[w]);return p}p=[],g=0;for(w in u)p[g++]=u[w];return p}function hx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const w in u)p[g++]=w;return p}}}function Qy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=hx(u),w=cx(u),b=w.length,j=0;j<b;j++)p.call(void 0,w[j],g&&g[j],u)}var Jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dx(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var w=u[g].indexOf("="),b=null;if(0<=w){var j=u[g].substring(0,w);b=u[g].substring(w+1)}else j=u[g];p(j,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ps(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ps){this.h=u.h,gc(this,u.j),this.o=u.o,this.g=u.g,mc(this,u.s),this.l=u.l;var p=u.i,g=new Qa;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),ev(this,g),this.m=u.m}else u&&(p=String(u).match(Jy))?(this.h=!1,gc(this,p[1]||"",!0),this.o=qa(p[2]||""),this.g=qa(p[3]||"",!0),mc(this,p[4]),this.l=qa(p[5]||"",!0),ev(this,p[6]||"",!0),this.m=qa(p[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}Ps.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Za(p,tv,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Za(p,tv,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Za(g,g.charAt(0)=="/"?gx:px,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Za(g,_x)),u.join("")};function Ki(u){return new Ps(u)}function gc(u,p,g){u.j=g?qa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function mc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ev(u,p,g){p instanceof Qa?(u.i=p,yx(u.i,u.h)):(g||(p=Za(p,mx)),u.i=new Qa(p,u.h))}function Je(u,p,g){u.i.set(p,g)}function _c(u){return Je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Za(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,fx),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tv=/[#\/\?@]/g,px=/[#\?:]/g,gx=/[#\?]/g,mx=/[#\?@]/g,_x=/#/g;function Qa(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function kr(u){u.g||(u.g=new Map,u.h=0,u.i&&dx(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Qa.prototype,t.add=function(u,p){kr(this),this.i=null,u=To(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function nv(u,p){kr(u),p=To(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function iv(u,p){return kr(u),p=To(u,p),u.g.has(p)}t.forEach=function(u,p){kr(this),this.g.forEach(function(g,w){g.forEach(function(b){u.call(p,b,w,this)},this)},this)},t.na=function(){kr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let w=0;w<p.length;w++){const b=u[w];for(let j=0;j<b.length;j++)g.push(p[w])}return g},t.V=function(u){kr(this);let p=[];if(typeof u=="string")iv(this,u)&&(p=p.concat(this.g.get(To(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return kr(this),this.i=null,u=To(this,u),iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function rv(u,p,g){nv(u,p),0<g.length&&(u.i=null,u.g.set(To(u,p),T(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var w=p[g];const j=encodeURIComponent(String(w)),$=this.V(w);for(w=0;w<$.length;w++){var b=j;$[w]!==""&&(b+="="+encodeURIComponent(String($[w]))),u.push(b)}}return this.i=u.join("&")};function To(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function yx(u,p){p&&!u.j&&(kr(u),u.i=null,u.g.forEach(function(g,w){var b=w.toLowerCase();w!=b&&(nv(this,w),rv(this,b,g))},u)),u.j=p}function vx(u,p){const g=new F;if(a.Image){const w=new Image;w.onload=_(Ar,g,"TestLoadImage: loaded",!0,p,w),w.onerror=_(Ar,g,"TestLoadImage: error",!1,p,w),w.onabort=_(Ar,g,"TestLoadImage: abort",!1,p,w),w.ontimeout=_(Ar,g,"TestLoadImage: timeout",!1,p,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function Ex(u,p){const g=new F,w=new AbortController,b=setTimeout(()=>{w.abort(),Ar(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(j=>{clearTimeout(b),j.ok?Ar(g,"TestPingServer: ok",!0,p):Ar(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(b),Ar(g,"TestPingServer: error",!1,p)})}function Ar(u,p,g,w,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),w(g)}catch{}}function wx(){this.g=new Df}function Cx(u,p,g){const w=g||"";try{Qy(u,function(b,j){let $=b;c(b)&&($=vo(b)),p.push(w+j+"="+encodeURIComponent($))})}catch(b){throw p.push(w+"type="+encodeURIComponent("_badmap")),b}}function yc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(yc,Eo),yc.prototype.g=function(){return new vc(this.l,this.j)},yc.prototype.i=function(u){return function(){return u}}({});function vc(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(vc,lt),t=vc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,el(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,el(this)),this.g&&(this.readyState=3,el(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ja(this):el(this),this.readyState==3&&sv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ja(this))},t.Qa=function(u){this.g&&(this.response=u,Ja(this))},t.ga=function(){this.g&&Ja(this)};function Ja(u){u.readyState=4,u.l=null,u.j=null,u.v=null,el(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function el(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ov(u){let p="";return z(u,function(g,w){p+=w,p+=":",p+=g,p+=`\r
`}),p}function Mf(u,p,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=ov(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Je(u,p,g))}function yt(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(yt,lt);var Tx=/^https?$/i,Ix=["POST","PUT"];t=yt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Ss(this.o):Ss(te),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){av(this,j);return}if(u=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var b in w)g.set(b,w[b]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())g.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ix,p,void 0))||w||b||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of g)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cv(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){av(this,j)}};function av(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,lv(u),Ec(u)}function lv(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,it(this,"complete"),it(this,"abort"),Ec(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ec(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uv(this):this.bb())},t.bb=function(){uv(this)};function uv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Yi(u)!=4||u.Z()!=2)){if(u.u&&Yi(u)==4)Ze(u.Ea,0,u);else if(it(u,"readystatechange"),Yi(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var w;if(w=$===0){var b=String(u.D).match(Jy)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),w=!Tx.test(b?b.toLowerCase():"")}g=w}if(g)it(u,"complete"),it(u,"success");else{u.m=6;try{var j=2<Yi(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",lv(u)}}finally{Ec(u)}}}}function Ec(u,p){if(u.g){cv(u);const g=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||it(u,"ready");try{g.onreadystatechange=w}catch{}}}function cv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Yi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Yi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),cc(p)}};function hv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sx(u){const p={};u=(u.g&&2<=Yi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(E(u[w]))continue;var g=k(u[w]);const b=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=p[b]||[];p[b]=j,j.push(g)}m(p,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tl(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function dv(u){this.Aa=0,this.i=[],this.j=new F,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tl("baseRetryDelayMs",5e3,u),this.cb=tl("retryDelaySeedMs",1e4,u),this.Wa=tl("forwardChannelMaxRetries",2,u),this.wa=tl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(u&&u.concurrentRequestLimit),this.Da=new wx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dv.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,w){Mt(0),this.W=u,this.H=p||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=wv(this,null,this.W),Cc(this)};function bf(u){if(fv(u),u.G==3){var p=u.U++,g=Ki(u.I);if(Je(g,"SID",u.K),Je(g,"RID",p),Je(g,"TYPE","terminate"),nl(u,g),p=new de(u,u.j,p),p.L=2,p.v=_c(Ki(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Cv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),nn(p)}Ev(u)}function wc(u){u.g&&(jf(u),u.g.cancel(),u.g=null)}function fv(u){wc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Tc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Cc(u){if(!$i(u.h)&&!u.s){u.s=!0;var p=u.Ga;$e||Q(),V||($e(),V=!0),J.add(p,u),u.B=0}}function Rx(u,p){return Pr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=D(f(u.Ga,u,p),vv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const b=new de(this,this.j,u);let j=this.o;if(this.S&&(j?(j=v(j),S(j,this.S)):j=this.S),this.m!==null||this.O||(b.H=j,j=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=gv(this,b,p),g=Ki(this.I),Je(g,"RID",u),Je(g,"CVER",22),this.D&&Je(g,"X-HTTP-Session-Id",this.D),nl(this,g),j&&(this.O?p="headers="+encodeURIComponent(String(ov(j)))+"&"+p:this.m&&Mf(g,this.m,j)),Si(this.h,b),this.Ua&&Je(g,"TYPE","init"),this.P?(Je(g,"$req",p),Je(g,"SID","null"),b.T=!0,Ke(b,g,null)):Ke(b,g,p),this.G=2}}else this.G==3&&(u?pv(this,u):this.i.length==0||$i(this.h)||pv(this))};function pv(u,p){var g;p?g=p.l:g=u.U++;const w=Ki(u.I);Je(w,"SID",u.K),Je(w,"RID",g),Je(w,"AID",u.T),nl(u,w),u.m&&u.o&&Mf(w,u.m,u.o),g=new de(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=gv(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Si(u.h,g),Ke(g,w,p)}function nl(u,p){u.H&&z(u.H,function(g,w){Je(p,w,g)}),u.l&&Qy({},function(g,w){Je(p,w,g)})}function gv(u,p,g){g=Math.min(u.i.length,g);var w=u.l?f(u.l.Na,u.l,u):null;e:{var b=u.i;let j=-1;for(;;){const $=["count="+g];j==-1?0<g?(j=b[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let Ge=!0;for(let bt=0;bt<g;bt++){let Ae=b[bt].g;const Wt=b[bt].map;if(Ae-=j,0>Ae)j=Math.max(0,b[bt].g-100),Ge=!1;else try{Cx(Wt,$,"req"+Ae+"_")}catch{w&&w(Wt)}}if(Ge){w=$.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,w}function mv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;$e||Q(),V||($e(),V=!0),J.add(p,u),u.v=0}}function Ff(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=D(f(u.Fa,u),vv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,_v(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=D(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),wc(this),_v(this))};function jf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function _v(u){u.g=new de(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Ki(u.qa);Je(p,"RID","rpc"),Je(p,"SID",u.K),Je(p,"AID",u.T),Je(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Je(p,"TO",u.ja),Je(p,"TYPE","xmlhttp"),nl(u,p),u.m&&u.o&&Mf(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=_c(Ki(p)),g.m=null,g.P=!0,Gi(g,u)}t.Za=function(){this.C!=null&&(this.C=null,wc(this),Ff(this),Mt(19))};function Tc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function yv(u,p){var g=null;if(u.g==p){Tc(u),jf(u),u.g=null;var w=2}else if(rt(u.h,p))g=p.D,Xa(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var b=u.B;w=wo(),it(w,new A(w,g)),Cc(u)}else mv(u);else if(b=p.s,b==3||b==0&&0<p.X||!(w==1&&Rx(u,p)||w==2&&Ff(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),b){case 1:ks(u,5);break;case 4:ks(u,10);break;case 3:ks(u,6);break;default:ks(u,2)}}}function vv(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function ks(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),w=u.Xa;const b=!w;w=new Ps(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gc(w,"https"),_c(w),b?vx(w.toString(),g):Ex(w.toString(),g)}else Mt(2);u.G=0,u.l&&u.l.sa(p),Ev(u),fv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Ev(u){if(u.G=0,u.ka=[],u.l){const p=pc(u.h);(p.length!=0||u.i.length!=0)&&(P(u.ka,p),P(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function wv(u,p,g){var w=g instanceof Ps?Ki(g):new Ps(g);if(w.g!="")p&&(w.g=p+"."+w.g),mc(w,w.s);else{var b=a.location;w=b.protocol,p=p?p+"."+b.hostname:b.hostname,b=+b.port;var j=new Ps(null);w&&gc(j,w),p&&(j.g=p),b&&mc(j,b),g&&(j.l=g),w=j}return g=u.D,p=u.ya,g&&p&&Je(w,g,p),Je(w,"VER",u.la),nl(u,w),w}function Cv(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new yt(new yc({eb:g})):new yt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tv(){}t=Tv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gn(u,p){lt.call(this),this.g=new dv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!E(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Io(this)}y(Gn,lt),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){bf(this.g)},Gn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=vo(u),u=g);p.i.push(new Ie(p.Ya++,u)),p.G==3&&Cc(p)},Gn.prototype.N=function(){this.g.l=null,delete this.j,bf(this.g),delete this.g,Gn.aa.N.call(this)};function Iv(u){Rs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}y(Iv,Rs);function Sv(){Ya.call(this),this.status=1}y(Sv,Ya);function Io(u){this.g=u}y(Io,Tv),Io.prototype.ua=function(){it(this.g,"a")},Io.prototype.ta=function(u){it(this.g,new Iv(u))},Io.prototype.sa=function(u){it(this.g,new Sv)},Io.prototype.ra=function(){it(this.g,"b")},Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Z.NO_ERROR=0,Z.TIMEOUT=8,Z.HTTP_ERROR=6,Y.COMPLETE="complete",hc.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",lt.prototype.listen=lt.prototype.K,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Jd("@firebase/firestore");function pi(t,...e){if(Ra.logLevel<=Le.DEBUG){const n=e.map(F_);Ra.debug(`Firestore (${qu}): ${t}`,...n)}}function KI(t,...e){if(Ra.logLevel<=Le.ERROR){const n=e.map(F_);Ra.error(`Firestore (${qu}): ${t}`,...n)}}function PD(t,...e){if(Ra.logLevel<=Le.WARN){const n=e.map(F_);Ra.warn(`Firestore (${qu}): ${t}`,...n)}}function F_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t="Unexpected state"){const e=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: `+t;throw KI(e),new Error(e)}function Hl(t,e){t||j_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class vn extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class AD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ND{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Hl(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new $l;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $l,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{pi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(pi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $l)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(pi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Hl(typeof i.accessToken=="string"),new YI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Hl(e===null||typeof e=="string"),new on(e)}}class LD{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OD{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new LD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Hl(this.o===void 0);const i=s=>{s.error!=null&&pi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,pi("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{pi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):pi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Hl(typeof n.token=="string"),this.R=n.token,new DD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bD(t){return t.name==="IndexedDbTransactionError"}class ad{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ad("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ad&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FE,Se;(Se=FE||(FE={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new $I([4294967295,4294967295],0);function Cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&pi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new $l,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new U_(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vn(yn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var jE,UE;(UE=jE||(jE={})).ea="default",UE.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map;function UD(t,e,n,i){if(e===!0&&i===!0)throw new vn(yn.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zD(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j_()}function BD(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vn(yn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zD(t);throw new vn(yn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new vn(yn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new vn(yn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jD((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vn(yn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vn(yn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vn(yn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XI{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vn(yn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new vn(yn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kD;switch(i.type){case"firstParty":return new OD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new vn(yn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=zE.get(n);i&&(pi("ComponentProvider","Removing Datastore"),zE.delete(n),i.terminate())}(this),Promise.resolve()}}function VD(t,e,n,i={}){var r;const s=(t=BD(t,XI))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&PD("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=on.MOCK_USER;else{a=rI(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new vn(yn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new on(c)}t._authCredentials=new AD(new YI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new FD(this,"async_queue_retry"),this.Vu=()=>{const i=Cp();i&&pi("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Cp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $l;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bD(e))throw e;pi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw KI("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=U_.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&j_()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class WD extends XI{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new VE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VE(e),this._firestoreClient=void 0,await e}}}function GD(t,e){const n=typeof t=="object"?t:x_(),i=typeof t=="string"?t:"(default)",r=ef(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=tI("firestore");s&&VD(r,...s)}return r}(function(e,n=!0){(function(r){qu=r})(co),to(new cs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new WD(new ND(i.getProvider("auth-internal")),new MD(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new vn(yn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ad(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mi(bE,"4.7.3",e),Mi(bE,"4.7.3","esm2017")})();var WE={};const GE="@firebase/database",HE="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qI="";function HD(t){qI=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Lt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Eu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $D(e)}}catch{}return new KD},Vs=ZI("localStorage"),YD=ZI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Jd("@firebase/database"),XD=function(){let t=1;return function(){return t++}}(),QI=function(t){const e=oN(t),n=new nN;n.update(e);const i=n.digest();return C_.encodeByteArray(i)},Zu=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Zu.apply(null,i):typeof i=="object"?e+=Lt(i):e+=i,e+=" "}return e};let Kl=null,$E=!0;const qD=function(t,e){H(!0,"Can't turn on custom loggers persistently."),ca.logLevel=Le.VERBOSE,Kl=ca.log.bind(ca)},qt=function(...t){if($E===!0&&($E=!1,Kl===null&&YD.get("logging_enabled")===!0&&qD()),Kl){const e=Zu.apply(null,t);Kl(e)}},Qu=function(t){return function(...e){qt(t,...e)}},qg=function(...t){const e="FIREBASE INTERNAL ERROR: "+Zu(...t);ca.error(e)},mr=function(...t){const e=`FIREBASE FATAL ERROR: ${Zu(...t)}`;throw ca.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+Zu(...t);ca.warn(e)},ZD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},JI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xa="[MIN_NAME]",ro="[MAX_NAME]",Ua=function(t,e){if(t===e)return 0;if(t===xa||e===ro)return-1;if(e===xa||t===ro)return 1;{const n=KE(t),i=KE(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},JD=function(t,e){return t===e?0:t<e?-1:1},pl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Lt(e))},z_=function(t){if(typeof t!="object"||t===null)return Lt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Lt(e[i]),n+=":",n+=z_(t[e[i]]);return n+="}",n},eS=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Pn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const tS=function(t){H(!JI(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(h.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},eM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function nM(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const iM=new RegExp("^-?(0*)\\d{1,10}$"),rM=-2147483648,sM=2147483647,KE=function(t){if(iM.test(t)){const e=Number(t);if(e>=rM&&e<=sM)return e}return null},za=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},oM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class wh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}wh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="5",nS="v",iS="s",rS="r",sS="f",oS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aS="ls",lS="p",Zg="ac",uS="websocket",cS="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uM(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dS(t,e,n){H(typeof e=="string","typeof type must == string"),H(typeof n=="object","typeof params must == object");let i;if(e===uS)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cS)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uM(t)&&(n.ns=t.namespace);const r=[];return Pn(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.counters_={}}incrementCounter(e,n=1){wr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return UA(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp={},Ip={};function V_(t){const e=t.toString();return Tp[e]||(Tp[e]=new cM),Tp[e]}function hM(t,e){const n=t.toString();return Ip[n]||(Ip[n]=e()),Ip[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&za(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="start",fM="close",pM="pLPCommand",gM="pRTLPCB",fS="id",pS="pw",gS="ser",mM="cb",_M="seg",yM="ts",vM="d",EM="dframe",mS=1870,_S=30,wM=mS-_S,CM=25e3,TM=3e4;class Qo{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qu(e),this.stats_=V_(n),this.urlFn=l=>(this.appCheckToken&&(l[Zg]=this.appCheckToken),dS(n,cS,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new dM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(TM)),QD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new W_((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===YE)this.id=a,this.password=l;else if(o===fM)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[YE]="t",i[gS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[mM]=this.scriptTagHolder.uniqueCallbackIdentifier),i[nS]=B_,this.transportSessionId&&(i[iS]=this.transportSessionId),this.lastSessionId&&(i[aS]=this.lastSessionId),this.applicationId&&(i[lS]=this.applicationId),this.appCheckToken&&(i[Zg]=this.appCheckToken),typeof location<"u"&&location.hostname&&oS.test(location.hostname)&&(i[rS]=sS);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qo.forceAllow_=!0}static forceDisallow(){Qo.forceDisallow_=!0}static isAvailable(){return Qo.forceAllow_?!0:!Qo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eM()&&!tM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=QT(n),r=eS(i,wM);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[EM]="t",i[fS]=e,i[pS]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Lt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class W_{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=XD(),window[pM+this.uniqueCallbackIdentifier]=e,window[gM+this.uniqueCallbackIdentifier]=n,this.myIFrame=W_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){qt("frame writing exception"),a.stack&&qt(a.stack),qt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||qt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fS]=this.myID,e[pS]=this.myPW,e[gS]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_S+i.length<=mS;){const o=this.pendingSegs.shift();i=i+"&"+_M+r+"="+o.seg+"&"+yM+r+"="+o.ts+"&"+vM+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(CM)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{qt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=16384,SM=45e3;let ld=null;typeof MozWebSocket<"u"?ld=MozWebSocket:typeof WebSocket<"u"&&(ld=WebSocket);class fi{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qu(this.connId),this.stats_=V_(n),this.connURL=fi.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[nS]=B_,typeof location<"u"&&location.hostname&&oS.test(location.hostname)&&(o[rS]=sS),n&&(o[iS]=n),i&&(o[aS]=i),r&&(o[Zg]=r),s&&(o[lS]=s),dS(e,uS,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vs.set("previous_websocket_failure",!0);try{let i;YA(),this.mySock=new ld(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ld!==null&&!fi.forceDisallow_}static previouslyFailed(){return Vs.isInMemoryStorage||Vs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Eu(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(H(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Lt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=eS(n,IM);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(SM))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fi.responsesRequiredToBeHealthy=2;fi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Qo,fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=fi&&fi.isAvailable();let i=n&&!fi.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[fi];else{const r=this.transports_=[];for(const s of Iu.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Iu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Iu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=6e4,xM=5e3,PM=10*1024,kM=100*1024,Sp="t",XE="d",AM="s",qE="r",NM="e",ZE="o",QE="a",JE="n",ew="p",LM="h";class OM{constructor(e,n,i,r,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qu("c:"+this.id+":"),this.transportManager_=new Iu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Yl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kM?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>PM?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sp in e){const n=e[Sp];n===QE?this.upgradeIfSecondaryHealthy_():n===qE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ZE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=pl("t",e),i=pl("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ew,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:QE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:JE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=pl("t",e),i=pl("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=pl(Sp,e);if(XE in e){const i=e[XE];if(n===LM){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===JE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AM?this.onConnectionShutdown_(i):n===qE?this.onReset_(i):n===NM?qg("Server Error: "+i):n===ZE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),B_!==i&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Yl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(RM))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xM))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ew,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){H(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends vS{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!I_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ud}getInitialEvent(e){return H(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=32,nw=768;class He{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Oe(){return new He("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function hs(t){return t.pieces_.length-t.pieceNum_}function Xe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function ES(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function DM(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wS(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function CS(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function Rt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof He)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new He(n,0)}function ve(t){return t.pieceNum_>=t.pieces_.length}function Cn(t,e){const n=me(t),i=me(e);if(n===null)return e;if(n===i)return Cn(Xe(t),Xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function G_(t,e){if(hs(t)!==hs(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function gi(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(hs(t)>hs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class MM{constructor(e,n){this.errorPrefix_=n,this.parts_=wS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Qd(this.parts_[i]);TS(this)}}function bM(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Qd(e),TS(t)}function FM(t){const e=t.parts_.pop();t.byteLength_-=Qd(e),t.parts_.length>0&&(t.byteLength_-=1)}function TS(t){if(t.byteLength_>nw)throw new Error(t.errorPrefix_+"has a key path longer than "+nw+" bytes ("+t.byteLength_+").");if(t.parts_.length>tw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tw+") or object contains a cycle "+Ms(t))}function Ms(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends vS{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new H_}getInitialEvent(e){return H(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=1e3,jM=60*5*1e3,iw=30*1e3,UM=1.3,zM=3e4,BM="server_kill",rw=3;class ur extends yS{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ur.nextPersistentConnectionId_++,this.log_=Qu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gl,this.maxReconnectDelay_=jM,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");H_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ud.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(Lt(s)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Zd,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ur.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wr(e,"w")){const i=Sa(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),H(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Lt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):qg("Unrecognized action received from server: "+Lt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zM&&(this.reconnectDelay_=gl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UM)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ur.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(d){H(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?qt("getToken() completed but was canceled"):(qt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new OM(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,_=>{xn(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(BM)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&xn(d),l())}}}interrupt(e){qt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zg(this.interruptReasons_)&&(this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>z_(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new He(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){qt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=rw&&(this.reconnectDelay_=iw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){qt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=rw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+qI.replace(/\./g,"-")]=1,I_()?e["framework.cordova"]=1:sI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ud.getInstance().currentlyOnline();return zg(this.interruptReasons_)&&e}}ur.nextPersistentConnectionId_=0;ur.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _e(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new _e(xa,e),r=new _e(xa,n);return this.compare(i,r)!==0}minPost(){return _e.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc;class IS extends sf{static get __EMPTY_NODE(){return Hc}static set __EMPTY_NODE(e){Hc=e}compare(e,n){return Ua(e.name,n.name)}isDefinedOn(e){throw ba("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _e.MIN}maxPost(){return new _e(ro,Hc)}makePost(e,n){return H(typeof e=="string","KeyIndex indexValue must always be a string."),new _e(e,Hc)}toString(){return".key"}}const ha=new IS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class At{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??At.RED,this.left=r??Tn.EMPTY_NODE,this.right=s??Tn.EMPTY_NODE}copy(e,n,i,r,s){return new At(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Tn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}At.RED=!0;At.BLACK=!1;class VM{copy(e,n,i,r,s){return this}insert(e,n,i){return new At(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Tn{constructor(e,n=Tn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Tn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))}remove(e){return new Tn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $c(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $c(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $c(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $c(this.root_,null,this.comparator_,!0,e)}}Tn.EMPTY_NODE=new VM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t,e){return Ua(t.name,e.name)}function $_(t,e){return Ua(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg;function GM(t){Qg=t}const SS=function(t){return typeof t=="number"?"number:"+tS(t):"string:"+t},RS=function(t){if(t.isLeafNode()){const e=t.val();H(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wr(e,".sv"),"Priority must be a string or number.")}else H(t===Qg||t.isEmpty(),"priority of unexpected type.");H(t===Qg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sw;class Pt{constructor(e,n=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RS(this.priorityNode_)}static set __childrenNodeConstructor(e){sw=e}static get __childrenNodeConstructor(){return sw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ve(e)?this:me(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=me(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(H(i!==".priority"||hs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+SS(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=tS(this.value_):e+=this.value_,this.lazyHash_=QI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:(H(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Pt.VALUE_TYPE_ORDER.indexOf(n),s=Pt.VALUE_TYPE_ORDER.indexOf(i);return H(r>=0,"Unknown leaf type: "+n),H(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xS,PS;function HM(t){xS=t}function $M(t){PS=t}class KM extends sf{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Ua(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(ro,new Pt("[PRIORITY-POST]",PS))}makePost(e,n){const i=xS(e);return new _e(n,new Pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const mt=new KM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=Math.log(2);class XM{constructor(e){const n=s=>parseInt(Math.log(s)/YM,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cd=function(t,e,n,i){t.sort(e);const r=function(l,c){const h=c-l;let d,f;if(h===0)return null;if(h===1)return d=t[l],f=n?n(d):d,new At(f,d.node,At.BLACK,null,null);{const _=parseInt(h/2,10)+l,y=r(l,_),T=r(_+1,c);return d=t[_],f=n?n(d):d,new At(f,d.node,At.BLACK,y,T)}},s=function(l){let c=null,h=null,d=t.length;const f=function(y,T){const P=d-y,C=d;d-=y;const E=r(P+1,C),R=t[P],N=n?n(R):R;_(new At(N,R.node,T,null,E))},_=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const T=l.nextBitIsOne(),P=Math.pow(2,l.count-(y+1));T?f(P,At.BLACK):(f(P,At.BLACK),f(P,At.RED))}return h},o=new XM(t.length),a=s(o);return new Tn(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp;const Po={};class rr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return H(Po&&mt,"ChildrenNode.ts has not been loaded"),Rp=Rp||new rr({".priority":Po},{".priority":mt}),Rp}get(e){const n=Sa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Tn?n:null}hasIndex(e){return wr(this.indexSet_,e.toString())}addIndex(e,n){H(e!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(_e.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=cd(i,e.getCompare()):a=Po;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new rr(h,c)}addToIndexes(e,n){const i=Jh(this.indexes_,(r,s)=>{const o=Sa(this.indexSet_,s);if(H(o,"Missing index implementation for "+s),r===Po)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(_e.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),cd(a,o.getCompare())}else return Po;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new _e(e.name,a))),l.insert(e,e.node)}});return new rr(i,this.indexSet_)}removeFromIndexes(e,n){const i=Jh(this.indexes_,r=>{if(r===Po)return r;{const s=n.get(e.name);return s?r.remove(new _e(e.name,s)):r}});return new rr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class ae{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RS(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ml||(ml=new ae(new Tn($_),null,rr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ml}updatePriority(e){return this.children_.isEmpty()?this:new ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ml:n}}getChild(e){const n=me(e);return n===null?this:this.getImmediateChild(n).getChild(Xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(H(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new _e(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?ml:this.priorityNode_;return new ae(r,o,s)}}updateChild(e,n){const i=me(e);if(i===null)return n;{H(me(e)!==".priority"||hs(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Xe(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(mt,(o,a)=>{n[o]=a.val(e),i++,s&&ae.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+SS(this.getPriority().val())+":"),this.forEachChild(mt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":QI(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new _e(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new _e(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new _e(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,_e.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,_e.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ju?-1:0}withIndex(e){if(e===ha||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ha||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(mt),r=n.getIterator(mt);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ha?null:this.indexMap_.get(e.toString())}}ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qM extends ae{constructor(){super(new Tn($_),ae.EMPTY_NODE,rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ae.EMPTY_NODE}isEmpty(){return!1}}const Ju=new qM;Object.defineProperties(_e,{MIN:{value:new _e(xa,ae.EMPTY_NODE)},MAX:{value:new _e(ro,Ju)}});IS.__EMPTY_NODE=ae.EMPTY_NODE;Pt.__childrenNodeConstructor=ae;GM(Ju);$M(Ju);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=!0;function Ut(t,e=null){if(t===null)return ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),H(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pt(n,Ut(e))}if(!(t instanceof Array)&&ZM){const n=[];let i=!1;if(Pn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ut(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new _e(o,l)))}}),n.length===0)return ae.EMPTY_NODE;const s=cd(n,WM,o=>o.name,$_);if(i){const o=cd(n,mt.getCompare());return new ae(s,Ut(e),new rr({".priority":o},{".priority":mt}))}else return new ae(s,Ut(e),rr.Default)}else{let n=ae.EMPTY_NODE;return Pn(t,(i,r)=>{if(wr(t,i)&&i.substring(0,1)!=="."){const s=Ut(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Ut(e))}}HM(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM extends sf{constructor(e){super(),this.indexPath_=e,H(!ve(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Ua(e.name,n.name):s}makePost(e,n){const i=Ut(e),r=ae.EMPTY_NODE.updateChild(this.indexPath_,i);return new _e(n,r)}maxPost(){const e=ae.EMPTY_NODE.updateChild(this.indexPath_,Ju);return new _e(ro,e)}toString(){return wS(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM extends sf{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Ua(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,n){const i=Ut(e);return new _e(n,i)}toString(){return".value"}}const eb=new JM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){return{type:"value",snapshotNode:t}}function Pa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Su(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ru(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function tb(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Su(n,a)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Pa(n,i)):o.trackChildChange(Ru(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(mt,(r,s)=>{n.hasChild(r)||i.trackChildChange(Su(r,s))}),n.isLeafNode()||n.forEachChild(mt,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Ru(r,s,o))}else i.trackChildChange(Pa(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.indexedFilter_=new K_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xu.getStartPost_(e),this.endPost_=xu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new _e(n,i))||(i=ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ae.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ae.EMPTY_NODE);const s=this;return n.forEachChild(mt,(o,a)=>{s.matches(new _e(o,a))||(r=r.updateImmediateChild(o,ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new _e(n,i))||(i=ae.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ae.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,_)=>d(_,f)}else o=this.index_.getCompare();const a=e;H(a.numChildren()===this.limit_,"");const l=new _e(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=r.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const _=f==null?1:o(f,l);if(h&&!i.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(Ru(n,i,d)),a.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Su(n,d));const T=a.updateImmediateChild(n,ae.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Pa(f.name,f.node)),T.updateImmediateChild(f.name,f.node)):T}}else return i.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Su(c.name,c.node)),s.trackChildChange(Pa(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xa}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ro}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mt}copy(){const e=new Y_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ib(t){return t.loadsAllData()?new K_(t.getIndex()):t.hasLimit()?new nb(t):new xu(t)}function ow(t){const e={};if(t.isDefault())return e;let n;if(t.index_===mt?n="$priority":t.index_===eb?n="$value":t.index_===ha?n="$key":(H(t.index_ instanceof QM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Lt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Lt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Lt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Lt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Lt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function aw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==mt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends yS{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Qu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=hd.getListenId_(e,i),a={};this.listens_[o]=a;const l=ow(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),Sa(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,n){const i=hd.getListenId_(e,n);delete this.listens_[i]}get(e){const n=ow(e._queryParams),i=e._path.toString(),r=new Zd;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fa(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Eu(a.responseText)}catch{xn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&xn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(){return{value:null,children:new Map}}function AS(t,e,n){if(ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=me(e);t.children.has(i)||t.children.set(i,dd());const r=t.children.get(i);e=Xe(e),AS(r,e,n)}}function Jg(t,e,n){t.value!==null?n(e,t.value):sb(t,(i,r)=>{const s=new He(e.toString()+"/"+i);Jg(r,s,n)})}function sb(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Pn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=10*1e3,ab=30*1e3,lb=5*60*1e3;class ub{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ob(e);const i=lw+(ab-lw)*Math.random();Yl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Pn(e,(r,s)=>{s>0&&wr(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Yl(this.reportStats_.bind(this),Math.floor(Math.random()*2*lb))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mi||(mi={}));function NS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function X_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function q_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=mi.ACK_USER_WRITE,this.source=NS()}operationForChild(e){if(ve(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new He(e));return new fd(Oe(),n,this.revert)}}else return H(me(this.path)===e,"operationForChild called for unrelated child."),new fd(Xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.source=e,this.path=n,this.type=mi.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new Pu(this.source,Oe()):new Pu(this.source,Xe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=mi.OVERWRITE}operationForChild(e){return ve(this.path)?new so(this.source,Oe(),this.snap.getImmediateChild(e)):new so(this.source,Xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=mi.MERGE}operationForChild(e){if(ve(this.path)){const n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new so(this.source,Oe(),n.value):new ku(this.source,Oe(),n)}else return H(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ku(this.source,Xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hb(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(tb(o.childName,o.snapshotNode))}),_l(t,r,"child_removed",e,i,n),_l(t,r,"child_added",e,i,n),_l(t,r,"child_moved",s,i,n),_l(t,r,"child_changed",e,i,n),_l(t,r,"value",e,i,n),r}function _l(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>fb(t,a,l)),o.forEach(a=>{const l=db(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function db(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function fb(t,e,n){if(e.childName==null||n.childName==null)throw ba("Should only compare child_ events.");const i=new _e(e.childName,e.snapshotNode),r=new _e(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){return{eventCache:t,serverCache:e}}function Xl(t,e,n,i){return of(new oo(e,n,i),t.serverCache)}function LS(t,e,n,i){return of(t.eventCache,new oo(e,n,i))}function em(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ao(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp;const pb=()=>(xp||(xp=new Tn(JD)),xp);class tt{constructor(e,n=pb()){this.value=e,this.children=n}static fromObject(e){let n=new tt(null);return Pn(e,(i,r)=>{n=n.set(new He(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Oe(),value:this.value};if(ve(e))return null;{const i=me(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Xe(e),n);return s!=null?{path:Rt(new He(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const n=me(e),i=this.children.get(n);return i!==null?i.subtree(Xe(e)):new tt(null)}}set(e,n){if(ve(e))return new tt(n,this.children);{const i=me(e),s=(this.children.get(i)||new tt(null)).set(Xe(e),n),o=this.children.insert(i,s);return new tt(this.value,o)}}remove(e){if(ve(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const n=me(e),i=this.children.get(n);if(i){const r=i.remove(Xe(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new tt(null):new tt(this.value,s)}else return this}}get(e){if(ve(e))return this.value;{const n=me(e),i=this.children.get(n);return i?i.get(Xe(e)):null}}setTree(e,n){if(ve(e))return n;{const i=me(e),s=(this.children.get(i)||new tt(null)).setTree(Xe(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new tt(this.value,o)}}fold(e){return this.fold_(Oe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Rt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Oe(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ve(e))return null;{const s=me(e),o=this.children.get(s);return o?o.findOnPath_(Xe(e),Rt(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Oe(),n)}foreachOnPath_(e,n,i){if(ve(e))return this;{this.value&&i(n,this.value);const r=me(e),s=this.children.get(r);return s?s.foreachOnPath_(Xe(e),Rt(n,r),i):new tt(null)}}foreach(e){this.foreach_(Oe(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Rt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.writeTree_=e}static empty(){return new vi(new tt(null))}}function ql(t,e,n){if(ve(e))return new vi(new tt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Cn(r,e);return s=s.updateChild(o,n),new vi(t.writeTree_.set(r,s))}else{const r=new tt(n),s=t.writeTree_.setTree(e,r);return new vi(s)}}}function uw(t,e,n){let i=t;return Pn(n,(r,s)=>{i=ql(i,Rt(e,r),s)}),i}function cw(t,e){if(ve(e))return vi.empty();{const n=t.writeTree_.setTree(e,new tt(null));return new vi(n)}}function tm(t,e){return fo(t,e)!=null}function fo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Cn(n.path,e)):null}function hw(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(mt,(i,r)=>{e.push(new _e(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new _e(i,r.value))}),e}function as(t,e){if(ve(e))return t;{const n=fo(t,e);return n!=null?new vi(new tt(n)):new vi(t.writeTree_.subtree(e))}}function nm(t){return t.writeTree_.isEmpty()}function ka(t,e){return OS(Oe(),t.writeTree_,e)}function OS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(H(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=OS(Rt(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Rt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e){return FS(e,t)}function gb(t,e,n,i,r){H(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=ql(t.visibleWrites,e,n)),t.lastWriteId=i}function mb(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function _b(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);H(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&yb(a,i.path)?r=!1:gi(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return vb(t),!0;if(i.snap)t.visibleWrites=cw(t.visibleWrites,i.path);else{const a=i.children;Pn(a,l=>{t.visibleWrites=cw(t.visibleWrites,Rt(i.path,l))})}return!0}else return!1}function yb(t,e){if(t.snap)return gi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gi(Rt(t.path,n),e))return!0;return!1}function vb(t){t.visibleWrites=DS(t.allWrites,Eb,Oe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Eb(t){return t.visible}function DS(t,e,n){let i=vi.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)gi(n,o)?(a=Cn(n,o),i=ql(i,a,s.snap)):gi(o,n)&&(a=Cn(o,n),i=ql(i,Oe(),s.snap.getChild(a)));else if(s.children){if(gi(n,o))a=Cn(n,o),i=uw(i,a,s.children);else if(gi(o,n))if(a=Cn(o,n),ve(a))i=uw(i,Oe(),s.children);else{const l=Sa(s.children,me(a));if(l){const c=l.getChild(Xe(a));i=ql(i,Oe(),c)}}}else throw ba("WriteRecord should have .snap or .children")}}return i}function MS(t,e,n,i,r){if(!i&&!r){const s=fo(t.visibleWrites,e);if(s!=null)return s;{const o=as(t.visibleWrites,e);if(nm(o))return n;if(n==null&&!tm(o,Oe()))return null;{const a=n||ae.EMPTY_NODE;return ka(o,a)}}}else{const s=as(t.visibleWrites,e);if(!r&&nm(s))return n;if(!r&&n==null&&!tm(s,Oe()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(gi(c.path,e)||gi(e,c.path))},a=DS(t.allWrites,o,e),l=n||ae.EMPTY_NODE;return ka(a,l)}}}function wb(t,e,n){let i=ae.EMPTY_NODE;const r=fo(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(mt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=as(t.visibleWrites,e);return n.forEachChild(mt,(o,a)=>{const l=ka(as(s,new He(o)),a);i=i.updateImmediateChild(o,l)}),hw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=as(t.visibleWrites,e);return hw(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Cb(t,e,n,i,r){H(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Rt(e,n);if(tm(t.visibleWrites,s))return null;{const o=as(t.visibleWrites,s);return nm(o)?r.getChild(n):ka(o,r.getChild(n))}}function Tb(t,e,n,i){const r=Rt(e,n),s=fo(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=as(t.visibleWrites,r);return ka(o,i.getNode().getImmediateChild(n))}else return null}function Ib(t,e){return fo(t.visibleWrites,e)}function Sb(t,e,n,i,r,s,o){let a;const l=as(t.visibleWrites,e),c=fo(l,Oe());if(c!=null)a=c;else if(n!=null)a=ka(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let _=f.getNext();for(;_&&h.length<r;)d(_,i)!==0&&h.push(_),_=f.getNext();return h}else return[]}function Rb(){return{visibleWrites:vi.empty(),allWrites:[],lastWriteId:-1}}function pd(t,e,n,i){return MS(t.writeTree,t.treePath,e,n,i)}function Q_(t,e){return wb(t.writeTree,t.treePath,e)}function dw(t,e,n,i){return Cb(t.writeTree,t.treePath,e,n,i)}function gd(t,e){return Ib(t.writeTree,Rt(t.treePath,e))}function xb(t,e,n,i,r,s){return Sb(t.writeTree,t.treePath,e,n,i,r,s)}function J_(t,e,n){return Tb(t.writeTree,t.treePath,e,n)}function bS(t,e){return FS(Rt(t.treePath,e),t.writeTree)}function FS(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;H(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),H(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Ru(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Su(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,Pa(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Ru(i,e.snapshotNode,r.oldSnap));else throw ba("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const jS=new kb;class ey{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return J_(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ao(this.viewCache_),s=xb(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){return{filter:t}}function Nb(t,e){H(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),H(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Lb(t,e,n,i,r){const s=new Pb;let o,a;if(n.type===mi.OVERWRITE){const c=n;c.source.fromUser?o=im(t,e,c.path,c.snap,i,r,s):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ve(c.path),o=md(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===mi.MERGE){const c=n;c.source.fromUser?o=Db(t,e,c.path,c.children,i,r,s):(H(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=rm(t,e,c.path,c.children,i,r,a,s))}else if(n.type===mi.ACK_USER_WRITE){const c=n;c.revert?o=Fb(t,e,c.path,i,r,s):o=Mb(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===mi.LISTEN_COMPLETE)o=bb(t,e,n.path,i,s);else throw ba("Unknown operation type: "+n.type);const l=s.getChanges();return Ob(e,o,l),{viewCache:o,changes:l}}function Ob(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=em(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(kS(em(e)))}}function US(t,e,n,i,r,s){const o=e.eventCache;if(gd(i,n)!=null)return e;{let a,l;if(ve(n))if(H(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ao(e),h=c instanceof ae?c:ae.EMPTY_NODE,d=Q_(i,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=pd(i,ao(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=me(n);if(c===".priority"){H(hs(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=dw(i,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Xe(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=dw(i,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(h,f):d=o.getNode().getImmediateChild(c)}else d=J_(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,s):a=o.getNode()}}return Xl(e,a,o.isFullyInitialized()||ve(n),t.filter.filtersNodes())}}function md(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(ve(n))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,i);c=h.updateFullNode(l.getNode(),_,null)}else{const _=me(n);if(!l.isCompleteForPath(n)&&hs(n)>1)return e;const y=Xe(n),P=l.getNode().getImmediateChild(_).updateChild(y,i);_===".priority"?c=h.updatePriority(l.getNode(),P):c=h.updateChild(l.getNode(),_,P,y,jS,null)}const d=LS(e,c,l.isFullyInitialized()||ve(n),h.filtersNodes()),f=new ey(r,d,s);return US(t,d,n,r,f,a)}function im(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const h=new ey(r,e,s);if(ve(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Xl(e,c,!0,t.filter.filtersNodes());else{const d=me(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Xl(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Xe(n),_=a.getNode().getImmediateChild(d);let y;if(ve(f))y=i;else{const T=h.getCompleteChild(d);T!=null?ES(f)===".priority"&&T.getChild(CS(f)).isEmpty()?y=T:y=T.updateChild(f,i):y=ae.EMPTY_NODE}if(_.equals(y))l=e;else{const T=t.filter.updateChild(a.getNode(),d,y,f,h,o);l=Xl(e,T,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function fw(t,e){return t.eventCache.isCompleteForChild(e)}function Db(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const h=Rt(n,l);fw(e,me(h))&&(a=im(t,a,h,c,r,s,o))}),i.foreach((l,c)=>{const h=Rt(n,l);fw(e,me(h))||(a=im(t,a,h,c,r,s,o))}),a}function pw(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function rm(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ve(n)?c=i:c=new tt(null).setTree(n,i);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),y=pw(t,_,f);l=md(t,l,new He(d),y,r,s,o,a)}}),c.children.inorderTraversal((d,f)=>{const _=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!_){const y=e.serverCache.getNode().getImmediateChild(d),T=pw(t,y,f);l=md(t,l,new He(d),T,r,s,o,a)}}),l}function Mb(t,e,n,i,r,s,o){if(gd(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(ve(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return md(t,e,n,l.getNode().getChild(n),r,s,a,o);if(ve(n)){let c=new tt(null);return l.getNode().forEachChild(ha,(h,d)=>{c=c.set(new He(h),d)}),rm(t,e,n,c,r,s,a,o)}else return e}else{let c=new tt(null);return i.foreach((h,d)=>{const f=Rt(n,h);l.isCompleteForPath(f)&&(c=c.set(h,l.getNode().getChild(f)))}),rm(t,e,n,c,r,s,a,o)}}function bb(t,e,n,i,r){const s=e.serverCache,o=LS(e,s.getNode(),s.isFullyInitialized()||ve(n),s.isFiltered());return US(t,o,n,i,jS,r)}function Fb(t,e,n,i,r,s){let o;if(gd(i,n)!=null)return e;{const a=new ey(i,e,r),l=e.eventCache.getNode();let c;if(ve(n)||me(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=pd(i,ao(e));else{const d=e.serverCache.getNode();H(d instanceof ae,"serverChildren would be complete if leaf node"),h=Q_(i,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=me(n);let d=J_(i,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Xe(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,ae.EMPTY_NODE,Xe(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pd(i,ao(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||gd(i,Oe())!=null,Xl(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jb=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new K_(i.getIndex()),s=ib(i);this.processor_=Ab(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(ae.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),h=new oo(l,o.isFullyInitialized(),r.filtersNodes()),d=new oo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=of(d,h),this.eventGenerator_=new cb(this.query_)}get query(){return this.query_}};function Ub(t){return t.viewCache_.serverCache.getNode()}function zb(t,e){const n=ao(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ve(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function gw(t){return t.eventRegistrations_.length===0}function Bb(t,e){t.eventRegistrations_.push(e)}function mw(t,e,n){const i=[];if(n){H(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function _w(t,e,n,i){e.type===mi.MERGE&&e.source.queryId!==null&&(H(ao(t.viewCache_),"We should always have a full cache before handling merges"),H(em(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=Lb(t.processor_,r,e,n,i);return Nb(t.processor_,s.viewCache),H(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,zS(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Vb(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(mt,(s,o)=>{i.push(Pa(s,o))}),n.isFullyInitialized()&&i.push(kS(n.getNode())),zS(t,i,n.getNode(),e)}function zS(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return hb(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d;class Wb{constructor(){this.views=new Map}}function Gb(t){H(!_d,"__referenceConstructor has already been defined"),_d=t}function Hb(){return H(_d,"Reference.ts has not been loaded"),_d}function $b(t){return t.views.size===0}function ty(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return H(s!=null,"SyncTree gave us an op for an invalid query."),_w(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(_w(o,e,n,i));return s}}function Kb(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=pd(n,r?i:null),l=!1;a?l=!0:i instanceof ae?(a=Q_(n,i),l=!1):(a=ae.EMPTY_NODE,l=!1);const c=of(new oo(a,l,!1),new oo(i,r,!1));return new jb(e,c)}return o}function Yb(t,e,n,i,r,s){const o=Kb(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Bb(o,n),Vb(o,n)}function Xb(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=ds(t);if(r==="default")for(const[l,c]of t.views.entries())o=o.concat(mw(c,n,i)),gw(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(mw(l,n,i)),gw(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ds(t)&&s.push(new(Hb())(e._repo,e._path)),{removed:s,events:o}}function BS(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function da(t,e){let n=null;for(const i of t.views.values())n=n||zb(i,e);return n}function VS(t,e){if(e._queryParams.loadsAllData())return af(t);{const i=e._queryIdentifier;return t.views.get(i)}}function WS(t,e){return VS(t,e)!=null}function ds(t){return af(t)!=null}function af(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd;function qb(t){H(!yd,"__referenceConstructor has already been defined"),yd=t}function Zb(){return H(yd,"Reference.ts has not been loaded"),yd}let Qb=1;class yw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=Rb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function GS(t,e,n,i,r){return gb(t.pendingWriteTree_,e,n,i,r),r?ec(t,new so(NS(),e,n)):[]}function Ws(t,e,n=!1){const i=mb(t.pendingWriteTree_,e);if(_b(t.pendingWriteTree_,e)){let s=new tt(null);return i.snap!=null?s=s.set(Oe(),!0):Pn(i.children,o=>{s=s.set(new He(o),!0)}),ec(t,new fd(i.path,s,n))}else return[]}function lf(t,e,n){return ec(t,new so(X_(),e,n))}function Jb(t,e,n){const i=tt.fromObject(n);return ec(t,new ku(X_(),e,i))}function eF(t,e){return ec(t,new Pu(X_(),e))}function tF(t,e,n){const i=iy(t,n);if(i){const r=ry(i),s=r.path,o=r.queryId,a=Cn(s,e),l=new Pu(q_(o),a);return sy(t,s,l)}else return[]}function sm(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||WS(o,e))){const l=Xb(o,e,n,i);$b(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const h=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,_)=>ds(_));if(h&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const _=rF(f);for(let y=0;y<_.length;++y){const T=_[y],P=T.query,C=KS(t,T);t.listenProvider_.startListening(Zl(P),vd(t,P),C.hashFn,C.onComplete)}}}!d&&c.length>0&&!i&&(h?t.listenProvider_.stopListening(Zl(e),null):c.forEach(f=>{const _=t.queryToTagMap.get(uf(f));t.listenProvider_.stopListening(Zl(f),_)}))}sF(t,c)}return a}function nF(t,e,n,i){const r=iy(t,i);if(r!=null){const s=ry(r),o=s.path,a=s.queryId,l=Cn(o,e),c=new so(q_(a),l,n);return sy(t,o,c)}else return[]}function iF(t,e,n,i){const r=iy(t,i);if(r){const s=ry(r),o=s.path,a=s.queryId,l=Cn(o,e),c=tt.fromObject(n),h=new ku(q_(a),l,c);return sy(t,o,h)}else return[]}function vw(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(f,_)=>{const y=Cn(f,r);s=s||da(_,y),o=o||ds(_)});let a=t.syncPointTree_.get(r);a?(o=o||ds(a),s=s||da(a,Oe())):(a=new Wb,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=ae.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((_,y)=>{const T=da(y,Oe());T&&(s=s.updateImmediateChild(_,T))}));const c=WS(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=uf(e);H(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const _=oF();t.queryToTagMap.set(f,_),t.tagToQueryMap.set(_,f)}const h=Z_(t.pendingWriteTree_,r);let d=Yb(a,e,n,h,s,l);if(!c&&!o&&!i){const f=VS(a,e);d=d.concat(aF(t,e,f))}return d}function ny(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Cn(o,e),c=da(a,l);if(c)return c});return MS(r,e,s,n,!0)}function ec(t,e){return HS(e,t.syncPointTree_,null,Z_(t.pendingWriteTree_,Oe()))}function HS(t,e,n,i){if(ve(t.path))return $S(t,e,n,i);{const r=e.get(Oe());n==null&&r!=null&&(n=da(r,Oe()));let s=[];const o=me(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=bS(i,o);s=s.concat(HS(a,l,c,h))}return r&&(s=s.concat(ty(r,t,i,n))),s}}function $S(t,e,n,i){const r=e.get(Oe());n==null&&r!=null&&(n=da(r,Oe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=bS(i,o),h=t.operationForChild(o);h&&(s=s.concat($S(h,a,l,c)))}),r&&(s=s.concat(ty(r,t,i,n))),s}function KS(t,e){const n=e.query,i=vd(t,n);return{hashFn:()=>(Ub(e)||ae.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?tF(t,n._path,i):eF(t,n._path);{const s=nM(r,n);return sm(t,n,null,s)}}}}function vd(t,e){const n=uf(e);return t.queryToTagMap.get(n)}function uf(t){return t._path.toString()+"$"+t._queryIdentifier}function iy(t,e){return t.tagToQueryMap.get(e)}function ry(t){const e=t.indexOf("$");return H(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function sy(t,e,n){const i=t.syncPointTree_.get(e);H(i,"Missing sync point for query tag that we're tracking");const r=Z_(t.pendingWriteTree_,e);return ty(i,n,r,null)}function rF(t){return t.fold((e,n,i)=>{if(n&&ds(n))return[af(n)];{let r=[];return n&&(r=BS(n)),Pn(i,(s,o)=>{r=r.concat(o)}),r}})}function Zl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Zb())(t._repo,t._path):t}function sF(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=uf(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function oF(){return Qb++}function aF(t,e,n){const i=e._path,r=vd(t,e),s=KS(t,n),o=t.listenProvider_.startListening(Zl(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)H(!ds(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!ve(c)&&h&&ds(h))return[af(h).query];{let f=[];return h&&(f=f.concat(BS(h).map(_=>_.query))),Pn(d,(_,y)=>{f=f.concat(y)}),f}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Zl(h),vd(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new oy(n)}node(){return this.node_}}class ay{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Rt(this.path_,e);return new ay(this.syncTree_,n)}node(){return ny(this.syncTree_,this.path_)}}const lF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ew=function(t,e,n){if(!t||typeof t!="object")return t;if(H(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return uF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cF(t[".sv"],e);H(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},uF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:H(!1,"Unexpected server value: "+t)}},cF=function(t,e,n){t.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&H(!1,"Unexpected increment value: "+i);const r=e.node();if(H(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},hF=function(t,e,n,i){return ly(e,new ay(n,t),i)},YS=function(t,e,n){return ly(t,new oy(e),n)};function ly(t,e,n){const i=t.getPriority().val(),r=Ew(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Ew(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Pt(a,Ut(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Pt(r))),o.forEachChild(mt,(a,l)=>{const c=ly(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function cy(t,e){let n=e instanceof He?e:new He(e),i=t,r=me(n);for(;r!==null;){const s=Sa(i.node.children,r)||{children:{},childCount:0};i=new uy(r,i,s),n=Xe(n),r=me(n)}return i}function Ba(t){return t.node.value}function XS(t,e){t.node.value=e,om(t)}function qS(t){return t.node.childCount>0}function dF(t){return Ba(t)===void 0&&!qS(t)}function cf(t,e){Pn(t.node.children,(n,i)=>{e(new uy(n,t,i))})}function ZS(t,e,n,i){n&&e(t),cf(t,r=>{ZS(r,e,!0)})}function fF(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function tc(t){return new He(t.parent===null?t.name:tc(t.parent)+"/"+t.name)}function om(t){t.parent!==null&&pF(t.parent,t.name,t)}function pF(t,e,n){const i=dF(n),r=wr(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,om(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,om(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=/[\[\].#$\/\u0000-\u001F\u007F]/,mF=/[\[\].#$\u0000-\u001F\u007F]/,Pp=10*1024*1024,QS=function(t){return typeof t=="string"&&t.length!==0&&!gF.test(t)},JS=function(t){return typeof t=="string"&&t.length!==0&&!mF.test(t)},_F=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),JS(t)},yF=function(t,e,n,i){hy(S_(t,"value"),e,n)},hy=function(t,e,n){const i=n instanceof He?new MM(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ms(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ms(i)+" with contents = "+e.toString());if(JI(e))throw new Error(t+"contains "+e.toString()+" "+Ms(i));if(typeof e=="string"&&e.length>Pp/3&&Qd(e)>Pp)throw new Error(t+"contains a string greater than "+Pp+" utf8 bytes "+Ms(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Pn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!QS(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ms(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bM(i,o),hy(t,a,i),FM(i)}),r&&s)throw new Error(t+' contains ".value" child '+Ms(i)+" in addition to actual children.")}},eR=function(t,e,n,i){if(!JS(n))throw new Error(S_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),eR(t,e,n)},EF=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},wF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!QS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_F(n))throw new Error(S_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dy(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!G_(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function tR(t,e,n){dy(t,n),nR(t,i=>G_(i,e))}function _r(t,e,n){dy(t,n),nR(t,i=>gi(i,e)||gi(e,i))}function nR(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(TF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function TF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Kl&&qt("event: "+n.toString()),za(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="repo_interrupt",SF=25;class RF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dd(),this.transactionQueueTree_=new uy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xF(t,e,n){if(t.stats_=V_(t.repoInfo_),t.forceRestClient_||oM())t.server_=new hd(t.repoInfo_,(i,r,s,o)=>{ww(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Cw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Lt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new ur(t.repoInfo_,e,(i,r,s,o)=>{ww(t,i,r,s,o)},i=>{Cw(t,i)},i=>{kF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=hM(t.repoInfo_,()=>new ub(t.stats_,t.server_)),t.infoData_=new rb,t.infoSyncTree_=new yw({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=lf(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),py(t,"connected",!1),t.serverSyncTree_=new yw({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);_r(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function PF(t){const n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fy(t){return lF({timestamp:PF(t)})}function ww(t,e,n,i,r){t.dataUpdateCount++;const s=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=Jh(n,c=>Ut(c));o=iF(t.serverSyncTree_,s,l,r)}else{const l=Ut(n);o=nF(t.serverSyncTree_,s,l,r)}else if(i){const l=Jh(n,c=>Ut(c));o=Jb(t.serverSyncTree_,s,l)}else{const l=Ut(n);o=lf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=hf(t,s)),_r(t.eventQueue_,a,o)}function Cw(t,e){py(t,"connected",e),e===!1&&NF(t)}function kF(t,e){Pn(e,(n,i)=>{py(t,n,i)})}function py(t,e,n){const i=new He("/.info/"+e),r=Ut(n);t.infoData_.updateSnapshot(i,r);const s=lf(t.infoSyncTree_,i,r);_r(t.eventQueue_,i,s)}function iR(t){return t.nextWriteId_++}function AF(t,e,n,i,r){gy(t,"set",{path:e.toString(),value:n,priority:i});const s=fy(t),o=Ut(n,i),a=ny(t.serverSyncTree_,e),l=YS(o,a,s),c=iR(t),h=GS(t.serverSyncTree_,e,l,c,!0);dy(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,_)=>{const y=f==="ok";y||xn("set at "+e+" failed: "+f);const T=Ws(t.serverSyncTree_,c,!y);_r(t.eventQueue_,e,T),MF(t,r,f,_)});const d=lR(t,e);hf(t,d),_r(t.eventQueue_,d,[])}function NF(t){gy(t,"onDisconnectEvents");const e=fy(t),n=dd();Jg(t.onDisconnect_,Oe(),(r,s)=>{const o=hF(r,s,t.serverSyncTree_,e);AS(n,r,o)});let i=[];Jg(n,Oe(),(r,s)=>{i=i.concat(lf(t.serverSyncTree_,r,s));const o=lR(t,r);hf(t,o)}),t.onDisconnect_=dd(),_r(t.eventQueue_,Oe(),i)}function LF(t,e,n){let i;me(e._path)===".info"?i=vw(t.infoSyncTree_,e,n):i=vw(t.serverSyncTree_,e,n),tR(t.eventQueue_,e._path,i)}function OF(t,e,n){let i;me(e._path)===".info"?i=sm(t.infoSyncTree_,e,n):i=sm(t.serverSyncTree_,e,n),tR(t.eventQueue_,e._path,i)}function DF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(IF)}function gy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),qt(n,...e)}function MF(t,e,n,i){e&&za(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function rR(t,e,n){return ny(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function my(t,e=t.transactionQueueTree_){if(e||df(t,e),Ba(e)){const n=oR(t,e);H(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&bF(t,tc(e),n)}else qS(e)&&cf(e,n=>{my(t,n)})}function bF(t,e,n){const i=n.map(c=>c.currentWriteId),r=rR(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];H(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Cn(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{gy(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Ws(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();df(t,cy(t.transactionQueueTree_,e)),my(t,t.transactionQueueTree_),_r(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)za(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}hf(t,e)}},o)}function hf(t,e){const n=sR(t,e),i=tc(n),r=oR(t,n);return FF(t,r,i),i}function FF(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Cn(n,l.path);let h=!1,d;if(H(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,r=r.concat(Ws(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=SF)h=!0,d="maxretry",r=r.concat(Ws(t.serverSyncTree_,l.currentWriteId,!0));else{const f=rR(t,l.path,o);l.currentInputSnapshot=f;const _=e[a].update(f.val());if(_!==void 0){hy("transaction failed: Data returned ",_,l.path);let y=Ut(_);typeof _=="object"&&_!=null&&wr(_,".priority")||(y=y.updatePriority(f.getPriority()));const P=l.currentWriteId,C=fy(t),E=YS(y,f,C);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=E,l.currentWriteId=iR(t),o.splice(o.indexOf(P),1),r=r.concat(GS(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),r=r.concat(Ws(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",r=r.concat(Ws(t.serverSyncTree_,l.currentWriteId,!0))}_r(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}df(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)za(i[a]);my(t,t.transactionQueueTree_)}function sR(t,e){let n,i=t.transactionQueueTree_;for(n=me(e);n!==null&&Ba(i)===void 0;)i=cy(i,n),e=Xe(e),n=me(e);return i}function oR(t,e){const n=[];return aR(t,e,n),n.sort((i,r)=>i.order-r.order),n}function aR(t,e,n){const i=Ba(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);cf(e,r=>{aR(t,r,n)})}function df(t,e){const n=Ba(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,XS(e,n.length>0?n:void 0)}cf(e,i=>{df(t,i)})}function lR(t,e){const n=tc(sR(t,e)),i=cy(t.transactionQueueTree_,e);return fF(i,r=>{kp(t,r)}),kp(t,i),ZS(i,r=>{kp(t,r)}),n}function kp(t,e){const n=Ba(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(H(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(H(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Ws(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?XS(e,void 0):n.length=s+1,_r(t.eventQueue_,tc(e),r);for(let o=0;o<i.length;o++)za(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function UF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Tw=function(t,e){const n=zF(t),i=n.namespace;n.domain==="firebase.com"&&mr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&mr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ZD();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hS(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new He(n.pathString)}},zF=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=jF(t.substring(h,d)));const f=UF(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Lt(this.snapshot.exportVal())}}class VF{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ve(this._path)?null:ES(this._path)}get ref(){return new ws(this._repo,this._path)}get _queryIdentifier(){const e=aw(this._queryParams),n=z_(e);return n==="{}"?"default":n}get _queryObject(){return aw(this._queryParams)}isEqual(e){if(e=kn(e),!(e instanceof _y))return!1;const n=this._repo===e._repo,i=G_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+DM(this._path)}}class ws extends _y{constructor(e,n){super(e,n,new Y_,!1)}get parent(){const e=CS(this._path);return e===null?null:new ws(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ed{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new He(e),i=am(this.ref,e);return new Ed(this._node.getChild(n),i,mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Ed(r,am(this.ref,i),mt)))}hasChild(e){const n=new He(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yy(t,e){return t=kn(t),t._checkNotDeleted("ref"),e!==void 0?am(t._root,e):t._root}function am(t,e){return t=kn(t),me(t._path)===null?vF("child","path",e):eR("child","path",e),new ws(t._repo,Rt(t._path,e))}function GF(t,e){t=kn(t),EF("set",t._path),yF("set",e,t._path);const n=new Zd;return AF(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class vy{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new BF("value",this,new Ed(e.snapshotNode,new ws(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new VF(this,e,n):null}matches(e){return e instanceof vy?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function HF(t,e,n,i,r){const s=new WF(n,void 0),o=new vy(s);return LF(t._repo,t,o),()=>OF(t._repo,t,o)}function $F(t,e,n,i){return HF(t,"value",e)}Gb(ws);qb(ws);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="FIREBASE_DATABASE_EMULATOR_HOST",lm={};let YF=!1;function XF(t,e,n,i){t.repoInfo_=new hS(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function qF(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||mr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Tw(s,r),a=o.repoInfo,l;typeof process<"u"&&WE&&(l=WE[KF]),l?(s=`http://${l}?ns=${a.namespace}`,o=Tw(s,r),a=o.repoInfo):o.repoInfo.secure;const c=new lM(t.name,t.options,e);wF("Invalid Firebase Database URL",o),ve(o.path)||mr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=QF(a,t,c,new aM(t.name,n));return new JF(h,t)}function ZF(t,e){const n=lm[e];(!n||n[t.key]!==t)&&mr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DF(t),delete n[t.key]}function QF(t,e,n,i){let r=lm[e.name];r||(r={},lm[e.name]=r);let s=r[t.toURLString()];return s&&mr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new RF(t,YF,n,i),r[t.toURLString()]=s,s}class JF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(xF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ws(this._repo,Oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ZF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mr("Cannot call "+e+" on a deleted database.")}}function e4(t=x_(),e){const n=ef(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=tI("database");i&&t4(n,...i)}return n}function t4(t,e,n,i={}){t=kn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&mr("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&mr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new wh(wh.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:rI(i.mockUserToken,t.app.options.projectId);s=new wh(o)}XF(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){HD(co),to(new cs("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return qF(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Mi(GE,HE,t),Mi(GE,HE,"esm2017")}ur.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ur.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};n4();const uR={apiKey:"AQ.Ab8RN6I1chAGautJJSzRkKxV_PWu4uu8txsqwUimSlmhL2dnQg",authDomain:"friendly-2fb02.firebaseapp.com",projectId:"friendly-2fb02",storageBucket:"friendly-2fb02.firebasestorage.app",messagingSenderId:"111111111111",appId:"1:111111111111:web:abcdef123456",databaseURL:"https://friendly-2fb02-default-rtdb.europe-west1.firebasedatabase.app"};uR.apiKey||console.warn("Firebase API key is missing. Check your environment variables.");const Ey=uI(uR),Nl=RD(Ey);GD(Ey);const wy=e4(Ey),cR=U.createContext(void 0);function i4({children:t}){const[e,n]=U.useState(null),[i,r]=U.useState(!0);U.useEffect(()=>{const o=gO(Nl,a=>{n(a),r(!1)});return()=>o()},[]);const s={user:e,loading:i};return O.jsx(cR.Provider,{value:s,children:t})}function r4(){const t=U.useContext(cR);if(!t)throw new Error("useAuthContext must be used within AuthProvider");return t}const s4="_homeContainer_11zn4_1",o4="_eventsColumn_11zn4_14",a4="_mapColumn_11zn4_24",l4="_chatColumn_11zn4_34",Kc={homeContainer:s4,eventsColumn:o4,mapColumn:a4,chatColumn:l4};class Cs{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Au={PROPERTYCHANGE:"propertychange"};class Cy{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ff(t,e){return t>e?1:t<e?-1:0}function Ty(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=t[r];if(s===e)return r;if(s<e)return n(e,t[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function u4(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function pf(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function c4(t,e,n){const i=e||ff;return t.every(function(r,s){if(s===0)return!0;const o=i(t[s-1],r);return!(o>0||o===0)})}function wd(){return!0}function gf(){return!1}function Cd(){}function h4(t){let e=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!pf(s,i))&&(e=!0,r=this,i=s,n=t.apply(this,arguments)),n}}function d4(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function mf(t){for(const e in t)delete t[e]}function hR(t){let e;for(e in t)return!1;return!e}class _f extends Cy{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new Cs(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Cd);delete o[i]}return l}disposeInternal(){this.listeners_&&mf(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Cd,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const ge={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Be(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function Td(t,e,n,i){return Be(t,e,n,i,!0)}function Et(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),mf(t))}class nc extends _f{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ge.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Be(this,e[s],n);return r}return Be(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Td(this,e[s],n)}else i=Td(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)f4(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}}nc.prototype.on;nc.prototype.once;nc.prototype.un;function f4(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Et(t[e]);else Et(t)}function Ne(){throw new Error("Unimplemented abstract method.")}let p4=0;function an(t){return t.ol_uid||(t.ol_uid=String(++p4))}class Iw extends Cs{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class Cr extends nc{constructor(e){super(),this.on,this.once,this.un,an(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Iw(i,e,n)),i=Au.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Iw(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const r=this.values_||(this.values_={});if(i)r[e]=n;else{const s=r[e];r[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],hR(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const Xn={ADD:"add",REMOVE:"remove"},Sw={LENGTH:"length"};class Yc extends Cs{constructor(e,n,i){super(e),this.element=n,this.index=i}}class sr extends Cr{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Sw.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Yc(Xn.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Yc(Xn.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Yc(Xn.REMOVE,r,e)),this.dispatchEvent(new Yc(Xn.ADD,n,e))}updateLength_(){this.set(Sw.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function Ve(t,e){if(!t)throw new Error(e)}new Array(6);function fa(){return[1,0,0,1,0,0]}function Hn(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Nu(t,e,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=o*i*c-a*i*l+e,t[5]=o*r*l+a*r*c+n,t}function dR(t,e){const n=g4(e);Ve(n!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*l-o*a)/n,t[5]=-(i*l-r*a)/n,t}function g4(t){return t[0]*t[3]-t[1]*t[2]}const Rw=[1e6,1e6,1e6,1e6,2,2];function m4(t){return"matrix("+t.map((n,i)=>Math.round(n*Rw[i])/Rw[i]).join(", ")+")"}const jt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function xw(t){const e=po();for(let n=0,i=t.length;n<i;++n)Ch(e,t[n]);return e}function _4(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function fR(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function Iy(t,e){return pR(t,e[0],e[1])}function y4(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function pR(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Pw(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=jt.UNKNOWN;return o<n?l=l|jt.LEFT:o>r&&(l=l|jt.RIGHT),a<i?l=l|jt.BELOW:a>s&&(l=l|jt.ABOVE),l===jt.UNKNOWN&&(l=jt.INTERSECTING),l}function po(){return[1/0,1/0,-1/0,-1/0]}function ic(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function yf(t){return ic(1/0,1/0,-1/0,-1/0,t)}function v4(t,e){const n=t[0],i=t[1];return ic(n,i,n,i,e)}function E4(t,e,n,i,r){const s=yf(r);return gR(s,t,e,n,i)}function um(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function w4(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ch(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function gR(t,e,n,i,r){for(;n<i;n+=r)C4(t,e[n],e[n+1]);return t}function C4(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function mR(t,e){let n;return n=e(vf(t)),n||(n=e(Ef(t)),n)||(n=e(wf(t)),n)||(n=e(go(t)),n)?n:!1}function cm(t){let e=0;return Cf(t)||(e=at(t)*Zn(t)),e}function vf(t){return[t[0],t[1]]}function Ef(t){return[t[2],t[1]]}function Aa(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function T4(t,e){let n;if(e==="bottom-left")n=vf(t);else if(e==="bottom-right")n=Ef(t);else if(e==="top-left")n=go(t);else if(e==="top-right")n=wf(t);else throw new Error("Invalid corner");return n}function hm(t,e,n,i,r){const[s,o,a,l,c,h,d,f]=dm(t,e,n,i);return ic(Math.min(s,a,c,d),Math.min(o,l,h,f),Math.max(s,a,c,d),Math.max(o,l,h,f),r)}function dm(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,h=s*o,d=s*a,f=t[0],_=t[1];return[f-l+d,_-c-h,f-l-d,_-c+h,f+l-d,_+c+h,f+l+d,_+c-h,f-l+d,_-c-h]}function Zn(t){return t[3]-t[1]}function Ql(t,e,n){const i=n||po();return rc(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):yf(i),i}function go(t){return[t[0],t[3]]}function wf(t){return[t[2],t[3]]}function at(t){return t[2]-t[0]}function rc(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Cf(t){return t[2]<t[0]||t[3]<t[1]}function I4(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function S4(t,e,n){let i=!1;const r=Pw(t,e),s=Pw(t,n);if(r===jt.INTERSECTING||s===jt.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],h=e[0],d=e[1],f=n[0],_=n[1],y=(_-d)/(f-h);let T,P;s&jt.ABOVE&&!(r&jt.ABOVE)&&(T=f-(_-c)/y,i=T>=o&&T<=l),!i&&s&jt.RIGHT&&!(r&jt.RIGHT)&&(P=_-(f-l)*y,i=P>=a&&P<=c),!i&&s&jt.BELOW&&!(r&jt.BELOW)&&(T=f-(_-a)/y,i=T>=o&&T<=l),!i&&s&jt.LEFT&&!(r&jt.LEFT)&&(P=_-(f-o)*y,i=P>=a&&P<=c)}return i}function R4(t,e){const n=e.getExtent(),i=Aa(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=at(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}function x4(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];R4(t,e);const r=at(i);if(at(t)>r,t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}const Sy={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class _R{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Sy[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const sc=6378137,Jo=Math.PI*sc,P4=[-Jo,-Jo,Jo,Jo],k4=[-180,-85,180,85],Xc=sc*Math.log(Math.tan(Math.PI/2));class ko extends _R{constructor(e){super({code:e,units:"m",extent:P4,global:!0,worldExtent:k4,getPointResolution:function(n,i){return n/Math.cosh(i[1]/sc)}})}}const kw=[new ko("EPSG:3857"),new ko("EPSG:102100"),new ko("EPSG:102113"),new ko("EPSG:900913"),new ko("http://www.opengis.net/def/crs/EPSG/0/3857"),new ko("http://www.opengis.net/gml/srs/epsg.xml#3857")];function A4(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n){e[r]=Jo*t[r]/180;let s=sc*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));s>Xc?s=Xc:s<-Xc&&(s=-Xc),e[r+1]=s}return e}function N4(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/Jo,e[r+1]=360*Math.atan(Math.exp(t[r+1]/sc))/Math.PI-90;return e}const L4=6378137,Aw=[-180,-90,180,90],O4=Math.PI*L4/180;class As extends _R{constructor(e,n){super({code:e,units:"degrees",extent:Aw,axisOrientation:n,global:!0,metersPerUnit:O4,worldExtent:Aw})}}const Nw=[new As("CRS:84"),new As("EPSG:4326","neu"),new As("urn:ogc:def:crs:OGC:1.3:CRS84"),new As("urn:ogc:def:crs:OGC:2:84"),new As("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new As("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new As("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let fm={};function D4(t){return fm[t]||fm[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function M4(t,e){fm[t]=e}let pa={};function Id(t,e,n){const i=t.getCode(),r=e.getCode();i in pa||(pa[i]={}),pa[i][r]=n}function b4(t,e){let n;return t in pa&&e in pa[t]&&(n=pa[t][e]),n}function Ot(t,e,n){return Math.min(Math.max(t,e),n)}function F4(t,e,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return ga(t,e,n,i)}function ga(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function j4(t){const e=t.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(t[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=t[r];t[r]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const l=-t[a][i]/t[i][i];for(let c=i;c<e+1;c++)i==c?t[a][c]=0:t[a][c]+=l*t[i][c]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function Th(t){return t*Math.PI/180}function ma(t,e){const n=t%e;return n*e<0?n+e:n}function U4(t,e,n){return t+n*(e-t)}function yR(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function qc(t,e){return Math.floor(yR(t,e))}function Zc(t,e){return Math.ceil(yR(t,e))}function z4(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Sd(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Ry(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function B4(t,e){return t[0]*=e,t[1]*=e,t}function V4(t,e){if(e.canWrapX()){const n=at(e.getExtent()),i=W4(t,e,n);i&&(t[0]-=i*n)}return t}function W4(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||at(i),r=Math.floor((t[0]-i[0])/n)),r}const G4=63710088e-1;function Lw(t,e,n){n=n||G4;const i=Th(t[1]),r=Th(e[1]),s=(r-i)/2,o=Th(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function vR(...t){console.warn(...t)}let pm=!0;function ER(t){pm=!1}function xy(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function wR(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function H4(t){M4(t.getCode(),t),Id(t,t,xy)}function $4(t){t.forEach(H4)}function Ci(t){return typeof t=="string"?D4(t):t||null}function Ow(t,e,n,i){t=Ci(t);let r;const s=t.getPointResolutionFunc();if(s)r=s(e,n);else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=ky(t,Ci("EPSG:4326"));if(a===wR&&o!=="degrees")r=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const h=Lw(c.slice(0,2),c.slice(2,4)),d=Lw(c.slice(4,6),c.slice(6,8));r=(h+d)/2}const l=t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Dw(t){$4(t),t.forEach(function(e){t.forEach(function(n){e!==n&&Id(e,n,xy)})})}function K4(t,e,n,i){t.forEach(function(r){e.forEach(function(s){Id(r,s,n),Id(s,r,i)})})}function Py(t,e){return t?typeof t=="string"?Ci(t):t:Ci(e)}function yl(t,e){return ER(),CR(t,"EPSG:4326","EPSG:3857")}function Mo(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||ky(t,e)===xy)&&n}function ky(t,e){const n=t.getCode(),i=e.getCode();let r=b4(n,i);return r||(r=wR),r}function Rd(t,e){const n=Ci(t),i=Ci(e);return ky(n,i)}function CR(t,e,n){return Rd(e,n)(t,void 0,t.length)}function gm(t,e){return t}function Xi(t,e){return pm&&!Sd(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(pm=!1,vR("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Y4(t,e){return t}function ea(t,e){return t}function X4(){Dw(kw),Dw(Nw),K4(Nw,kw,A4,N4)}X4();function q4(t,e,n,i,r,s){s=s||[];let o=0;for(let a=e;a<n;a+=i){const l=t[a],c=t[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function Z4(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let d=0;for(let f=e;f<n;f+=i){const _=t[f]-c,y=t[f+1]-h;o[d++]=c+_*a-y*l,o[d++]=h+_*l+y*a;for(let T=f+2;T<f+i;++T)o[d++]=t[T]}return o&&o.length!=d&&(o.length=d),o}function Q4(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let d=e;d<n;d+=i){const f=t[d]-l,_=t[d+1]-c;a[h++]=l+r*f,a[h++]=c+s*_;for(let y=d+2;y<d+i;++y)a[h++]=t[y]}return a&&a.length!=h&&(a.length=h),a}function J4(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const Mw=fa();class e5 extends Cr{constructor(){super(),this.extent_=po(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=h4((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return Ne()}closestPointXY(e,n,i,r){return Ne()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ne()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&yf(n),this.extentRevision_=this.getRevision()}return I4(this.extent_,e)}rotate(e,n){Ne()}scale(e,n,i){Ne()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ne()}getType(){return Ne()}applyTransform(e){Ne()}intersectsExtent(e){return Ne()}translate(e,n){Ne()}transform(e,n){const i=Ci(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),h=Zn(c)/Zn(l);return Nu(Mw,c[0],c[3],h,-h,0,0,0),q4(s,0,s.length,a,Mw,o),Rd(i,n)(s,o,a)}:Rd(i,n);return this.applyTransform(r),this}}class Ay extends e5{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return E4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ne()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=bw(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){Ne()}setLayout(e,n,i){let r;if(e)r=bw(e);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=t5(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Z4(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=Aa(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();Q4(r,0,r.length,s,e,n,i,r),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();J4(i,0,i.length,r,e,n,i),this.changed()}}}function t5(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function bw(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Fw(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],c=t[n]-a,h=t[n+1]-l;let d;if(c===0&&h===0)d=e;else{const f=((r-a)*c+(s-l)*h)/(c*c+h*h);if(f>1)d=n;else if(f>0){for(let _=0;_<i;++_)o[_]=U4(t[e+_],t[n+_],f);o.length=i;return}else d=e}for(let f=0;f<i;++f)o[f]=t[d+f];o.length=i}function TR(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],l=t[e+1],c=ga(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function n5(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=TR(t,e,a,i,r),e=a}return r}function IR(t,e,n,i,r,s,o,a,l,c,h){if(e==n)return c;let d,f;if(r===0){if(f=ga(o,a,t[e],t[e+1]),f<c){for(d=0;d<i;++d)l[d]=t[e+d];return l.length=i,f}return c}h=h||[NaN,NaN];let _=e+i;for(;_<n;)if(Fw(t,_-i,_,i,o,a,h),f=ga(o,a,h[0],h[1]),f<c){for(c=f,d=0;d<i;++d)l[d]=h[d];l.length=i,_+=i}else _+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(Fw(t,n-i,e,i,o,a,h),f=ga(o,a,h[0],h[1]),f<c){for(c=f,d=0;d<i;++d)l[d]=h[d];l.length=i}return c}function i5(t,e,n,i,r,s,o,a,l,c,h){h=h||[NaN,NaN];for(let d=0,f=n.length;d<f;++d){const _=n[d];c=IR(t,e,_,i,r,s,o,a,l,c,h),e=_}return c}function r5(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function SR(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function s5(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=SR(t,e,n[o],i);r[s++]=l,e=l}return r.length=s,r}function o5(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-i];let h=0;for(;c.length>0;){const d=c.pop(),f=c.pop();let _=0;const y=t[f],T=t[f+1],P=t[d],C=t[d+1];for(let E=f+i;E<d;E+=i){const R=t[E],N=t[E+1],M=F4(R,N,y,T,P,C);M>_&&(h=E,_=M)}_>r&&(l[(h-e)/i]=1,f+i<h&&c.push(f,h),h+i<d&&c.push(h,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=t[e+d*i],s[o++]=t[e+d*i+1]);return o}function Ao(t,e){return e*Math.round(t/e)}function a5(t,e,n,i,r,s,o){if(e==n)return o;let a=Ao(t[e],r),l=Ao(t[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,h;do if(c=Ao(t[e],r),h=Ao(t[e+1],r),e+=i,e==n)return s[o++]=c,s[o++]=h,o;while(c==a&&h==l);for(;e<n;){const d=Ao(t[e],r),f=Ao(t[e+1],r);if(e+=i,d==c&&f==h)continue;const _=c-a,y=h-l,T=d-a,P=f-l;if(_*P==y*T&&(_<0&&T<_||_==T||_>0&&T>_)&&(y<0&&P<y||y==P||y>0&&P>y)){c=d,h=f;continue}s[o++]=c,s[o++]=h,a=c,l=h,c=d,h=f}return s[o++]=c,s[o++]=h,o}function l5(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const h=n[l];o=a5(t,e,h,i,r,s,o),a.push(o),e=h}return o}function RR(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function u5(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=RR(t,e,l,i,r[s]),e=l}return r.length=s,r}function xR(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function c5(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=xR(t,e,a,i),e=a}return r}class Lu extends Ay{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Lu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<fR(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),IR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return xR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return RR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=o5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Lu(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=SR(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ny extends Ay{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Ny(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=ga(e,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return v4(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return pR(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=r5(this.flatCoordinates,0,e,this.stride),this.changed()}}function h5(t,e,n,i,r){return!mR(r,function(o){return!Gs(t,e,n,i,o[0],o[1])})}function Gs(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const c=t[e],h=t[e+1];l<=s?h>s&&(c-a)*(s-l)-(r-a)*(h-l)>0&&o++:h<=s&&(c-a)*(s-l)-(r-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function PR(t,e,n,i,r,s){if(n.length===0||!Gs(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Gs(t,n[o-1],n[o],i,r,s))return!1;return!0}function d5(t,e,n,i,r,s,o){let a,l,c,h,d,f,_;const y=r[s+1],T=[];for(let E=0,R=n.length;E<R;++E){const N=n[E];for(h=t[N-i],f=t[N-i+1],a=e;a<N;a+=i)d=t[a],_=t[a+1],(y<=f&&_<=y||f<=y&&y<=_)&&(c=(y-f)/(_-f)*(d-h)+h,T.push(c)),h=d,f=_}let P=NaN,C=-1/0;for(T.sort(ff),h=T[0],a=1,l=T.length;a<l;++a){d=T[a];const E=Math.abs(d-h);E>C&&(c=(h+d)/2,PR(t,e,n,i,c,y)&&(P=c,C=E)),h=d}return isNaN(P)&&(P=r[s]),[P,y,C]}function f5(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function kR(t,e,n,i,r){const s=gR(po(),t,e,n,i);return rc(r,s)?y4(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:f5(t,e,n,i,function(o,a){return S4(r,o,a)}):!1}function AR(t,e,n,i,r){return!!(kR(t,e,n,i,r)||Gs(t,e,n,i,r[0],r[1])||Gs(t,e,n,i,r[0],r[3])||Gs(t,e,n,i,r[2],r[1])||Gs(t,e,n,i,r[2],r[3]))}function p5(t,e,n,i,r){if(!AR(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(h5(t,n[s-1],n[s],i,r)&&!kR(t,n[s-1],n[s],i,r))return!1;return!0}function g5(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function NR(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function m5(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=NR(t,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function jw(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=NR(t,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&g5(t,e,a,i),e=a}return e}class Ou extends Ay{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?u4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ou(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<fR(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(n5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),i5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return PR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return c5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),jw(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,u5(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Aa(this.getExtent());this.flatInteriorPoint_=d5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ny(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Lu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Lu(n.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;m5(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=jw(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=l5(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new Ou(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return p5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=s5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Uw(t){if(Cf(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new Ou(s,"XY",[s.length])}const Ni={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Re={IDLE:0,LOADING:1,LOADED:2,ERROR:3},Du={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Zt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Zt.max=Zt.whitepoint[2].D65;Zt.rgb=function(t,e){e=e||Zt.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],r=t[2]/e[2],s,o,a;return s=n*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=n*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};Du.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=n*.41239079926595+i*.35758433938387+r*.18048078840183,o=n*.21263900587151+i*.71516867876775+r*.072192315360733,a=n*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||Zt.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};var Ly={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,c,h,d,f,_,y,T;if(s=t[0],o=t[1],a=t[2],s===0)return[0,0,0];var P=.0011070564598794539;return e=e||"D65",n=n||2,d=Zt.whitepoint[n][e][0],f=Zt.whitepoint[n][e][1],_=Zt.whitepoint[n][e][2],y=4*d/(d+15*f+3*_),T=9*f/(d+15*f+3*_),i=o/(13*s)+y||0,r=a/(13*s)+T||0,c=s>8?f*Math.pow((s+16)/116,3):f*s*P,l=c*9*i/(4*r)||0,h=c*(12-3*i-20*r)/(4*r)||0,[l,c,h]}};Zt.luv=function(t,e,n){var i,r,s,o,a,l,c,h,d,f,_,y,T,P=.008856451679035631,C=903.2962962962961;e=e||"D65",n=n||2,d=Zt.whitepoint[n][e][0],f=Zt.whitepoint[n][e][1],_=Zt.whitepoint[n][e][2],y=4*d/(d+15*f+3*_),T=9*f/(d+15*f+3*_),l=t[0],c=t[1],h=t[2],i=4*l/(l+15*c+3*h)||0,r=9*c/(l+15*c+3*h)||0;var E=c/f;return s=E<=P?C*E:116*Math.pow(E,1/3)-16,o=13*s*(i-y),a=13*s*(r-T),[s,o,a]};var LR={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],r,s,o;return o=i/360*2*Math.PI,r=n*Math.cos(o),s=n*Math.sin(o),[e,r,s]},xyz:function(t){return Ly.xyz(LR.luv(t))}};Ly.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};Zt.lchuv=function(t){return Ly.lchuv(Zt.luv(t))};const mm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const t in mm)Object.freeze(mm[t]);const zw=Object.freeze(mm);var Bw={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function _5(t){var h,d;var e,n=[],i=1,r;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),zw[t])n=zw[t].slice(),r="rgb";else if(t==="transparent")i=0,r="rgb",n=[0,0,0];else if(t[0]==="#"){var s=t.slice(1),o=s.length,a=o<=4;i=1,a?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];r=l.replace(/a$/,"");var c=r==="cmyk"?4:r==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=n.shift()),n=n.map(function(f,_){if(f[f.length-1]==="%")return f=parseFloat(f)/100,_===3?f:r==="rgb"?f*255:r[0]==="h"||r[0]==="l"&&!_?f*100:r==="lab"?f*125:r==="lch"?_<2?f*150:f*360:r[0]==="o"&&!_?f:r==="oklab"?f*.4:r==="oklch"?_<2?f*.4:f*360:f;if(r[_]==="h"||_===2&&r[r.length-1]==="h"){if(Bw[f]!==void 0)return Bw[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),i=n.length>c?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),r=((d=(h=t.match(/([a-z])/ig))==null?void 0:h.join(""))==null?void 0:d.toLowerCase())||"rgb");return{space:r,values:n,alpha:i}}var Ap={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,s,o,a,l,c=0;if(n===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+n):i+n-i*n,r=2*i-s,a=[0,0,0];c<3;)o=e+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[c++]=l*255;return a}};Du.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=s-r,a,l,c;return s===r?a=0:e===s?a=(n-i)/o:n===s?a=2+(i-e)/o:i===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(r+s)/2,s===r?l=0:c<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,c*100]};function y5(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=_5(t);if(!n.space)return[];const i=n.space[0]==="h"?Ap.min:Du.min,r=n.space[0]==="h"?Ap.max:Du.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),n.space[0]==="h"&&(e=Ap.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function v5(t){return typeof t=="string"?t:Dy(t)}const E5=1024,vl={};let Np=0;function w5(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Vw(t){const e=Zt.lchuv(Du.xyz(t));return e[3]=t[3],e}function C5(t){const e=Zt.rgb(LR.xyz(t));return e[3]=t[3],e}function Oy(t){if(vl.hasOwnProperty(t))return vl[t];if(Np>=E5){let n=0;for(const i in vl)n++&3||(delete vl[i],--Np)}const e=y5(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return OR(e),vl[t]=e,++Np,e}function Mu(t){return Array.isArray(t)?t:Oy(t)}function OR(t){return t[0]=Ot(t[0]+.5|0,0,255),t[1]=Ot(t[1]+.5|0,0,255),t[2]=Ot(t[2]+.5|0,0,255),t[3]=Ot(t[3],0,1),t}function Dy(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const r=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+r+")"}function T5(t){try{return Oy(t),!0}catch{return!1}}const fs=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",I5=fs.includes("firefox"),S5=fs.includes("safari")&&!fs.includes("chrom");S5&&(fs.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(fs));const R5=fs.includes("webkit")&&!fs.includes("edge"),DR=fs.includes("macintosh"),MR=typeof devicePixelRatio<"u"?devicePixelRatio:1,x5=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,bR=typeof Image<"u"&&Image.prototype.decode,FR=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function ti(t,e,n,i){let r;return n&&n.length?r=n.shift():x5?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let Lp;function xd(){return Lp||(Lp=ti(1,1)),Lp}function My(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Ww(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function _m(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function P5(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function k5(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){t.appendChild(s);continue}if(!s){t.removeChild(r),--i;continue}t.insertBefore(s,r)}}}function A5(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[Td(i,ge.LOAD,function(){o=!0,s||e()})];return i.src&&bR?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():n())})):a.push(Td(i,ge.ERROR,n)),function(){r=!1,a.forEach(Et)}}function N5(t,e){return new Promise((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s)})}function L5(t,e){return e&&(t.src=e),t.src&&bR?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):N5(t)}class O5{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){const r=Op(e,n,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,n,i){const r=Op(e,n,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,i,r,s){const o=Op(e,n,i),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===Re.IDLE&&r.load(),r.getImageState()===Re.LOADING?r.ready().then(()=>{this.patternCache_[o]=xd().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=xd().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Op(t,e,n){const i=n?Mu(n):"null";return e+":"+t+":"+i}const Li=new O5;let El=null;class D5 extends _f{constructor(e,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Re.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Re.LOADED){El||(El=ti(1,1,void 0,{willReadFrequently:!0})),El.drawImage(this.image_,0,0);try{El.getImageData(0,0,1,1),this.tainted_=!1}catch{El=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ge.CHANGE)}handleImageError_(){this.imageState_=Re.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Re.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=ti(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Re.IDLE){this.image_||this.initializeImage_(),this.imageState_=Re.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&L5(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Re.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=v5(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===Re.LOADED||this.imageState_===Re.ERROR?e():this.addEventListener(ge.CHANGE,function n(){(this.imageState_===Re.LOADED||this.imageState_===Re.ERROR)&&(this.removeEventListener(ge.CHANGE,n),e())})})),this.ready_}}function by(t,e,n,i,r,s){let o=e===void 0?void 0:Li.get(e,n,r);return o||(o=new D5(t,t&&"src"in t?t.src||void 0:e,n,i,r),Li.set(e,n,r,o,s)),s&&o&&!Li.getPattern(e,n,r)&&Li.set(e,n,r,o,s),o}class oc{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new oc({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=by(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Re.IDLE&&n.load(),n.getImageState()===Re.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Tf{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Tf({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Gw(t){return t[0]>0&&t[1]>0}function M5(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Fn(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class If{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Fn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new If({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ne()}getImage(e){return Ne()}getHitDetectionImage(){return Ne()}getPixelRatio(e){return 1}getImageState(){return Ne()}getImageSize(){return Ne()}getOrigin(){return Ne()}getSize(){return Ne()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Fn(e)}listenImageChange(e){Ne()}load(){Ne()}unlistenImageChange(e){Ne()}ready(){return Promise.resolve()}}function Hw(t){return t?Array.isArray(t)?Dy(t):typeof t=="object"&&"src"in t?b5(t):t:null}function b5(t){if(!t.offset||!t.size)return Li.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Li.getPattern(e,void 0,t.color);if(n)return n;const i=Li.get(t.src,"anonymous",null);if(i.getImageState()!==Re.LOADED)return null;const r=ti(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),by(r.canvas,e,void 0,Re.LOADED,t.color,!0),Li.getPattern(e,void 0,t.color)}const Qc="ol-hidden",Sf="ol-unselectable",Fy="ol-control",$w="ol-collapsed",Kw="#000",Yw="round",Xw="round",F5=10,j5="#000",U5=1,z5=new Cr;class Rf extends If{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Re.LOADING:Re.LOADED,this.imageState_===Re.LOADING&&this.ready().then(()=>this.imageState_=Re.LOADED),this.render()}clone(){const e=this.getScale(),n=new Rf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const i=this.renderOptions_,r=ti(i.size*e,i.size*e);this.draw_(i,r,e),n=r.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const z=r;r=s,s=z}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),h=r-c,d=Math.sqrt(l*l+h*h),f=d/l;if(e==="miter"&&f<=i)return f*n;const _=n/2/f,y=n/2*(h/d),P=Math.sqrt((r+_)*(r+_)+y*y)-r;if(this.radius2_===void 0||e==="bevel")return P*2;const C=r*Math.sin(a),E=Math.sqrt(r*r-C*C),R=s-E,M=Math.sqrt(C*C+R*R)/C;if(M<=i){const z=M*n/2-s-r;return 2*Math.max(P,z)}return P*2}createRenderOptions(){let e=Yw,n=Xw,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=Hw(this.stroke_.getColor()??j5),a=this.stroke_.getWidth()??U5,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Xw,e=this.stroke_.getLineCap()??Yw,i=this.stroke_.getMiterLimit()??F5);const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=Kw),n.fillStyle=Hw(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Mu(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=ti(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius_;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=Kw,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class xf extends Rf{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new xf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}}class Ks{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=qw,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ks({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=qw,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function B5(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(Ve(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let Dp=null;function jR(t,e){if(!Dp){const n=new oc({color:"rgba(255,255,255,0.4)"}),i=new Tf({color:"#3399CC",width:1.25});Dp=[new Ks({image:new xf({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return Dp}function qw(t){return t.getGeometry()}const V5="#333";class jy{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Fn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new oc({color:V5}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new jy({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Fn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Ue={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class UR extends Cr{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Ue.OPACITY]=e.opacity!==void 0?e.opacity:1,Ve(typeof n[Ue.OPACITY]=="number","Layer opacity must be a number"),n[Ue.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Ue.Z_INDEX]=e.zIndex,n[Ue.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Ue.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Ue.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Ue.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=Ot(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return Ne()}getLayerStatesArray(e){return Ne()}getExtent(){return this.get(Ue.EXTENT)}getMaxResolution(){return this.get(Ue.MAX_RESOLUTION)}getMinResolution(){return this.get(Ue.MIN_RESOLUTION)}getMinZoom(){return this.get(Ue.MIN_ZOOM)}getMaxZoom(){return this.get(Ue.MAX_ZOOM)}getOpacity(){return this.get(Ue.OPACITY)}getSourceState(){return Ne()}getVisible(){return this.get(Ue.VISIBLE)}getZIndex(){return this.get(Ue.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ue.EXTENT,e)}setMaxResolution(e){this.set(Ue.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ue.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ue.MAX_ZOOM,e)}setMinZoom(e){this.set(Ue.MIN_ZOOM,e)}setOpacity(e){Ve(typeof e=="number","Layer opacity must be a number"),this.set(Ue.OPACITY,e)}setVisible(e){this.set(Ue.VISIBLE,e)}setZIndex(e){this.set(Ue.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const $n={ANIMATING:0,INTERACTING:1},li={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},W5=42,Uy=256;function Zw(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,h=a?a[0]:0,d=a?a[1]:0;let f=t[0]+l/2+h,_=t[2]-l/2+h,y=t[1]+c/2+d,T=t[3]-c/2+d;f>_&&(f=(_+f)/2,_=f),y>T&&(y=(T+y)/2,T=y);let P=Ot(i[0],f,_),C=Ot(i[1],y,T);if(o&&n&&r){const E=30*r;P+=-E*Math.log(1+Math.max(0,f-i[0])/E)+E*Math.log(1+Math.max(0,i[0]-_)/E),C+=-E*Math.log(1+Math.max(0,y-i[1])/E)+E*Math.log(1+Math.max(0,i[1]-T)/E)}return[P,C]}}function G5(t){return t}function zy(t,e,n,i){const r=at(e)/n[0],s=Zn(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function By(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),Ot(i,n/2,e*2)}function H5(t,e,n,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=t[0],c=t[t.length-1],h=n?zy(l,n,o,i):l;if(a)return e?By(r,h,c):Ot(r,c,h);const d=Math.min(h,r),f=Math.floor(Ty(t,d,s));return t[f]>h&&f<t.length-1?t[f+1]:t[f]}}}function $5(t,e,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const h=r?zy(e,r,l,s):e;if(c)return i?By(o,h,n):Ot(o,n,h);const d=1e-9,f=Math.ceil(Math.log(e/h)/Math.log(t)-d),_=-a*(.5-d)+.5,y=Math.min(h,o),T=Math.floor(Math.log(e/y)/Math.log(t)+_),P=Math.max(f,T),C=e/Math.pow(t,P);return Ot(C,n,h)}}}function Qw(t,e,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?zy(t,i,a,r):t;return!n||!l?Ot(s,e,c):By(s,c,e)}}}function Vy(t){if(t!==void 0)return 0}function Jw(t){if(t!==void 0)return t}function K5(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function Y5(t){const e=Th(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function zR(t){return Math.pow(t,3)}function Va(t){return 1-zR(1-t)}function X5(t){return 3*t*t-2*t*t*t}function q5(t){return t}const Mp=0;class ki extends Cr{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Py(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&ER(),e.center&&(e.center=Xi(e.center,this.projection_)),e.extent&&(e.extent=ea(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in li)delete n[a];this.setProperties(n,!0);const i=Q5(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Z5(e),s=i.constraint,o=J5(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Xi(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Xi(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===n){i&&Jc(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const h=arguments[r],d={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||X5,callback:i};if(h.center&&(d.sourceCenter=o,d.targetCenter=h.center.slice(),o=d.targetCenter),h.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(h.zoom),a=d.targetResolution):h.resolution&&(d.sourceResolution=a,d.targetResolution=h.resolution,a=d.targetResolution),h.rotation!==void 0){d.sourceRotation=l;const f=ma(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+f,l=d.targetRotation}e3(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint($n.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[$n.ANIMATING]>0}getInteracting(){return this.hints_[$n.INTERACTING]>0}cancelAnimations(){this.setHint($n.ANIMATING,-this.hints_[$n.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&Jc(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const d=l.easing(h);if(l.sourceCenter){const f=l.sourceCenter[0],_=l.sourceCenter[1],y=l.targetCenter[0],T=l.targetCenter[1];this.nextCenter_=l.targetCenter;const P=f+d*(y-f),C=_+d*(T-_);this.targetCenter_=[P,C]}if(l.sourceResolution&&l.targetResolution){const f=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const _=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(f,0,_,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=d===1?ma(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const _=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(_,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint($n.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Jc(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],Ry(i,e-this.getRotation()),z4(i,n)),i}calculateCenterZoom(e,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-r[0])/s,a=n[1]-e*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&gm(e,this.getProjection())}getCenterInternal(){return this.get(li.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return Y4(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Ve(n,"The view center is not defined");const i=this.getResolution();Ve(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ve(r!==void 0,"The view rotation is not defined"),hm(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(li.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(ea(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=at(e)/n[0],r=Zn(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(s){return n/Math.pow(e,s*r)}}getRotation(){return this.get(li.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=bp(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=Ty(this.resolutions_,e,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=Ot(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Ot(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(Ve(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ve(!Cf(e),"Cannot fit empty extent provided as `geometry`");const r=ea(e,this.getProjection());i=Uw(r)}else if(e.getType()==="Circle"){const r=ea(e.getExtent(),this.getProjection());i=Uw(r),i.rotate(this.getRotation(),Aa(r))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let d=0,f=s.length;d<f;d+=o){const _=s[d]*i-s[d+1]*r,y=s[d]*r+s[d+1]*i;a=Math.min(a,_),l=Math.min(l,y),c=Math.max(c,_),h=Math.max(h,y)}return[a,l,c,h]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),d=Math.cos(c),f=Aa(a);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const _=f[0]*d-f[1]*h,y=f[1]*d+f[0]*h,T=this.getConstrainedCenter([_,y],l),P=n.callback?n.callback:Cd;n.duration!==void 0?this.animateInternal({resolution:l,center:T,duration:n.duration,easing:n.easing},P):(this.targetResolution_=l,this.targetCenter_=T,this.applyTargetState_(!1,!0),Jc(P,!0))}centerOn(e,n,i){this.centerOnInternal(Xi(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(bp(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=bp(e,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=gm(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Xi(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Xi(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Xi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(li.ROTATION)!==r&&this.set(li.ROTATION,r),this.get(li.RESOLUTION)!==o&&(this.set(li.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(li.CENTER)||!Sd(this.get(li.CENTER),a))&&this.set(li.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Sd(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:Va,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint($n.INTERACTING,1)}endInteraction(e,n,i){i=i&&Xi(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint($n.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function Jc(t,e){setTimeout(function(){t(e)},0)}function Z5(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Zw(t.extent,t.constrainOnlyCenter,n)}const e=Py(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Zw(n,!1,!1)}return G5}function Q5(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:Mp,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,h=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,d=t.showFullExtent!==void 0?t.showFullExtent:!1,f=Py(t.projection,"EPSG:3857"),_=f.getExtent();let y=t.constrainOnlyCenter,T=t.extent;if(!c&&!T&&f.isGlobal()&&(y=!1,T=_),t.resolutions!==void 0){const P=t.resolutions;n=P[o],i=P[a]!==void 0?P[a]:P[P.length-1],t.constrainResolution?e=H5(P,h,!y&&T,d):e=Qw(n,i,h,!y&&T,d)}else{const C=(_?Math.max(at(_),Zn(_)):360*Sy.degrees/f.getMetersPerUnit())/Uy/Math.pow(2,Mp),E=C/Math.pow(2,28-Mp);n=t.maxResolution,n!==void 0?o=0:n=C/Math.pow(l,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=C/Math.pow(l,a):i=E),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),t.constrainResolution?e=$5(l,n,i,h,!y&&T,d):e=Qw(n,i,h,!y&&T,d)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function J5(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?Y5():n===!1?Jw:typeof n=="number"?K5(n):Jw}return Vy}function e3(t){return!(t.sourceCenter&&t.targetCenter&&!Sd(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function bp(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,h=l*s+a*o;return[c,h]}class Pf extends UR{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ue.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ue.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Et(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Be(e,ge.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof ki?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return Wy(r,n.viewState)&&(!s||rc(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=e instanceof ki?e.getViewStateAndExtent():e;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ue.MAP,e)}getMapInternal(){return this.get(Ue.MAP)}setMap(e){this.mapPrecomposeKey_&&(Et(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Et(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Be(e,Ni.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Ve(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Be(this,ge.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Ue.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Wy(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}function t3(t,e,n,i,r){BR(t,e,n||0,i||t.length-1,r||n3)}function BR(t,e,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),h=Math.max(n,Math.floor(e-o*l/s+c)),d=Math.min(i,Math.floor(e+(s-o)*l/s+c));BR(t,e,h,d,r)}var f=t[e],_=n,y=i;for(wl(t,n,e),r(t[i],f)>0&&wl(t,n,i);_<y;){for(wl(t,_,y),_++,y--;r(t[_],f)<0;)_++;for(;r(t[y],f)>0;)y--}r(t[n],f)===0?wl(t,n,y):(y++,wl(t,y,i)),y<=e&&(n=y+1),e<=y&&(i=y-1)}}function wl(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n3(t,e){return t<e?-1:t>e?1:0}class i3{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!th(e,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;th(e,l)&&(n.leaf?i.push(a):jp(e,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(e){let n=this.data;if(!th(e,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(th(e,o)){if(n.leaf||jp(e,o))return!0;i.push(s)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=bo([]),this}remove(e,n){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const h=r3(e,i.children,n);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&jp(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=bo(e.slice(n,i+1)),No(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=bo([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));eC(e,n,i,c,this.compareMinX);for(let h=n;h<=i;h+=c){const d=Math.min(h+c-1,i);eC(e,h,d,l,this.compareMinY);for(let f=h;f<=d;f+=l){const _=Math.min(f+l-1,d);a.children.push(this._build(e,f,_,r-1))}}return No(a,this.toBBox),a}_chooseSubtree(e,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],h=Fp(c),d=a3(e,c)-h;d<o?(o=d,s=h<s?h:s,a=c):d===o&&h<s&&(s=h,a=c)}n=a||n.children[0]}return n}_insert(e,n,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(e),Ol(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(e,n){const i=e[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=bo(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,No(i,this.toBBox),No(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=bo([e,n]),this.data.height=e.height+1,this.data.leaf=!1,No(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Ll(e,0,a,this.toBBox),c=Ll(e,a,i,this.toBBox),h=l3(l,c),d=Fp(l)+Fp(c);h<s?(s=h,r=a,o=d<o?d:o):h===s&&d<o&&(o=d,r=a)}return r||i-n}_chooseSplitAxis(e,n,i){const r=e.leaf?this.compareMinX:s3,s=e.leaf?this.compareMinY:o3,o=this._allDistMargin(e,n,i,r),a=this._allDistMargin(e,n,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,n,i,r){e.children.sort(r);const s=this.toBBox,o=Ll(e,0,n,s),a=Ll(e,i-n,i,s);let l=eh(o)+eh(a);for(let c=n;c<i-n;c++){const h=e.children[c];Ol(o,e.leaf?s(h):h),l+=eh(o)}for(let c=i-n-1;c>=n;c--){const h=e.children[c];Ol(a,e.leaf?s(h):h),l+=eh(a)}return l}_adjustParentBBoxes(e,n,i){for(let r=i;r>=0;r--)Ol(n[r],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():No(e[n],this.toBBox)}}function r3(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function No(t,e){Ll(t,0,t.children.length,e,t)}function Ll(t,e,n,i,r){r||(r=bo(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];Ol(r,t.leaf?i(o):o)}return r}function Ol(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function s3(t,e){return t.minX-e.minX}function o3(t,e){return t.minY-e.minY}function Fp(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function eh(t){return t.maxX-t.minX+(t.maxY-t.minY)}function a3(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function l3(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function jp(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function th(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function bo(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function eC(t,e,n,i,r){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;t3(t,o,e,n,r),s.push(e,o,o,n)}}function tC(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class Gy extends If{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Ve(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||an(o)),Ve(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ve(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Re.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Re.LOADED:Re.IDLE:l=Re.LOADING:l=Re.LOADED),this.color_=e.color!==void 0?Mu(e.color):null,this.iconImage_=by(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,h;if(e.size)[c,h]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)c=d.width,h=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const _=this.iconImage_.getSize();this.setScale(tC(_[0],_[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(tC(c,h,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Gy({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Re.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Re.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ge.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ge.CHANGE,e)}ready(){return this.iconImage_.ready()}}let mo=0;const Wa=0,ft=1<<mo++,ne=1<<mo++,Mn=1<<mo++,Nt=1<<mo++,ji=1<<mo++,Jl=1<<mo++,Kt=Math.pow(2,mo)-1,VR={[ft]:"boolean",[ne]:"number",[Mn]:"string",[Nt]:"color",[ji]:"number[]",[Jl]:"size"},u3=Object.keys(VR).map(Number).sort(ff);function Qt(t){const e=[];for(const n of u3)c3(t,n)&&e.push(VR[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function c3(t,e){return(t&e)===e}function Ui(t,e){return!!(t&e)}function kf(t,e){return t===e}class qr{constructor(e,n){this.type=e,this.value=n}}class h3{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function WR(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function d3(t){switch(t){case"string":return Mn;case"color":return Nt;case"number":return ne;case"boolean":return ft;case"number[]":return ji;default:throw new Error(`Unrecognized type hint: ${t}`)}}function be(t,e,n){switch(typeof t){case"boolean":return new qr(ft,t);case"number":return new qr(n===Jl?Jl:ne,t);case"string":{let r=Mn;return T5(t)&&(r|=Nt),kf(r&n,Wa)||(r&=n),new qr(r,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return I3(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=ji;return t.length===2?i|=Jl:(t.length===3||t.length===4)&&(i|=Nt),n&&(i&=n),new qr(i,t)}const B={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},f3={[B.Get]:ce(([t,e])=>e!==void 0?d3(e.value):Kt,pe(1,2),p3),[B.Var]:ce(([t])=>t.type,pe(1,1),g3),[B.Id]:ce(ne|Mn,Cl,m3),[B.Concat]:ce(Mn,pe(2,1/0),Pe(Kt)),[B.GeometryType]:ce(Mn,Cl,_3),[B.Resolution]:ce(ne,Cl),[B.Zoom]:ce(ne,Cl),[B.Time]:ce(ne,Cl),[B.Any]:ce(ft,pe(2,1/0),Pe(ft)),[B.All]:ce(ft,pe(2,1/0),Pe(ft)),[B.Not]:ce(ft,pe(1,1),Pe(ft)),[B.Equal]:ce(ft,pe(2,2),Pe(Kt),Or),[B.NotEqual]:ce(ft,pe(2,2),Pe(Kt),Or),[B.GreaterThan]:ce(ft,pe(2,2),Pe(Kt),Or),[B.GreaterThanOrEqualTo]:ce(ft,pe(2,2),Pe(Kt),Or),[B.LessThan]:ce(ft,pe(2,2),Pe(Kt),Or),[B.LessThanOrEqualTo]:ce(ft,pe(2,2),Pe(Kt),Or),[B.Multiply]:ce(t=>{let e=ne|Nt;for(let n=0;n<t.length;n++)e&=t[n].type;return e},pe(2,1/0),Pe(ne|Nt),Or),[B.Coalesce]:ce(t=>{let e=Kt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},pe(2,1/0),Pe(Kt),Or),[B.Divide]:ce(ne,pe(2,2),Pe(ne)),[B.Add]:ce(ne,pe(2,1/0),Pe(ne)),[B.Subtract]:ce(ne,pe(2,2),Pe(ne)),[B.Clamp]:ce(ne,pe(3,3),Pe(ne)),[B.Mod]:ce(ne,pe(2,2),Pe(ne)),[B.Pow]:ce(ne,pe(2,2),Pe(ne)),[B.Abs]:ce(ne,pe(1,1),Pe(ne)),[B.Floor]:ce(ne,pe(1,1),Pe(ne)),[B.Ceil]:ce(ne,pe(1,1),Pe(ne)),[B.Round]:ce(ne,pe(1,1),Pe(ne)),[B.Sin]:ce(ne,pe(1,1),Pe(ne)),[B.Cos]:ce(ne,pe(1,1),Pe(ne)),[B.Atan]:ce(ne,pe(1,2),Pe(ne)),[B.Sqrt]:ce(ne,pe(1,1),Pe(ne)),[B.Match]:ce(t=>{let e=Kt;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},pe(4,1/0),nC,v3),[B.Between]:ce(ft,pe(3,3),Pe(ne)),[B.Interpolate]:ce(t=>{let e=Nt|ne;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},pe(6,1/0),nC,E3),[B.Case]:ce(t=>{let e=Kt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},pe(3,1/0),y3,w3),[B.In]:ce(ft,pe(2,2),C3),[B.Number]:ce(ne,pe(1,1/0),Pe(Kt)),[B.String]:ce(Mn,pe(1,1/0),Pe(Kt)),[B.Array]:ce(t=>t.length===2?ji|Jl:t.length===3||t.length===4?ji|Nt:ji,pe(1,1/0),Pe(ne)),[B.Color]:ce(Nt,pe(1,4),Pe(ne)),[B.Band]:ce(ne,pe(1,3),Pe(ne)),[B.Palette]:ce(Nt,pe(2,2),T3),[B.ToString]:ce(Mn,pe(1,1),Pe(ft|ne|Mn|Nt))};function p3(t,e){const n=be(t[1],e);if(!(n instanceof qr))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){const i=be(t[2],e);return[n,i]}return[n]}function g3(t,e,n,i){const r=t[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new qr(Kt,r)];const s=e.style.variables[r],o=be(s,e);if(o.value=r,i&&!Ui(i,o.type))throw new Error(`The variable ${r} has type ${Qt(o.type)} but the following type was expected: ${Qt(i)}`);return[o]}function m3(t,e){e.featureId=!0}function _3(t,e){e.geometryType=!0}function Cl(t,e){const n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function pe(t,e){return function(n,i){const r=n[0],s=n.length-1;if(t===e){if(s!==t){const o=t===1?"":"s";throw new Error(`Expected ${t} argument${o} for ${r}, got ${s}`)}}else if(s<t||s>e){const o=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function Pe(t){return function(e,n){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=be(e[o+1],n);if(!Ui(t,a.type)){const l=Qt(t),c=Qt(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${l} but expected ${c}`)}a.type&=t,s[o]=a}return s}}function Or(t,e,n){const i=t[0],r=t.length-1;let s=Kt;for(let a=0;a<n.length;++a)s&=n[a].type;if(s===Wa)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=be(t[a+1],e,s);return o}function y3(t,e){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function nC(t,e){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function v3(t,e,n,i){const r=t.length-1;let o=be(t[1],e).type;const a=be(t[t.length-1],e);let l=i!==void 0?i&a.type:a.type;const c=new Array(r-2);for(let d=0;d<r-2;d+=2){const f=be(t[d+2],e),_=be(t[d+3],e);o&=f.type,l&=_.type,c[d]=f,c[d+1]=_}const h=Mn|ne|ft;if(!Ui(h,o))throw new Error(`Expected an input of type ${Qt(h)} for the interpolate operation, got ${Qt(o)} instead`);if(o&=h,kf(l,Wa))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let d=0;d<r-2;d+=2){const f=be(t[d+2],e,o),_=be(t[d+3],e,l);c[d]=f,c[d+1]=_}return[be(t[1],e,o),...c,be(t[t.length-1],e,l)]}function E3(t,e,n,i){const r=t[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=be(s,e);let o=be(t[2],e);if(!Ui(ne,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Qt(o.type)} instead`);o=be(t[2],e,ne);const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let c=be(t[l+3],e);if(!Ui(ne,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Qt(c.type)} at position ${l+2} instead`);let h=be(t[l+4],e);if(!Ui(ne|Nt,h.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Qt(h.type)} at position ${l+3} instead`);c=be(t[l+3],e,ne),h=be(t[l+4],e,ne|Nt),a[l]=c,a[l+1]=h}return[s,o,...a]}function w3(t,e,n,i){const r=be(t[t.length-1],e,i);let s=i!==void 0?i&r.type:r.type;const o=new Array(t.length-1);for(let a=0;a<o.length-1;a+=2){const l=be(t[a+1],e),c=be(t[a+2],e,i);if(!Ui(ft,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Qt(l.type)} at position ${a} instead`);s&=c.type,o[a]=l,o[a+1]=c}if(kf(s,Wa))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<o.length-1;a+=2)o[a+1]=be(t[a+2],e,s);return o[o.length-1]=be(t[t.length-1],e,s),o}function C3(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=Mn|ne;const r=new Array(n.length);for(let o=0;o<r.length;o++){const a=be(n[o],e);i&=a.type,r[o]=a}if(kf(i,Wa))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[be(t[1],e,i),...r]}function T3(t,e){const n=be(t[1],e,ne);if(n.type!==ne)throw new Error(`The first argument of palette must be an number, got ${Qt(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const o=be(i[s],e,Nt);if(!(o instanceof qr))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Ui(o.type,Nt))throw new Error(`The palette color at index ${s} should be of type color, got ${Qt(o.type)} instead`);r[s]=o}return[n,...r]}function ce(t,...e){return function(n,i,r){const s=n[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](n,i,o,r)||o;let a=typeof t=="function"?t(o):t;if(r!==void 0){if(!Ui(a,r))throw new Error(`The following expression was expected to return ${Qt(r)}, but returns ${Qt(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===Wa)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new h3(a,s,...o)}}function I3(t,e,n){const i=t[0],r=f3[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}function GR(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return GR(t.getGeometries()[0]);default:return""}}function HR(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Tr(t,e,n){const i=be(t,n);if(!Ui(e,i.type)){const r=Qt(e),s=Qt(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Ti(i)}function Ti(t,e){if(t instanceof qr){if(t.type===Nt&&typeof t.value=="string"){const i=Oy(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case B.Number:case B.String:case B.Coalesce:return S3(t);case B.Get:case B.Var:return R3(t);case B.Id:return i=>i.featureId;case B.GeometryType:return i=>i.geometryType;case B.Concat:{const i=t.args.map(r=>Ti(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case B.Resolution:return i=>i.resolution;case B.Any:case B.All:case B.Between:case B.In:case B.Not:return P3(t);case B.Equal:case B.NotEqual:case B.LessThan:case B.LessThanOrEqualTo:case B.GreaterThan:case B.GreaterThanOrEqualTo:return x3(t);case B.Multiply:case B.Divide:case B.Add:case B.Subtract:case B.Clamp:case B.Mod:case B.Pow:case B.Abs:case B.Floor:case B.Ceil:case B.Round:case B.Sin:case B.Cos:case B.Atan:case B.Sqrt:return k3(t);case B.Case:return A3(t);case B.Match:return N3(t);case B.Interpolate:return L3(t);case B.ToString:return O3(t);default:throw new Error(`Unsupported operator ${n}`)}}function S3(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ti(t.args[s]);switch(n){case B.Coalesce:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case B.Number:case B.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function R3(t,e){const i=t.args[0].value;switch(t.operator){case B.Get:return r=>r.properties[i];case B.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function x3(t,e){const n=t.operator,i=Ti(t.args[0]),r=Ti(t.args[1]);switch(n){case B.Equal:return s=>i(s)===r(s);case B.NotEqual:return s=>i(s)!==r(s);case B.LessThan:return s=>i(s)<r(s);case B.LessThanOrEqualTo:return s=>i(s)<=r(s);case B.GreaterThan:return s=>i(s)>r(s);case B.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function P3(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ti(t.args[s]);switch(n){case B.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case B.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case B.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case B.In:return s=>{const o=r[0](s);for(let a=1;a<i;++a)if(o===r[a](s))return!0;return!1};case B.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function k3(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ti(t.args[s]);switch(n){case B.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case B.Divide:return s=>r[0](s)/r[1](s);case B.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case B.Subtract:return s=>r[0](s)-r[1](s);case B.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case B.Mod:return s=>r[0](s)%r[1](s);case B.Pow:return s=>Math.pow(r[0](s),r[1](s));case B.Abs:return s=>Math.abs(r[0](s));case B.Floor:return s=>Math.floor(r[0](s));case B.Ceil:return s=>Math.ceil(r[0](s));case B.Round:return s=>Math.round(r[0](s));case B.Sin:return s=>Math.sin(r[0](s));case B.Cos:return s=>Math.cos(r[0](s));case B.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case B.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function A3(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ti(t.args[r]);return r=>{for(let s=0;s<n-1;s+=2)if(i[s](r))return i[s+1](r);return i[n-1](r)}}function N3(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ti(t.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function L3(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ti(t.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let c=2;c<n;c+=2){const h=i[c](r);let d=i[c+1](r);const f=Array.isArray(d);if(f&&(d=w5(d)),h>=o)return c===2?d:f?D3(s,o,a,l,h,d):Dl(s,o,a,l,h,d);a=h,l=d}return l}}function O3(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ti(t.args[s]);switch(n){case B.ToString:return s=>{const o=r[0](s);return t.args[0].type===Nt?Dy(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Dl(t,e,n,i,r,s){const o=r-n;if(o===0)return i;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(s-i)}function D3(t,e,n,i,r,s){if(r-n===0)return i;const a=Vw(i),l=Vw(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[Dl(t,e,n,a[0],r,l[0]),Dl(t,e,n,a[1],r,l[1]),a[2]+Dl(t,e,n,0,r,c),Dl(t,e,n,i[3],r,s[3])];return OR(C5(h))}function M3(t){return!0}function b3(t){const e=WR(),n=F3(t,e),i=HR();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=GR(r.getGeometry())),n(i)}}function iC(t){const e=WR(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=ym(t[o],e);const r=HR(),s=new Array(n);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<n;++c){const h=i[c](r);h&&(s[l]=h,l+=1)}return s.length=l,s}}function F3(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const s=t[r],o="filter"in s?Tr(s.filter,ft,e):M3;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=ym(s.style[c],e)}else a=[ym(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(t[a].else&&o)){o=!0;for(const c of i[a].styles){const h=c(r);h&&s.push(h)}}}return s}}function ym(t,e){const n=bu(t,"",e),i=Fu(t,"",e),r=j3(t,e),s=U3(t,e),o=En(t,"z-index",e);if(!n&&!i&&!r&&!s&&!hR(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Ks;return function(l){let c=!0;if(n){const h=n(l);h&&(c=!1),a.setFill(h)}if(i){const h=i(l);h&&(c=!1),a.setStroke(h)}if(r){const h=r(l);h&&(c=!1),a.setText(h)}if(s){const h=s(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function bu(t,e,n){let i;if(e+"fill-pattern-src"in t?i=W3(t,e+"fill-",n):i=Hy(t,e+"fill-color",n),!i)return null;const r=new oc;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Fu(t,e,n){const i=En(t,e+"stroke-width",n),r=Hy(t,e+"stroke-color",n);if(!i&&!r)return null;const s=Qi(t,e+"stroke-line-cap",n),o=Qi(t,e+"stroke-line-join",n),a=$R(t,e+"stroke-line-dash",n),l=En(t,e+"stroke-line-dash-offset",n),c=En(t,e+"stroke-miter-limit",n),h=new Tf;return function(d){if(r){const f=r(d);if(f==="none")return null;h.setColor(f)}if(i&&h.setWidth(i(d)),s){const f=s(d);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(f)}if(o){const f=o(d);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(f)}return a&&h.setLineDash(a(d)),l&&h.setLineDashOffset(l(d)),c&&h.setMiterLimit(c(d)),h}}function j3(t,e){const n="text-",i=Qi(t,n+"value",e);if(!i)return null;const r=bu(t,n,e),s=bu(t,n+"background-",e),o=Fu(t,n,e),a=Fu(t,n+"background-",e),l=Qi(t,n+"font",e),c=En(t,n+"max-angle",e),h=En(t,n+"offset-x",e),d=En(t,n+"offset-y",e),f=ju(t,n+"overflow",e),_=Qi(t,n+"placement",e),y=En(t,n+"repeat",e),T=Af(t,n+"scale",e),P=ju(t,n+"rotate-with-view",e),C=En(t,n+"rotation",e),E=Qi(t,n+"align",e),R=Qi(t,n+"justify",e),N=Qi(t,n+"baseline",e),M=$R(t,n+"padding",e),z=Nf(t,n+"declutter-mode"),m=new jy({declutterMode:z});return function(v){if(m.setText(i(v)),r&&m.setFill(r(v)),s&&m.setBackgroundFill(s(v)),o&&m.setStroke(o(v)),a&&m.setBackgroundStroke(a(v)),l&&m.setFont(l(v)),c&&m.setMaxAngle(c(v)),h&&m.setOffsetX(h(v)),d&&m.setOffsetY(d(v)),f&&m.setOverflow(f(v)),_){const I=_(v);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");m.setPlacement(I)}if(y&&m.setRepeat(y(v)),T&&m.setScale(T(v)),P&&m.setRotateWithView(P(v)),C&&m.setRotation(C(v)),E){const I=E(v);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");m.setTextAlign(I)}if(R){const I=R(v);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");m.setJustify(I)}if(N){const I=N(v);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");m.setTextBaseline(I)}return M&&m.setPadding(M(v)),m}}function U3(t,e){return"icon-src"in t?z3(t,e):"shape-points"in t?B3(t,e):"circle-radius"in t?V3(t,e):null}function z3(t,e){const n="icon-",i=n+"src",r=KR(t[i],i),s=Pd(t,n+"anchor",e),o=Af(t,n+"scale",e),a=En(t,n+"opacity",e),l=Pd(t,n+"displacement",e),c=En(t,n+"rotation",e),h=ju(t,n+"rotate-with-view",e),d=sC(t,n+"anchor-origin"),f=oC(t,n+"anchor-x-units"),_=oC(t,n+"anchor-y-units"),y=K3(t,n+"color"),T=H3(t,n+"cross-origin"),P=$3(t,n+"offset"),C=sC(t,n+"offset-origin"),E=kd(t,n+"width"),R=kd(t,n+"height"),N=G3(t,n+"size"),M=Nf(t,n+"declutter-mode"),z=new Gy({src:r,anchorOrigin:d,anchorXUnits:f,anchorYUnits:_,color:y,crossOrigin:T,offset:P,offsetOrigin:C,height:R,width:E,size:N,declutterMode:M});return function(m){return a&&z.setOpacity(a(m)),l&&z.setDisplacement(l(m)),c&&z.setRotation(c(m)),h&&z.setRotateWithView(h(m)),o&&z.setScale(o(m)),s&&z.setAnchor(s(m)),z}}function B3(t,e){const n="shape-",i=n+"points",r=n+"radius",s=vm(t[i],i),o=vm(t[r],r),a=bu(t,n,e),l=Fu(t,n,e),c=Af(t,n+"scale",e),h=Pd(t,n+"displacement",e),d=En(t,n+"rotation",e),f=ju(t,n+"rotate-with-view",e),_=kd(t,n+"radius2"),y=kd(t,n+"angle"),T=Nf(t,n+"declutter-mode"),P=new Rf({points:s,radius:o,radius2:_,angle:y,declutterMode:T});return function(C){return a&&P.setFill(a(C)),l&&P.setStroke(l(C)),h&&P.setDisplacement(h(C)),d&&P.setRotation(d(C)),f&&P.setRotateWithView(f(C)),c&&P.setScale(c(C)),P}}function V3(t,e){const n="circle-",i=bu(t,n,e),r=Fu(t,n,e),s=En(t,n+"radius",e),o=Af(t,n+"scale",e),a=Pd(t,n+"displacement",e),l=En(t,n+"rotation",e),c=ju(t,n+"rotate-with-view",e),h=Nf(t,n+"declutter-mode"),d=new xf({radius:5,declutterMode:h});return function(f){return s&&d.setRadius(s(f)),i&&d.setFill(i(f)),r&&d.setStroke(r(f)),a&&d.setDisplacement(a(f)),l&&d.setRotation(l(f)),c&&d.setRotateWithView(c(f)),o&&d.setScale(o(f)),d}}function En(t,e,n){if(!(e in t))return;const i=Tr(t[e],ne,n);return function(r){return vm(i(r),e)}}function Qi(t,e,n){if(!(e in t))return null;const i=Tr(t[e],Mn,n);return function(r){return KR(i(r),e)}}function W3(t,e,n){const i=Qi(t,e+"pattern-src",n),r=rC(t,e+"pattern-offset",n),s=rC(t,e+"pattern-size",n),o=Hy(t,e+"color",n);return function(a){return{src:i(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function ju(t,e,n){if(!(e in t))return null;const i=Tr(t[e],ft,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Hy(t,e,n){if(!(e in t))return null;const i=Tr(t[e],Nt|Mn,n);return function(r){return YR(i(r),e)}}function $R(t,e,n){if(!(e in t))return null;const i=Tr(t[e],ji,n);return function(r){return ac(i(r),e)}}function Pd(t,e,n){if(!(e in t))return null;const i=Tr(t[e],ji,n);return function(r){const s=ac(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function rC(t,e,n){if(!(e in t))return null;const i=Tr(t[e],ji,n);return function(r){return XR(i(r),e)}}function Af(t,e,n){if(!(e in t))return null;const i=Tr(t[e],ji|ne,n);return function(r){return Y3(i(r),e)}}function kd(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function G3(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return Fn(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function H3(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function sC(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function oC(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function $3(t,e){const n=t[e];if(n!==void 0)return ac(n,e)}function Nf(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function K3(t,e){const n=t[e];if(n!==void 0)return YR(n,e)}function ac(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function KR(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function vm(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function YR(t,e){if(typeof t=="string")return t;const n=ac(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function XR(t,e){const n=ac(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function Y3(t,e){return typeof t=="number"?t:XR(t,e)}const aC={RENDER_ORDER:"renderOrder"};class X3 extends Pf{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(aC.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new i3(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(aC.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?jR:e;const n=q3(e);this.styleFunction_=e===null?void 0:B5(n),this.changed()}}function q3(t){if(t===void 0)return jR;if(!t)return null;if(typeof t=="function"||t instanceof Ks)return t;if(!Array.isArray(t))return iC([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof Ks){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof Ks))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return b3(r)}return iC(t)}class Z3 extends nc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return Ne()}getData(e){return null}prepareFrame(e){return Ne()}renderFrame(e,n){return Ne()}loadedTileCallback(e,n,i){e[n]||(e[n]={}),e[n][i.tileCoord.toString()]=i}createLoadedTileFinder(e,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(e,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Re.LOADED||n.getState()===Re.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Re.LOADED&&n!=Re.ERROR&&e.addEventListener(ge.CHANGE,this.boundHandleImageChange_),n==Re.IDLE&&(e.load(),n=e.getState()),n==Re.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class qR extends Cs{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}}class Q3{constructor(){Rv(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(xd(),{get:(e,n)=>{if(typeof xd()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,r=n.length;i<r;++i){const s=n[i];if(typeof s=="function"){s(e);continue}const o=n[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}let Fo=null;function J3(){Fo=ti(1,1,void 0,{willReadFrequently:!0})}class ej extends Z3{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=fa(),this.pixelTransform=fa(),this.inversePixelTransform=fa(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,i){Fo||J3(),Fo.clearRect(0,0,1,1);let r;try{Fo.drawImage(e,n,i,1,1,0,0,1,1),r=Fo.getImageData(0,0,1,1).data}catch{return Fo=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&pf(Mu(e.style.backgroundColor),Mu(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ti();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const r=go(i),s=wf(i),o=Ef(i),a=vf(i);Hn(n.coordinateToPixelTransform,r),Hn(n.coordinateToPixelTransform,s),Hn(n.coordinateToPixelTransform,o),Hn(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Hn(l,r),Hn(l,s),Hn(l,o),Hn(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(at(i)/r*o),l=Math.round(Zn(i)/r*o);Nu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),dR(this.inversePixelTransform,this.pixelTransform);const c=m4(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){const s=new qR(e,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Ni.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(Ni.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Q3),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ni.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ni.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,r,s,o,a){const l=s/2,c=o/2,h=r/n,d=-h,f=-e[0]+a,_=-e[1];return Nu(this.tempTransform,l,c,h,d,-i,f,_)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class tj extends Cr{constructor(e){super(),this.projection=Ci(e.projection),this.attributions_=lC(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=lC(e),this.changed()}setState(e){this.state_=e,this.changed()}}function lC(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}const re={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ZR extends _f{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ge.CHANGE)}release(){this.state===re.ERROR&&this.setState(re.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==re.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==re.LOADED){e.interimTile=null;break}e.getState()==re.LOADING?n=e:e.getState()==re.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==re.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ne()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:zR(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class QR extends ZR{constructor(e,n,i,r,s,o){super(e,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=re.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=re.ERROR,this.unlistenImage_(),this.image_=nj(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=re.LOADED:this.state=re.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==re.ERROR&&(this.state=re.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==re.IDLE&&(this.state=re.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=A5(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function nj(){const t=ti(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class ij{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class rj extends Cy{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){Ne()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Nu(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),dR(r,i)}forEachFeatureAtCoordinate(e,n,i,r,s,o,a,l){let c;const h=n.viewState;function d(N,M,z,m){return s.call(o,M,N?z:null,m)}const f=h.projection,_=V4(e.slice(),f),y=[[0,0]];if(f.canWrapX()&&r){const N=f.getExtent(),M=at(N);y.push([-M,0],[M,0])}const T=n.layerStatesArray,P=T.length,C=[],E=[];for(let N=0;N<y.length;N++)for(let M=P-1;M>=0;--M){const z=T[M],m=z.layer;if(m.hasRenderer()&&Wy(z,h)&&a.call(l,m)){const v=m.getRenderer(),I=m.getSource();if(v&&I){const S=I.getWrapX()?_:e,k=d.bind(null,z.managed);E[0]=S[0]+y[N][0],E[1]=S[1]+y[N][1],c=v.forEachFeatureAtCoordinate(E,n,i,k,C)}if(c)return c}}if(C.length===0)return;const R=1/C.length;return C.forEach((N,M)=>N.distanceSq+=M*R),C.sort((N,M)=>N.distanceSq-M.distanceSq),C.some(N=>c=N.callback(N.feature,N.layer,N.geometry)),c}hasFeatureAtCoordinate(e,n,i,r,s,o){return this.forEachFeatureAtCoordinate(e,n,i,r,wd,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ne()}scheduleExpireIconCache(e){Li.canExpireCache()&&e.postRenderFunctions.push(sj)}}function sj(t,e){Li.expire()}class oj extends rj{constructor(e){super(e),this.fontChangeListenerKey_=Be(z5,Au.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Sf+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const r=new qR(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){Et(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ni.PRECOMPOSE,e);const n=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});n.some(a=>a.layer instanceof X3&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=n.length;a<l;++a){const c=n[a];e.layerIndex=a;const h=c.layer,d=h.getSourceState();if(!Wy(c,r)||d!="ready"&&d!="undefined"){h.unrender();continue}const f=h.render(e,o);f&&(f!==o&&(this.children_.push(f),o=f),s.push(c))}this.declutter(e,s),k5(this.element_,this.children_),this.dispatchRenderEvent(Ni.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){const r=n[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}n.forEach(i=>i.layer.renderDeferred(e))}}}class zr extends Cs{constructor(e,n){super(e),this.layer=n}}const Up={LAYERS:"layers"};class Ga extends UR{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Up.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new sr(i.slice(),{unique:!0}):Ve(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new sr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Et),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Be(e,Xn.ADD,this.handleLayersAdd_,this),Be(e,Xn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Et);mf(this.listenerKeys_);const n=e.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new zr("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[Be(e,Au.PROPERTYCHANGE,this.handleLayerChange_,this),Be(e,ge.CHANGE,this.handleLayerChange_,this)];e instanceof Ga&&n.push(Be(e,"addlayer",this.handleLayerGroupAdd_,this),Be(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[an(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new zr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new zr("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new zr("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=an(n);this.listenerKeys_[i].forEach(Et),delete this.listenerKeys_[i],this.dispatchEvent(new zr("removelayer",n)),this.changed()}getLayers(){return this.get(Up.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new zr("removelayer",i[r]))}this.set(Up.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Ql(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}class jo extends Cs{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class br extends jo{constructor(e,n,i,r,s,o){super(e,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const pt={SINGLECLICK:"singleclick",CLICK:ge.CLICK,DBLCLICK:ge.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Em={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class aj extends _f{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Be(i,Em.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Be(i,Em.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ge.TOUCHMOVE,this.boundHandleTouchMove_,FR?{passive:!1}:!1)}emulateClick_(e){let n=new br(pt.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new br(pt.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new br(pt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==pt.POINTERUP||n.type==pt.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==pt.POINTERDOWN||n.type==pt.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new br(pt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Et),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new br(pt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Be(i,pt.POINTERMOVE,this.handlePointerMove_,this),Be(i,pt.POINTERUP,this.handlePointerUp_,this),Be(this.element_,pt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Be(this.element_.getRootNode(),pt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new br(pt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new br(pt.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Et(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ge.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Et(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Et),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Fr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Yt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ad=1/0;class lj{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,mf(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Ve(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=Ad?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,r=n.length,s=n[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<r&&i[c]<i[l]?c:l;n[e]=n[h],i[e]=i[h],e=h}n[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>e;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==Ad?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}class uj extends lj{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(ge.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===re.LOADED||i===re.ERROR||i===re.EMPTY){i!==re.ERROR&&n.removeEventListener(ge.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===re.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}function cj(t,e,n,i,r){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return Ad;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class $y extends Cr{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){_m(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&_m(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)Et(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Cd&&this.listenerKeys.push(Be(e,Fr.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class hj extends $y{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ge.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+Sf+" "+Fy+(this.collapsed_&&this.collapsible_?" "+$w:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(r=>d4(()=>r))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!pf(n,this.renderedAttributions_)){P5(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($w),this.collapsed_?Ww(this.collapseLabel_,this.label_):Ww(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class dj extends $y{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(ge.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+Sf+" "+Fy,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Qc)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Va}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Qc);!s&&i===0?this.element.classList.add(Qc):s&&i!==0&&this.element.classList.remove(Qc)}this.label_.style.transform=r}this.rotation_=i}}class fj extends $y{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(ge.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(ge.CLICK,this.handleClick_.bind(this,-i),!1);const f=n+" "+Sf+" "+Fy,_=this.element;_.className=f,_.appendChild(h),_.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Va})):i.setZoom(s)}}}function pj(t){t=t||{};const e=new sr;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new fj(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new dj(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new hj(t.attributionOptions)),e}const uC={ACTIVE:"active"};class lc extends Cr{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(uC.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(uC.ACTIVE,e)}setMap(e){this.map_=e}}function gj(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:q5,center:t.getConstrainedCenter(r)})}}function Ky(t,e,n,i){const r=t.getZoom();if(r===void 0)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:Va})}class mj extends lc{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==pt.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Ky(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}class uc extends lc{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==pt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==pt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==pt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==pt.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Yy(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}function wm(t){const e=arguments;return function(n){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](n),!!i);++r);return i}}const _j=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yj=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},JR=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?yj(t):!0},vj=wd,ex=function(t){const e=t.originalEvent;return e.button==0&&!(R5&&DR&&e.ctrlKey)},tx=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Ej=function(t){const e=t.originalEvent;return DR?e.metaKey:e.ctrlKey},wj=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},nx=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},zp=function(t){const e=t.originalEvent;return Ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Cj=function(t){const e=t.originalEvent;return Ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Tj extends uc{constructor(e){super({stopDown:gf}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:wm(tx,Cj);this.condition_=e.onFocusOnly?wm(JR,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(Yy(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();B4(s,a.getResolution()),Ry(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Va})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Ij extends uc{constructor(e){e=e||{},super({stopDown:gf}),this.condition_=e.condition?e.condition:_j,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!zp(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===Vy)return;const r=n.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return zp(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return zp(e)&&ex(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Sj extends Cy{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ou([r])}getGeometry(){return this.geometry_}}const Tl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class nh extends Cs{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class Rj extends uc{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Sj(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:ex,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new nh(Tl.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new nh(n?Tl.BOXEND:Tl.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new nh(Tl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new nh(Tl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class xj extends Rj{constructor(e){e=e||{};const n=e.condition?e.condition:wj;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Va})}}const Ns={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Pj extends lc{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return tx(n)&&nx(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==ge.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Ns.DOWN||r==Ns.LEFT||r==Ns.RIGHT||r==Ns.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==Ns.DOWN?c=-a:r==Ns.LEFT?l=-a:r==Ns.RIGHT?l=a:c=a;const h=[l,c];Ry(h,o.getRotation()),gj(o,h,this.duration_),i.preventDefault(),n=!0}}return!n}}class kj extends lc{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!Ej(n)&&nx(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==ge.KEYDOWN||e.type==ge.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Ky(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class Aj extends lc{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:vj;this.condition_=e.onFocusOnly?wm(JR,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==ge.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==ge.WHEEL&&(s=r.deltaY,I5&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=MR),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-Ot(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Ky(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Nj extends uc{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=gf),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Vy&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Yy(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class Lj extends uc{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=gf),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Yy(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function Oj(t){t=t||{};const e=new sr,n=new ij(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new Ij),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new mj({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new Tj({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Nj),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new Lj({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new Pj),e.push(new kj({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new Aj({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new xj({duration:t.zoomDuration})),e}function ix(t){if(t instanceof Pf){t.setMapInternal(null);return}t instanceof Ga&&t.getLayers().forEach(ix)}function rx(t,e){if(t instanceof Pf){t.setMapInternal(e);return}if(t instanceof Ga){const n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)rx(n[i],e)}}let Dj=class extends Cr{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=Mj(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:MR,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fa(),this.pixelToCoordinateTransform_=fa(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||pj(),this.interactions=n.interactions||Oj({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new uj(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Yt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Yt.VIEW,this.handleViewChanged_),this.addChangeListener(Yt.SIZE,this.handleSizeChanged_),this.addChangeListener(Yt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof ki)&&e.view.then(function(r){i.setView(new ki(r))}),this.controls.addEventListener(Xn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Xn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Xn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Xn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Xn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Xn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){rx(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:wd,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(r){r instanceof Ga?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:wd,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Yt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return gm(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Hn(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Yt.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof sr){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Xi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Hn(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Yt.SIZE)}getView(){return this.get(Yt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return cj(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;const i=new br(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===Em.POINTERDOWN||i===ge.WHEEL||i===ge.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[$n.ANIMATING]||o[$n.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Ni.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ni.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new jo(Fr.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new jo(Fr.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Et(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ge.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ge.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,_m(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new oj(this)),this.mapBrowserEventHandler_=new aj(this,this.moveTolerance_);for(const s in pt)this.mapBrowserEventHandler_.addEventListener(pt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ge.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ge.WHEEL,this.boundHandleBrowserEvent_,FR?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Be(i,ge.KEYDOWN,this.handleBrowserEvent,this),Be(i,ge.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Et(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Et(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Be(e,Au.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Be(e,ge.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Et),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new zr("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Be(e,Au.PROPERTYCHANGE,this.render,this),Be(e,ge.CHANGE,this.render,this),Be(e,"addlayer",this.handleLayerAdd_,this),Be(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ix(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&Gw(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:hm(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:an(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=hm(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Cf(this.previousExtent_)&&!um(s.extent,this.previousExtent_))&&(this.dispatchEvent(new jo(Fr.MOVESTART,this,r)),this.previousExtent_=yf(this.previousExtent_)),this.previousExtent_&&!s.viewHints[$n.ANIMATING]&&!s.viewHints[$n.INTERACTING]&&!um(s.extent,this.previousExtent_)&&(this.dispatchEvent(new jo(Fr.MOVEEND,this,s)),_4(s.extent,this.previousExtent_))),this.dispatchEvent(new jo(Fr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Fr.LOADSTART)||this.hasListener(Fr.LOADEND)||this.hasListener(Ni.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new zr("removelayer",n)),this.set(Yt.LAYERGROUP,e)}setSize(e){this.set(Yt.SIZE,e)}setTarget(e){this.set(Yt.TARGET,e)}setView(e){if(!e||e instanceof ki){this.set(Yt.VIEW,e);return}this.set(Yt.VIEW,new ki);const n=this;e.then(function(i){n.setView(new ki(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!Gw(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&vR("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!pf(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function Mj(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Ga({layers:t.layers});n[Yt.LAYERGROUP]=i,n[Yt.TARGET]=t.target,n[Yt.VIEW]=t.view instanceof ki?t.view:new ki;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new sr(t.controls.slice()):(Ve(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new sr(t.interactions.slice()):(Ve(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new sr(t.overlays.slice()):(Ve(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new sr,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}class bj{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return Ve(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return Ve(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){Ve(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function cC(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Lf(t,e,n){return t+"/"+e+"/"+n}function sx(t){return Lf(t[0],t[1],t[2])}function Fj(t){return t.split("/").map(Number)}function jj(t){return(t[1]<<t[0])+t[2]}function Uj(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(i,r):!0}class ox extends bj{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Fj(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(sx(r.tileCoord)),r.release())})}}class Xy{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Lo(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Xy(t,e,n,i)}const ih={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class zj extends Pf{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(ih.PRELOAD)}setPreload(e){this.set(ih.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ih.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ih.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const Bj=.5,Vj=10,hC=.25;class Wj{constructor(e,n,i,r,s,o){this.sourceProj_=e,this.targetProj_=n;let a={};const l=Rd(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const R=E[0]+"/"+E[1];return a[R]||(a[R]=l(E)),a[R]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&at(r)>=at(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?at(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?at(this.targetProj_.getExtent()):null;const c=go(i),h=wf(i),d=Ef(i),f=vf(i),_=this.transformInv_(c),y=this.transformInv_(h),T=this.transformInv_(d),P=this.transformInv_(f),C=Vj+(o?Math.max(0,Math.ceil(Math.log2(cm(i)/(o*o*256*256)))):0);if(this.addQuad_(c,h,d,f,_,y,T,P,C),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(R,N,M){E=Math.min(E,R.source[0][0],R.source[1][0],R.source[2][0])}),this.triangles_.forEach(R=>{if(Math.max(R.source[0][0],R.source[1][0],R.source[2][0])-E>this.sourceWorldWidth_/2){const N=[[R.source[0][0],R.source[0][1]],[R.source[1][0],R.source[1][1]],[R.source[2][0],R.source[2][1]]];N[0][0]-E>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-E>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-E>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const M=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-M<this.sourceWorldWidth_/2&&(R.source=N)}})}a={}}addTriangle_(e,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,n,i]})}addQuad_(e,n,i,r,s,o,a,l,c){const h=xw([s,o,a,l]),d=this.sourceWorldWidth_?at(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1;let y=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const P=xw([e,n,i,r]);y=at(P)/this.targetWorldWidth_>hC||y}!_&&this.sourceProj_.isGlobal()&&d&&(y=d>hC||y)}if(!y&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!rc(h,this.maxSourceExtent_))return;let T=0;if(!y&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)y=!0;else if(T=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),T!=1&&T!=2&&T!=4&&T!=8)return}if(c>0){if(!y){const P=[(e[0]+i[0])/2,(e[1]+i[1])/2],C=this.transformInv_(P);let E;_?E=(ma(s[0],f)+ma(a[0],f))/2-ma(C[0],f):E=(s[0]+a[0])/2-C[0];const R=(s[1]+a[1])/2-C[1];y=E*E+R*R>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const P=[(n[0]+i[0])/2,(n[1]+i[1])/2],C=this.transformInv_(P),E=[(r[0]+e[0])/2,(r[1]+e[1])/2],R=this.transformInv_(E);this.addQuad_(e,n,P,E,s,o,C,R,c-1),this.addQuad_(E,P,i,r,R,C,a,l,c-1)}else{const P=[(e[0]+n[0])/2,(e[1]+n[1])/2],C=this.transformInv_(P),E=[(i[0]+r[0])/2,(i[1]+r[1])/2],R=this.transformInv_(E);this.addQuad_(e,P,E,r,s,C,R,l,c-1),this.addQuad_(P,n,i,E,C,o,a,R,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}T&11||this.addTriangle_(e,i,r,s,a,l),T&14||this.addTriangle_(e,i,n,s,a,o),T&&(T&13||this.addTriangle_(n,r,e,o,l,s),T&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const e=po();return this.triangles_.forEach(function(n,i,r){const s=n.source;Ch(e,s[0]),Ch(e,s[1]),Ch(e,s[2])}),e}getTriangles(){return this.triangles_}}let Bp;const _a=[];function dC(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function Vp(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function Gj(){if(Bp===void 0){const t=ti(6,6,_a);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",dC(t,4,5,4,0),dC(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Bp=Vp(e,0)||Vp(e,4)||Vp(e,8),My(t),_a.push(t.canvas)}return Bp}function fC(t,e,n,i){const r=CR(n,e,t);let s=Ow(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||Iy(l,r)){const c=Ow(t,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function Hj(t,e,n,i){const r=Aa(n);let s=fC(t,e,r,i);return(!isFinite(s)||s<=0)&&mR(n,function(o){return s=fC(t,e,o,i),isFinite(s)&&s>0}),s}function $j(t,e,n,i,r,s,o,a,l,c,h,d,f,_){const y=ti(Math.round(n*t),Math.round(n*e),_a);if(d||(y.imageSmoothingEnabled=!1),l.length===0)return y.canvas;y.scale(n,n);function T(M){return Math.round(M*n)/n}y.globalCompositeOperation="lighter";const P=po();l.forEach(function(M,z,m){w4(P,M.extent)});let C;const E=n/i,R=(d?1:1+Math.pow(2,-24))/E;C=ti(Math.round(at(P)*E),Math.round(Zn(P)*E),_a),d||(C.imageSmoothingEnabled=!1),l.forEach(function(M,z,m){if(M.image.width>0&&M.image.height>0){if(M.clipExtent){C.save();const L=(M.clipExtent[0]-P[0])*E,x=-(M.clipExtent[3]-P[3])*E,fe=at(M.clipExtent)*E,Fe=Zn(M.clipExtent)*E;C.rect(d?L:Math.round(L),d?x:Math.round(x),d?fe:Math.round(L+fe)-Math.round(L),d?Fe:Math.round(x+Fe)-Math.round(x)),C.clip()}const v=(M.extent[0]-P[0])*E,I=-(M.extent[3]-P[3])*E,S=at(M.extent)*E,k=Zn(M.extent)*E;C.drawImage(M.image,c,c,M.image.width-2*c,M.image.height-2*c,d?v:Math.round(v),d?I:Math.round(I),d?S:Math.round(v+S)-Math.round(v),d?k:Math.round(I+k)-Math.round(I)),M.clipExtent&&C.restore()}});const N=go(o);return a.getTriangles().forEach(function(M,z,m){const v=M.source,I=M.target;let S=v[0][0],k=v[0][1],L=v[1][0],x=v[1][1],fe=v[2][0],Fe=v[2][1];const we=T((I[0][0]-N[0])/s),$e=T(-(I[0][1]-N[1])/s),V=T((I[1][0]-N[0])/s),J=T(-(I[1][1]-N[1])/s),Q=T((I[2][0]-N[0])/s),he=T(-(I[2][1]-N[1])/s),ie=S,le=k;S=0,k=0,L-=ie,x-=le,fe-=ie,Fe-=le;const _t=[[L,x,0,0,V-we],[fe,Fe,0,0,Q-we],[0,0,L,x,J-$e],[0,0,fe,Fe,he-$e]],xe=j4(_t);if(!xe)return;if(y.save(),y.beginPath(),Gj()||!d){y.moveTo(V,J);const Te=4,Vt=we-V,zi=$e-J;for(let It=0;It<Te;It++)y.lineTo(V+T((It+1)*Vt/Te),J+T(It*zi/(Te-1))),It!=Te-1&&y.lineTo(V+T((It+1)*Vt/Te),J+T((It+1)*zi/(Te-1)));y.lineTo(Q,he)}else y.moveTo(V,J),y.lineTo(we,$e),y.lineTo(Q,he);y.clip(),y.transform(xe[0],xe[2],xe[1],xe[3],we,$e),y.translate(P[0]-ie,P[3]-le);let De;if(C)De=C.canvas,y.scale(R,-R);else{const Te=l[0],Vt=Te.extent;De=Te.image,y.scale(at(Vt)/De.width,-Zn(Vt)/De.height)}y.drawImage(De,0,0),y.restore()}),C&&(My(C),_a.push(C.canvas)),h&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,a.getTriangles().forEach(function(M,z,m){const v=M.target,I=(v[0][0]-N[0])/s,S=-(v[0][1]-N[1])/s,k=(v[1][0]-N[0])/s,L=-(v[1][1]-N[1])/s,x=(v[2][0]-N[0])/s,fe=-(v[2][1]-N[1])/s;y.beginPath(),y.moveTo(k,L),y.lineTo(I,S),y.lineTo(x,fe),y.closePath(),y.stroke()}),y.restore()),y.canvas}class Cm extends ZR{constructor(e,n,i,r,s,o,a,l,c,h,d,f){super(s,re.IDLE,f),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let T=this.sourceTileGrid_.getExtent();const P=y?Ql(_,y):_;if(cm(P)===0){this.state=re.EMPTY;return}const C=e.getExtent();C&&(T?T=Ql(T,C):T=C);const E=r.getResolution(this.wrappedTileCoord_[0]),R=Hj(e,i,P,E);if(!isFinite(R)||R<=0){this.state=re.EMPTY;return}const N=h!==void 0?h:Bj;if(this.triangulation_=new Wj(e,i,P,T,R*N,E),this.triangulation_.getTriangles().length===0){this.state=re.EMPTY;return}this.sourceZ_=n.getZForResolution(R);let M=this.triangulation_.calculateSourceExtent();if(T&&(e.canWrapX()?(M[1]=Ot(M[1],T[1],T[3]),M[3]=Ot(M[3],T[1],T[3])):M=Ql(M,T)),!cm(M))this.state=re.EMPTY;else{let z=0,m=0;e.canWrapX()&&(z=at(C),m=Math.floor((M[0]-C[0])/z)),x4(M.slice(),e).forEach(I=>{const S=n.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let k=S.minX;k<=S.maxX;k++)for(let L=S.minY;L<=S.maxY;L++){const x=c(this.sourceZ_,k,L,a);if(x){const fe=m*z;this.sourceTiles_.push({tile:x,offset:fe})}}++m}),this.sourceTiles_.length===0&&(this.state=re.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var r;const i=n.tile;if(i&&i.getState()==re.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=n.offset,s[2]+=n.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=re.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=$j(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=re.LOADED}this.changed()}load(){if(this.state==re.IDLE){this.state=re.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i==re.IDLE||i==re.LOADING){e++;const r=Be(n,ge.CHANGE,function(s){const o=n.getState();(o==re.LOADED||o==re.ERROR||o==re.EMPTY)&&(Et(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,r){n.getState()==re.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Et),this.sourcesListenerKeys_=null}release(){this.canvas_&&(My(this.canvas_.getContext("2d")),_a.push(this.canvas_),this.canvas_=null),super.release()}}class Kj extends ej{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=po(),this.tmpTileRange_=new Xy(0,0,0,0)}isDrawableTile(e){const n=this.getLayer(),i=e.getState(),r=n.getUseInterimTilesOnError();return i==re.LOADED||i==re.EMPTY||i==re.ERROR&&!r}getTile(e,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,n,i,s,o);return c.getState()==re.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Hn(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Iy(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),h=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(n.pixelRatio);for(let f=h.getZForResolution(l.resolution);f>=h.getMinZoom();--f){const _=h.getTileCoordForCoordAndZ(r,f),y=c.getTile(f,_[1],_[2],o,a);if(!(y instanceof QR||y instanceof Cm)||y instanceof Cm&&y.getState()===re.EMPTY)return null;if(y.getState()!==re.LOADED)continue;const T=h.getOrigin(f),P=Fn(h.getTileSize(f)),C=h.getResolution(f),E=Math.floor(d*((r[0]-T[0])/C-_[1]*P[0])),R=Math.floor(d*((T[1]-r[1])/C-_[2]*P[1])),N=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(y.getImage(),E+N,R+N)}return null}loadedTileCallback(e,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,n,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,h=this.getLayer(),d=h.getSource(),f=d.getRevision(),_=d.getTileGridForProjection(s),y=_.getZForResolution(o,d.zDirection),T=_.getResolution(y);let P=e.extent;const C=e.viewState.resolution,E=d.getTilePixelRatio(c);this.prepareContainer(e,n);const R=this.context.canvas.width,N=this.context.canvas.height,M=i.extent&&ea(i.extent);M&&(P=Ql(P,ea(i.extent)));const z=T*R/2/E,m=T*N/2/E,v=[a[0]-z,a[1]-m,a[0]+z,a[1]+m],I=_.getTileRangeForExtentAndZ(P,y),S={};S[y]={};const k=this.createLoadedTileFinder(d,s,S),L=this.tmpExtent,x=this.tmpTileRange_;this.newTiles_=!1;const fe=l?dm(r.center,C,l,e.size):void 0;for(let he=I.minX;he<=I.maxX;++he)for(let ie=I.minY;ie<=I.maxY;++ie){if(l&&!_.tileCoordIntersectsViewport([y,he,ie],fe))continue;const le=this.getTile(y,he,ie,e);if(this.isDrawableTile(le)){const De=an(this);if(le.getState()==re.LOADED){S[y][le.tileCoord.toString()]=le;let Te=le.inTransition(De);Te&&i.opacity!==1&&(le.endTransition(De),Te=!1),!this.newTiles_&&(Te||!this.renderedTiles.includes(le))&&(this.newTiles_=!0)}if(le.getAlpha(De,e.time)===1)continue}const _t=_.getTileCoordChildTileRange(le.tileCoord,x,L);let xe=!1;_t&&(xe=k(y+1,_t)),xe||_.forEachTileCoordParentTileRange(le.tileCoord,k,x,L)}const Fe=T/o*c/E,we=this.getRenderContext(e);Nu(this.tempTransform,R/2,N/2,Fe,Fe,0,-R/2,-N/2),M&&this.clipUnrotated(we,e,M),d.getInterpolate()||(we.imageSmoothingEnabled=!1),this.preRender(we,e),this.renderedTiles.length=0;let $e=Object.keys(S).map(Number);$e.sort(ff);let V,J,Q;i.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?$e=$e.reverse():(V=[],J=[]);for(let he=$e.length-1;he>=0;--he){const ie=$e[he],le=d.getTilePixelSize(ie,c,s),xe=_.getResolution(ie)/T,De=le[0]*xe*Fe,Te=le[1]*xe*Fe,Vt=_.getTileCoordForCoordAndZ(go(v),ie),zi=_.getTileCoordExtent(Vt),It=Hn(this.tempTransform,[E*(zi[0]-v[0])/T,E*(v[3]-zi[3])/T]),Ir=E*d.getGutterForProjection(s),dt=S[ie];for(const Vn in dt){const An=dt[Vn],Sr=An.tileCoord,Nn=Vt[1]-Sr[1],Ha=Math.round(It[0]-(Nn-1)*De),_o=Vt[2]-Sr[2],Ts=Math.round(It[1]-(_o-1)*Te),en=Math.round(It[0]-Nn*De),dn=Math.round(It[1]-_o*Te),Bi=Ha-en,ni=Ts-dn,fn=y===ie,ii=fn&&An.getAlpha(an(this),e.time)!==1;let lt=!1;if(!ii)if(V){Q=[en,dn,en+Bi,dn,en+Bi,dn+ni,en,dn+ni];for(let it=0,tn=V.length;it<tn;++it)if(y!==ie&&ie<J[it]){const Ze=V[it];rc([en,dn,en+Bi,dn+ni],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(lt||(we.save(),lt=!0),we.beginPath(),we.moveTo(Q[0],Q[1]),we.lineTo(Q[2],Q[3]),we.lineTo(Q[4],Q[5]),we.lineTo(Q[6],Q[7]),we.moveTo(Ze[6],Ze[7]),we.lineTo(Ze[4],Ze[5]),we.lineTo(Ze[2],Ze[3]),we.lineTo(Ze[0],Ze[1]),we.clip())}V.push(Q),J.push(ie)}else we.clearRect(en,dn,Bi,ni);this.drawTileImage(An,e,en,dn,Bi,ni,Ir,fn),V&&!ii?(lt&&we.restore(),this.renderedTiles.unshift(An)):this.renderedTiles.push(An),this.updateUsedTiles(e.usedTiles,d,An)}}return this.renderedRevision=f,this.renderedResolution=T,this.extentChanged=!this.renderedExtent_||!um(this.renderedExtent_,v),this.renderedExtent_=v,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,d,_,c,s,P,y,h.getPreload()),this.scheduleExpireCache(e,d),this.postRender(this.context,e),i.extent&&we.restore(),we.imageSmoothingEnabled=!0,this.container}drawTileImage(e,n,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const h=this.getRenderContext(n),d=an(this),f=n.layerStatesArray[n.layerIndex],_=f.opacity*(l?e.getAlpha(d,n.time):1),y=_!==h.globalAlpha;y&&(h.save(),h.globalAlpha=_),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),y&&h.restore(),_!==f.opacity?n.animate=!0:l&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=an(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(i)}}updateUsedTiles(e,n,i){const r=an(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,n,i,r,s,o,a,l,c){const h=an(n);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],f=e.tileQueue,_=i.getMinZoom(),y=e.viewState.rotation,T=y?dm(e.viewState.center,e.viewState.resolution,y,e.size):void 0;let P=0,C,E,R,N,M,z;for(z=_;z<=a;++z)for(E=i.getTileRangeForExtentAndZ(o,z,E),R=i.getResolution(z),N=E.minX;N<=E.maxX;++N)for(M=E.minY;M<=E.maxY;++M)y&&!i.tileCoordIntersectsViewport([z,N,M],T)||(a-z<=l?(++P,C=n.getTile(z,N,M,r,s),C.getState()==re.IDLE&&(d[C.getKey()]=!0,f.isKeyQueued(C.getKey())||f.enqueue([C,h,i.getTileCoordCenter(C.tileCoord),R])),c!==void 0&&c(C)):n.useTile(z,N,M,s));n.updateCacheSize(P,s)}}class Yj extends zj{constructor(e){super(e)}createRenderer(){return new Kj(this)}}const Wp={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Oo=[0,0,0],Dr=5;class ax{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ve(c4(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ve(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=go(i)),Ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ve(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Uy,Ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new Xy(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const r=this.getTileRangeForExtentAndZ(e,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(e,n,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Lo(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Lo(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(n===r)return Lo(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),h=Math.floor(o*l);if(n<r)return Lo(c,c,h,h,i);const d=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return Lo(c,d,h,f,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,Oo);const r=Oo[1],s=Oo[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,Oo);const o=Oo[1],a=Oo[2];return Lo(r,o,s,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Fn(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Fn(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return ic(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Fn(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/i/c[0],d=a*(l[1]-n)/i/c[1];return r?(h=Zc(h,Dr)-1,d=Zc(d,Dr)-1):(h=qc(h,Dr),d=qc(d,Dr)),cC(o,h,d,s)}getTileCoordForXYAndZ_(e,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Fn(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],h=(o[1]-n)/a/l[1];return r?(c=Zc(c,Dr)-1,h=Zc(h,Dr)-1):(c=qc(c,Dr),h=qc(h,Dr)),cC(i,c,h,s)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=Ty(this.resolutions_,e,n||0);return Ot(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return AR(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function lx(t){let e=t.getDefaultTileGrid();return e||(e=Qj(t),t.setDefaultTileGrid(e)),e}function Xj(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=qy(n);if(!Iy(s,r)){const o=at(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,t.getTileCoordForCoordAndZ(r,i)}return e}function qj(t,e,n,i){i=i!==void 0?i:"top-left";const r=ux(t,e,n);return new ax({extent:t,origin:T4(t,i),resolutions:r,tileSize:n})}function Zj(t){const e=t||{},n=e.extent||Ci("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ux(n,e.maxZoom,e.tileSize,e.maxResolution)};return new ax(i)}function ux(t,e,n,i){e=e!==void 0?e:W5,n=Fn(n!==void 0?n:Uy);const r=Zn(t),s=at(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Qj(t,e,n,i){const r=qy(t);return qj(r,e,n,i)}function qy(t){t=Ci(t);let e=t.getExtent();if(!e){const n=180*Sy.degrees/t.getMetersPerUnit();e=ic(-n,-n,n,n)}return e}class Jj extends tj{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&Fn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new ox(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}forEachLoadedTile(e,n,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let h=i.minX;h<=i.maxX;++h)for(let d=i.minY;d<=i.maxY;++d)l=Lf(n,h,d),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===re.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,s){return Ne()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:lx(e)}getTileCacheForProjection(e){const n=this.getProjection();return Ve(n===null||Mo(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=Fn(r.getTileSize(e),this.tmpSize);return s==1?o:M5(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Xj(i,e,n)),Uj(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){const i=this.getTileCacheForProjection(n);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,n,i,r){}}class eU extends Cs{constructor(e,n){super(e),this.tile=n}}function tU(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],h=e.getFullTileRange(c);if(!h)throw new Error("The {-y} placeholder requires a tile grid with extent");return(h.getHeight()-o[2]-1).toString()})}}function nU(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=tU(t[r],e);return iU(i)}function iU(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const r=jj(e),s=ma(r,t.length);return t[s](e,n,i)}}function rU(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}class Zy extends Jj{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Zy.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=an(n),r=n.getState();let s;r==re.LOADING?(this.tileLoadingKeys_[i]=!0,s=Wp.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==re.ERROR?Wp.TILELOADERROR:r==re.LOADED?Wp.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new eU(s,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=rU(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(nU(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){const r=Lf(e,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}class sU extends Zy{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:oU,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:QR,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Mo(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Mo(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Mo(n,e)))return this.tileGrid;const i=an(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=lx(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||Mo(n,e))return this.tileCache;const i=an(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new ox(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,r,s,o){const a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(a,c!==void 0?re.IDLE:re.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(ge.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,n,i,r,s){const o=this.getProjection();if(!o||!s||Mo(o,s))return this.getTileInternal(e,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,n,i];let c;const h=sx(l);a.containsKey(h)&&(c=a.get(h));const d=this.getKey();if(c&&c.key==d)return c;const f=this.getTileGridForProjection(o),_=this.getTileGridForProjection(s),y=this.getTileCoordForTileUrlFunction(l,s),T=new Cm(o,f,s,_,l,y,this.getTilePixelRatio(r),this.getGutter(),(P,C,E,R)=>this.getTileInternal(P,C,E,R,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return T.key=d,c?(T.interimTile=c,T.refreshInterimChain(),a.replace(h,T)):a.set(h,T),T}getTileInternal(e,n,i,r,s){let o=null;const a=Lf(e,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,n,i,r,s,l),c.getState()==re.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const i=Ci(e);if(i){const r=an(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function oU(t,e){t.getImage().src=e}class aU extends sU{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Zj({extent:qy(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const lU='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class uU extends aU{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[lU];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const cU="_mapContainer_b9a4r_1",hU={mapContainer:cU};function dU(){const t=U.useRef(null);return U.useEffect(()=>{if(!t.current)return;const e=yl([32.8597,39.9334]),n=new Dj({target:t.current,layers:[new Yj({source:new uU})],view:new ki({center:e,zoom:12,minZoom:11,maxZoom:18,extent:[yl([31.5,39])[0],yl([31.5,39])[1],yl([34.5,40.5])[0],yl([34.5,40.5])[1]]})});return n.getInteractions().forEach(i=>{i.constructor.name==="DragPan"&&i.setActive(!1),i.constructor.name==="Zoom"&&i.setActive(!1)}),n.getControls().forEach(i=>{n.removeControl(i)}),()=>{n.setTarget(null)}},[]),O.jsx("div",{ref:t,className:hU.mapContainer})}const fU="_chatPanel_22aj3_1",pU="_tabs_22aj3_11",gU="_tab_22aj3_11",mU="_active_22aj3_35",_U="_messagesContainer_22aj3_41",yU="_message_22aj3_41",vU="_messageHeader_22aj3_57",EU="_time_22aj3_69",wU="_messageText_22aj3_74",CU="_inputContainer_22aj3_80",TU="_input_22aj3_80",IU="_sendBtn_22aj3_96",SU="_contactsList_22aj3_117",RU="_contactItem_22aj3_133",xU="_contactAvatar_22aj3_149",PU="_contactInfo_22aj3_155",kU="_contactName_22aj3_160",AU="_contactPreview_22aj3_167",NU="_chatHeader_22aj3_176",LU="_backBtn_22aj3_185",OU="_selectedPersonInfo_22aj3_199",DU="_personAvatar_22aj3_205",MU="_personName_22aj3_209",Me={chatPanel:fU,tabs:pU,tab:gU,active:mU,messagesContainer:_U,message:yU,messageHeader:vU,time:EU,messageText:wU,inputContainer:CU,input:TU,sendBtn:IU,contactsList:SU,contactItem:RU,contactAvatar:xU,contactInfo:PU,contactName:kU,contactPreview:AU,chatHeader:NU,backBtn:LU,selectedPersonInfo:OU,personAvatar:DU,personName:MU};function bU(){const[t,e]=U.useState("general"),[n,i]=U.useState(null),[r,s]=U.useState([{id:1,user:"Ahmet",text:"Merhaba herkes!",time:"14:23"},{id:2,user:"Fatma",text:"Selam Ahmet! Naslsn?",time:"14:24"}]),[o,a]=U.useState(""),l=[{id:1,name:"Aye Ylmaz",avatar:"",messages:["Selam! yi misin?","Bugn etkinlie gelir misin?"]},{id:2,name:"Mehmet Kaya",avatar:"",messages:["Yarn harita zerinde grelim"]},{id:3,name:"Zeynep ahin",avatar:"",messages:["Etkinlik harika geti!","Teekkrler!"]},{id:4,name:"Emre Demir",avatar:"",messages:["Planlara katlmak istiyorum"]},{id:5,name:"Selin Acar",avatar:"",messages:["ok elendim"]}],c=()=>{o.trim()&&(s([...r,{id:r.length+1,user:"Sen",text:o,time:new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}]),a(""))};return O.jsxs("div",{className:Me.chatPanel,children:[O.jsxs("div",{className:Me.tabs,children:[O.jsx("button",{className:`${Me.tab} ${t==="general"?Me.active:""}`,onClick:()=>{e("general"),i(null)},children:" Genel"}),O.jsx("button",{className:`${Me.tab} ${t==="private"?Me.active:""}`,onClick:()=>e("private"),children:" zel"})]}),t==="private"&&!n&&O.jsxs("div",{className:Me.contactsList,children:[O.jsx("h3",{children:"Mesajlamalar"}),l.map(h=>O.jsxs("div",{className:Me.contactItem,onClick:()=>i(h),children:[O.jsx("div",{className:Me.contactAvatar,children:h.avatar}),O.jsxs("div",{className:Me.contactInfo,children:[O.jsx("div",{className:Me.contactName,children:h.name}),O.jsx("div",{className:Me.contactPreview,children:h.messages[h.messages.length-1]})]})]},h.id))]}),t==="private"&&n&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:Me.chatHeader,children:[O.jsx("button",{className:Me.backBtn,onClick:()=>i(null),children:" Geri"}),O.jsxs("div",{className:Me.selectedPersonInfo,children:[O.jsx("span",{className:Me.personAvatar,children:n.avatar}),O.jsx("span",{className:Me.personName,children:n.name})]})]}),O.jsx("div",{className:Me.messagesContainer,children:n.messages.map((h,d)=>O.jsxs("div",{className:Me.message,children:[O.jsxs("div",{className:Me.messageHeader,children:[O.jsx("strong",{children:n.name}),O.jsxs("span",{className:Me.time,children:["14:",String(20+d).padStart(2,"0")]})]}),O.jsx("p",{className:Me.messageText,children:h})]},d))})]}),t==="general"&&O.jsx("div",{className:Me.messagesContainer,children:r.map(h=>O.jsxs("div",{className:Me.message,children:[O.jsxs("div",{className:Me.messageHeader,children:[O.jsx("strong",{children:h.user}),O.jsx("span",{className:Me.time,children:h.time})]}),O.jsx("p",{className:Me.messageText,children:h.text})]},h.id))}),O.jsxs("div",{className:Me.inputContainer,children:[O.jsx("input",{type:"text",placeholder:"Mesaj yaz...",value:o,onChange:h=>a(h.target.value),onKeyPress:h=>h.key==="Enter"&&c(),className:Me.input}),O.jsx("button",{onClick:c,className:Me.sendBtn,children:"Gnder"})]})]})}const FU="_eventsPanel_1lmgt_1",jU="_header_1lmgt_10",UU="_eventsList_1lmgt_22",zU="_eventCard_1lmgt_31",BU="_eventHeader_1lmgt_44",VU="_attendees_1lmgt_59",WU="_description_1lmgt_66",GU="_eventDetails_1lmgt_73",HU="_detail_1lmgt_80",$U="_icon_1lmgt_88",KU="_joinBtn_1lmgt_93",rn={eventsPanel:FU,header:jU,eventsList:UU,eventCard:zU,eventHeader:BU,attendees:VU,description:WU,eventDetails:GU,detail:HU,icon:$U,joinBtn:KU};function YU(){const[t,e]=U.useState([{id:1,title:"Ankara Bulumas",description:"Yazlmclar iin a kurma etkinlii",location:"ankaya, Ankara",date:"15 Aralk 2025",time:"18:00",attendees:12},{id:2,title:"Spor Turnuvas",description:"Futsal ma",location:"Keiren, Ankara",date:"16 Aralk 2025",time:"19:00",attendees:8},{id:3,title:"Sanat Sergisi",description:"Yerel sanatlarn eserleri",location:"ankaya Kltr Merkezi",date:"17 Aralk 2025",time:"16:00",attendees:25}]);return O.jsxs("div",{className:rn.eventsPanel,children:[O.jsx("div",{className:rn.header,children:O.jsx("h2",{children:"Etkinlikler"})}),O.jsx("div",{className:rn.eventsList,children:t.map(n=>O.jsxs("div",{className:rn.eventCard,children:[O.jsxs("div",{className:rn.eventHeader,children:[O.jsx("h3",{children:n.title}),O.jsxs("span",{className:rn.attendees,children:[" ",n.attendees]})]}),O.jsx("p",{className:rn.description,children:n.description}),O.jsxs("div",{className:rn.eventDetails,children:[O.jsxs("div",{className:rn.detail,children:[O.jsx("span",{className:rn.icon,children:""}),O.jsx("span",{children:n.location})]}),O.jsxs("div",{className:rn.detail,children:[O.jsx("span",{className:rn.icon,children:""}),O.jsx("span",{children:n.date})]}),O.jsxs("div",{className:rn.detail,children:[O.jsx("span",{className:rn.icon,children:""}),O.jsx("span",{children:n.time})]})]}),O.jsx("button",{className:rn.joinBtn,children:"Katl"})]},n.id))})]})}const XU="_layout_jom0f_1",qU="_main_jom0f_8",pC={layout:XU,main:qU};function Of(){const{user:t,loading:e}=r4(),n=U.useCallback(async(o,a)=>{await dO(Nl,o,a)},[]),i=U.useCallback(async(o,a)=>{await hO(Nl,o,a)},[]),r=U.useCallback(async()=>{await SE(Nl)},[]),s=U.useCallback(async()=>{await SE(Nl)},[]);return{user:t,loading:e,signInWithEmail:n,signUpWithEmail:i,signOut:r,logout:s}}const ZU="_navbar_uds25_1",QU="_container_uds25_10",JU="_logo_uds25_19",ez="_menu_uds25_29",tz="_profileBtn_uds25_33",nz="_dropdown_uds25_56",iz="_userInfo_uds25_80",rz="_userName_uds25_84",sz="_userEmail_uds25_91",oz="_divider_uds25_97",az="_menuItem_uds25_103",lz="_menuItemDanger_uds25_104",pn={navbar:ZU,container:QU,logo:JU,menu:ez,profileBtn:tz,dropdown:nz,userInfo:iz,userName:rz,userEmail:sz,divider:oz,menuItem:az,menuItemDanger:lz};function uz(){var o;const{user:t,logout:e}=Of(),[n,i]=U.useState(!1),r=U.useRef(null);U.useEffect(()=>{function a(l){r.current&&!r.current.contains(l.target)&&i(!1)}if(n)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]);const s=async()=>{try{await e(),i(!1)}catch(a){console.error("Logout error:",a)}};return O.jsx("nav",{className:pn.navbar,children:O.jsxs("div",{className:pn.container,children:[O.jsx("div",{className:pn.logo,children:O.jsx("img",{src:"/assets/friendly-logo_trans.png",alt:"Friendly Logo"})}),O.jsxs("div",{className:pn.menu,ref:r,children:[O.jsx("button",{className:pn.profileBtn,onClick:()=>i(!n),title:"Profil",children:""}),n&&O.jsxs("div",{className:pn.dropdown,children:[t&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:pn.userInfo,children:[O.jsx("p",{className:pn.userName,children:((o=t.email)==null?void 0:o.split("@")[0])||"Kullanc"}),O.jsx("p",{className:pn.userEmail,children:t.email})]}),O.jsx("hr",{className:pn.divider})]}),O.jsx("button",{className:pn.menuItem,onClick:()=>i(!1),children:" Profili Dzenle"}),O.jsx("button",{className:pn.menuItem,onClick:()=>i(!1),children:" Ayarlar"}),O.jsx("hr",{className:pn.divider}),O.jsx("button",{className:pn.menuItemDanger,onClick:s,children:" k Yap"})]})]})]})})}const cz="_bottomBar_15ov8_1",hz="_floatingBtn_15ov8_13",dz="_modal_15ov8_41",fz="_modalContent_15ov8_64",pz="_formGroup_15ov8_93",gz="_formRow_15ov8_125",mz="_formActions_15ov8_131",_z="_cancelBtn_15ov8_137",yz="_submitBtn_15ov8_138",gn={bottomBar:cz,floatingBtn:hz,modal:dz,modalContent:fz,formGroup:pz,formRow:gz,formActions:mz,cancelBtn:_z,submitBtn:yz};function vz(){const[t,e]=U.useState(!1);return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:gn.bottomBar}),O.jsx("button",{className:gn.floatingBtn,onClick:()=>e(!0),title:"Etkinlik Olutur",children:"+"}),t&&O.jsx("div",{className:gn.modal,onClick:()=>e(!1),children:O.jsxs("div",{className:gn.modalContent,onClick:n=>n.stopPropagation(),children:[O.jsx("h2",{children:"Etkinlik Olutur"}),O.jsxs("form",{children:[O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Balk"}),O.jsx("input",{type:"text",placeholder:"Etkinlik bal"})]}),O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Aklama"}),O.jsx("textarea",{placeholder:"Etkinliin aklamas",rows:"4"})]}),O.jsxs("div",{className:gn.formRow,children:[O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Tarih"}),O.jsx("input",{type:"date"})]}),O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Saat"}),O.jsx("input",{type:"time"})]})]}),O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Konum"}),O.jsx("input",{type:"text",placeholder:"Ankara, ankaya"})]}),O.jsxs("div",{className:gn.formGroup,children:[O.jsx("label",{children:"Kategori"}),O.jsxs("select",{children:[O.jsx("option",{children:"Sosyal"}),O.jsx("option",{children:"Spor"}),O.jsx("option",{children:"Eitim"}),O.jsx("option",{children:"Sanat"}),O.jsx("option",{children:"Dier"})]})]}),O.jsxs("div",{className:gn.formActions,children:[O.jsx("button",{type:"button",className:gn.cancelBtn,onClick:()=>e(!1),children:"ptal"}),O.jsx("button",{type:"submit",className:gn.submitBtn,children:"Olutur"})]})]})]})})]})}function Ez({children:t}){return O.jsxs("div",{className:pC.layout,children:[O.jsx(uz,{}),O.jsx("main",{className:pC.main,children:t}),O.jsx(vz,{})]})}function wz(){return O.jsx(Ez,{children:O.jsxs("div",{className:Kc.homeContainer,children:[O.jsx("div",{className:Kc.eventsColumn,children:O.jsx(YU,{})}),O.jsx("div",{className:Kc.mapColumn,children:O.jsx(dU,{})}),O.jsx("div",{className:Kc.chatColumn,children:O.jsx(bU,{})})]})})}function gC(){const{id:t}=WT();return O.jsxs("div",{style:{padding:"1rem"},children:[O.jsx("h2",{children:"Event Detail"}),O.jsxs("p",{children:["Event id: ",t]})]})}function Cz({author:t,content:e}){return O.jsxs("div",{style:{padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:[O.jsx("div",{style:{fontWeight:600},children:t}),O.jsx("div",{children:e})]})}yy(wy,"rooms");function Tz(t,e){const n=yy(wy,`rooms/${t}/messages`);return $F(n,i=>{if(!i.exists()){e([]);return}const r=i.val(),s=Object.keys(r).map(o=>({id:o,...r[o]})).sort((o,a)=>new Date(o.createdAt)-new Date(a.createdAt));e(s)})}function Iz(t){const[e,n]=U.useState([]);return U.useEffect(()=>{if(!t)return;const i=Tz(t,n);return()=>i()},[t]),{messages:e}}function Sz(){const{id:t}=WT(),{messages:e}=Iz(t);return O.jsxs("div",{style:{padding:"1rem"},children:[O.jsx("h2",{children:"Chat Room"}),O.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.map(n=>O.jsx(Cz,{author:n.user_id,content:n.content},n.id)),e.length===0&&O.jsx("p",{children:"No messages yet."})]})]})}function Rz(){return O.jsxs("div",{style:{padding:"1rem"},children:[O.jsx("h2",{children:"Profile"}),O.jsx("p",{children:"Profile content goes here."})]})}const xz="_authContainer_m69je_1",Pz="_authCard_m69je_13",kz="_authHeader_m69je_26",Az="_logo_m69je_31",Nz="_errorMessage_m69je_52",Lz="_form_m69je_62",Oz="_formGroup_m69je_69",Dz="_submitBtn_m69je_102",Mz="_divider_m69je_129",bz="_authFooter_m69je_155",Fz="_link_m69je_165",Ye={authContainer:xz,authCard:Pz,authHeader:kz,logo:Az,errorMessage:Nz,form:Lz,formGroup:Oz,submitBtn:Dz,divider:Mz,authFooter:bz,link:Fz};function jz(){const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,s]=U.useState(""),[o,a]=U.useState(!1),{signInWithEmail:l}=Of(),c=qd(),h=async d=>{d.preventDefault(),s(""),a(!0);try{if(!t||!n){s("Ltfen tm alanlar doldurunuz");return}await l(t,n),c("/")}catch(f){s({"auth/user-not-found":"Bu e-posta ile kaytl kullanc bulunamad","auth/wrong-password":"Yanl ifre","auth/invalid-email":"Geersiz e-posta adresi","auth/user-disabled":"Bu hesap devre d braklm","auth/too-many-requests":"ok fazla baarsz deneme. Ltfen daha sonra tekrar deneyiniz"}[f.code]||"Giri baarsz: "+f.message)}finally{a(!1)}};return O.jsx("div",{className:Ye.authContainer,children:O.jsxs("div",{className:Ye.authCard,children:[O.jsx("div",{className:Ye.authHeader,children:O.jsx("img",{src:"/assets/friendly-logo_trans.png",alt:"Friendly Logo",className:Ye.logo})}),r&&O.jsx("div",{className:Ye.errorMessage,children:r}),O.jsxs("form",{onSubmit:h,className:Ye.form,children:[O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"email",children:"E-posta"}),O.jsx("input",{id:"email",type:"email",placeholder:"ornek@example.com",value:t,onChange:d=>e(d.target.value),disabled:o})]}),O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"password",children:"ifre"}),O.jsx("input",{id:"password",type:"password",placeholder:"",value:n,onChange:d=>i(d.target.value),disabled:o})]}),O.jsx("button",{type:"submit",className:Ye.submitBtn,disabled:o,children:o?"Girii devam ediyor...":"Giri Yap"})]}),O.jsx("div",{className:Ye.divider,children:"veya"}),O.jsxs("div",{className:Ye.authFooter,children:[O.jsx("p",{children:"Henz hesabn yok mu?"}),O.jsx(XT,{to:"/kayit",className:Ye.link,children:"Kayt Ol"})]})]})})}function Uz(){const[t,e]=U.useState(""),[n,i]=U.useState(""),[r,s]=U.useState(""),[o,a]=U.useState(""),[l,c]=U.useState(""),[h,d]=U.useState(!1),{signUpWithEmail:f}=Of(),_=qd(),y=async T=>{T.preventDefault(),c(""),d(!0);try{if(!t||!n||!r||!o){c("Ltfen tm alanlar doldurunuz");return}if(n.length<6){c("ifre en az 6 karakter olmaldr");return}if(n!==r){c("ifreler elemiyor");return}if(o.length<2){c("Ad en az 2 karakter olmaldr");return}const C=(await f(t,n)).user.uid;await GF(yy(wy,`users/${C}`),{uid:C,email:t,displayName:o,createdAt:new Date().toISOString(),profilePicture:null,bio:"",location:null}),_("/")}catch(P){c({"auth/email-already-in-use":"Bu e-posta adresi zaten kullanlmakta","auth/invalid-email":"Geersiz e-posta adresi","auth/weak-password":"ifre ok zayf. En az 6 karakter ve kark karakterler iermeli","auth/operation-not-allowed":"Kayt ilemi u anda yaplamyor"}[P.code]||"Kayt baarsz: "+P.message)}finally{d(!1)}};return O.jsx("div",{className:Ye.authContainer,children:O.jsxs("div",{className:Ye.authCard,children:[O.jsx("div",{className:Ye.authHeader,children:O.jsx("img",{src:"/assets/friendly-logo_trans.png",alt:"Friendly Logo",className:Ye.logo})}),l&&O.jsx("div",{className:Ye.errorMessage,children:l}),O.jsxs("form",{onSubmit:y,className:Ye.form,children:[O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"displayName",children:"Ad Soyad"}),O.jsx("input",{id:"displayName",type:"text",placeholder:"Adnz girin",value:o,onChange:T=>a(T.target.value),disabled:h})]}),O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"email",children:"E-posta"}),O.jsx("input",{id:"email",type:"email",placeholder:"ornek@example.com",value:t,onChange:T=>e(T.target.value),disabled:h})]}),O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"password",children:"ifre"}),O.jsx("input",{id:"password",type:"password",placeholder:"",value:n,onChange:T=>i(T.target.value),disabled:h})]}),O.jsxs("div",{className:Ye.formGroup,children:[O.jsx("label",{htmlFor:"confirmPassword",children:"ifreyi Onayla"}),O.jsx("input",{id:"confirmPassword",type:"password",placeholder:"",value:r,onChange:T=>s(T.target.value),disabled:h})]}),O.jsx("button",{type:"submit",className:Ye.submitBtn,disabled:h,children:h?"Hesap oluturuluyor...":"Kayt Ol"})]}),O.jsx("div",{className:Ye.divider,children:"veya"}),O.jsxs("div",{className:Ye.authFooter,children:[O.jsx("p",{children:"Zaten hesabn var m?"}),O.jsx(XT,{to:"/giris",className:Ye.link,children:"Giri Yap"})]})]})})}function Do({children:t}){const{user:e,loading:n}=Of();return n?O.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--color-text-secondary)"},children:"Ykleniyor..."}):e?t:O.jsx(YT,{to:"/giris",replace:!0})}const zz=()=>O.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[O.jsx("h1",{children:"Hakknda"}),O.jsx("p",{children:"Friendly WebGIS Platform"})]}),Bz=CA([{path:"/giris",element:O.jsx(jz,{})},{path:"/kayit",element:O.jsx(Uz,{})},{path:"/",element:O.jsx(Do,{children:O.jsx(wz,{})})},{path:"/events",element:O.jsx(Do,{children:O.jsx(gC,{})})},{path:"/events/:id",element:O.jsx(Do,{children:O.jsx(gC,{})})},{path:"/chat/:id",element:O.jsx(Do,{children:O.jsx(Sz,{})})},{path:"/profile",element:O.jsx(Do,{children:O.jsx(Rz,{})})},{path:"/about",element:O.jsx(Do,{children:O.jsx(zz,{})})},{path:"*",element:O.jsx(YT,{to:"/",replace:!0})}]);Gp.createRoot(document.getElementById("root")).render(O.jsx(PC.StrictMode,{children:O.jsx(i4,{children:O.jsx(NA,{router:Bz})})}));
